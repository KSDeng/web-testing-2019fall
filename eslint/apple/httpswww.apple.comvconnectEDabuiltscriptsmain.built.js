(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Element/prototype.classList");var classNameAdd=require("./className/add");module.exports=function add(){var tokens=Array.prototype.slice.call(arguments);var el=tokens.shift(tokens);var i;if(el.classList&&el.classList.add){el.classList.add.apply(el.classList,tokens);return}for(i=0;i<tokens.length;i++){classNameAdd(el,tokens[i])}}},{"./className/add":3,"@marcom/ac-polyfills/Array/prototype.slice":363,"@marcom/ac-polyfills/Element/prototype.classList":366}],2:[function(require,module,exports){"use strict";module.exports={add:require("./className/add"),contains:require("./className/contains"),remove:require("./className/remove")}},{"./className/add":3,"./className/contains":4,"./className/remove":6}],3:[function(require,module,exports){"use strict";var classNameContains=require("./contains");module.exports=function add(el,token){if(!classNameContains(el,token)){el.className+=" "+token}}},{"./contains":4}],4:[function(require,module,exports){"use strict";var getTokenRegExp=require("./getTokenRegExp");module.exports=function classNameAdd(el,token){return getTokenRegExp(token).test(el.className)}},{"./getTokenRegExp":5}],5:[function(require,module,exports){"use strict";module.exports=function getTokenRegExp(token){return new RegExp("(\\s|^)"+token+"(\\s|$)")}},{}],6:[function(require,module,exports){"use strict";var classNameContains=require("./contains");var getTokenRegExp=require("./getTokenRegExp");module.exports=function remove(el,token){if(classNameContains(el,token)){el.className=el.className.replace(getTokenRegExp(token),"$1").trim()}}},{"./contains":4,"./getTokenRegExp":5}],7:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Element/prototype.classList");var classNameContains=require("./className/contains");module.exports=function contains(el,token){if(el.classList&&el.classList.contains){return el.classList.contains(token)}return classNameContains(el,token)}},{"./className/contains":4,"@marcom/ac-polyfills/Element/prototype.classList":366}],8:[function(require,module,exports){"use strict";module.exports={add:require("./add"),contains:require("./contains"),remove:require("./remove"),toggle:require("./toggle")}},{"./add":1,"./contains":7,"./remove":9,"./toggle":10}],9:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Element/prototype.classList");var classNameRemove=require("./className/remove");module.exports=function remove(){var tokens=Array.prototype.slice.call(arguments);var el=tokens.shift(tokens);var i;if(el.classList&&el.classList.remove){el.classList.remove.apply(el.classList,tokens);return}for(i=0;i<tokens.length;i++){classNameRemove(el,tokens[i])}}},{"./className/remove":6,"@marcom/ac-polyfills/Array/prototype.slice":363,"@marcom/ac-polyfills/Element/prototype.classList":366}],10:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Element/prototype.classList");var className=require("./className");module.exports=function toggle(el,token,force){var hasForce=typeof force!=="undefined";var addToken;if(el.classList&&el.classList.toggle){if(hasForce){return el.classList.toggle(token,force)}return el.classList.toggle(token)}if(hasForce){addToken=!!force}else{addToken=!className.contains(el,token)}if(addToken){className.add(el,token)}else{className.remove(el,token)}return addToken}},{"./className":2,"@marcom/ac-polyfills/Element/prototype.classList":366}],11:[function(require,module,exports){"use strict";var addEventListenerUtil=require("./utils/addEventListener");var getEventType=require("./shared/getEventType");module.exports=function addEventListener(target,type,listener,useCapture){type=getEventType(target,type);return addEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":21,"./utils/addEventListener":25}],12:[function(require,module,exports){"use strict";var dispatchEventUtil=require("./utils/dispatchEvent");var getEventType=require("./shared/getEventType");module.exports=function dispatchEvent(target,type,options){type=getEventType(target,type);return dispatchEventUtil(target,type,options)}},{"./shared/getEventType":21,"./utils/dispatchEvent":26}],13:[function(require,module,exports){"use strict";module.exports={addEventListener:require("./addEventListener"),dispatchEvent:require("./dispatchEvent"),preventDefault:require("./preventDefault"),removeEventListener:require("./removeEventListener"),stop:require("./stop"),stopPropagation:require("./stopPropagation"),target:require("./target")}},{"./addEventListener":11,"./dispatchEvent":12,"./preventDefault":19,"./removeEventListener":20,"./stop":22,"./stopPropagation":23,"./target":24}],14:[function(require,module,exports){"use strict";var eventTypeAvailable=require("./utils/eventTypeAvailable");var camelCasedEventTypes=require("./shared/camelCasedEventTypes");var windowFallbackEventTypes=require("./shared/windowFallbackEventTypes");var prefixHelper=require("./shared/prefixHelper");var cache={};module.exports=function getEventType(type,tagName){var prefixedType;var tagNameCache;var i;tagName=tagName||"div";type=type.toLowerCase();if(!(tagName in cache)){cache[tagName]={}}tagNameCache=cache[tagName];if(type in tagNameCache){return tagNameCache[type]}if(eventTypeAvailable(type,tagName)){return tagNameCache[type]=type}if(type in camelCasedEventTypes){for(i=0;i<camelCasedEventTypes[type].length;i++){prefixedType=camelCasedEventTypes[type][i];if(eventTypeAvailable(prefixedType.toLowerCase(),tagName)){return tagNameCache[type]=prefixedType}}}for(i=0;i<prefixHelper.evt.length;i++){prefixedType=prefixHelper.evt[i]+type;if(eventTypeAvailable(prefixedType,tagName)){prefixHelper.reduce(i);return tagNameCache[type]=prefixedType}}if(tagName!=="window"&&windowFallbackEventTypes.indexOf(type)){return tagNameCache[type]=getEventType(type,"window")}return tagNameCache[type]=false}},{"./shared/camelCasedEventTypes":15,"./shared/prefixHelper":16,"./shared/windowFallbackEventTypes":17,"./utils/eventTypeAvailable":18}],15:[function(require,module,exports){"use strict";module.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],16:[function(require,module,exports){"use strict";var CSS_PREFIXES=["-webkit-","-moz-","-ms-"];var DOM_PREFIXES=["Webkit","Moz","ms"];var EVT_PREFIXES=["webkit","moz","ms"];var PrefixeHelper=function(){this.initialize()};var proto=PrefixeHelper.prototype;proto.initialize=function(){this.reduced=false;this.css=CSS_PREFIXES;this.dom=DOM_PREFIXES;this.evt=EVT_PREFIXES};proto.reduce=function(index){if(!this.reduced){this.reduced=true;this.css=[this.css[index]];this.dom=[this.dom[index]];this.evt=[this.evt[index]]}};module.exports=new PrefixeHelper},{}],17:[function(require,module,exports){"use strict";module.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],18:[function(require,module,exports){"use strict";var testElements={window:window,document:document};module.exports=function eventTypeAvailable(type,tagName){var el;type="on"+type;if(!(tagName in testElements)){testElements[tagName]=document.createElement(tagName)}el=testElements[tagName];if(type in el){return true}if("setAttribute"in el){el.setAttribute(type,"return;");return typeof el[type]==="function"}return false}},{}],19:[function(require,module,exports){"use strict";module.exports=function preventDefault(evt){evt=evt||window.event;if(evt.preventDefault){evt.preventDefault()}else{evt.returnValue=false}}},{}],20:[function(require,module,exports){"use strict";var removeEventListenerUtil=require("./utils/removeEventListener");var getEventType=require("./shared/getEventType");module.exports=function removeEventListener(target,type,listener,useCapture){type=getEventType(target,type);return removeEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":21,"./utils/removeEventListener":27}],21:[function(require,module,exports){"use strict";var getPrefixedEventType=require("@marcom/ac-prefixer/getEventType");module.exports=function getEventType(target,type){var tagName;var prefixed;if("tagName"in target){tagName=target.tagName}else if(target===window){tagName="window"}else{tagName="document"}prefixed=getPrefixedEventType(type,tagName);if(prefixed){return prefixed}return type}},{"@marcom/ac-prefixer/getEventType":14}],22:[function(require,module,exports){"use strict";var stopPropagation=require("./stopPropagation");var preventDefault=require("./preventDefault");module.exports=function stop(evt){evt=evt||window.event;stopPropagation(evt);preventDefault(evt);evt.stopped=true;evt.returnValue=false}},{"./preventDefault":19,"./stopPropagation":23}],23:[function(require,module,exports){"use strict";module.exports=function stopPropagation(evt){evt=evt||window.event;if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=true}}},{}],24:[function(require,module,exports){"use strict";module.exports=function target(evt){evt=evt||window.event;return typeof evt.target!=="undefined"?evt.target:evt.srcElement}},{}],25:[function(require,module,exports){"use strict";module.exports=function addEventListener(target,type,listener,useCapture){if(target.addEventListener){target.addEventListener(type,listener,!!useCapture)}else{target.attachEvent("on"+type,listener)}return target}},{}],26:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/CustomEvent");module.exports=function dispatchEvent(target,type,options){var evt;if(target.dispatchEvent){if(options){evt=new CustomEvent(type,options)}else{evt=new CustomEvent(type)}target.dispatchEvent(evt)}else{evt=document.createEventObject();if(options&&"detail"in options){evt.detail=options.detail}target.fireEvent("on"+type,evt)}return target}},{"@marcom/ac-polyfills/CustomEvent":365}],27:[function(require,module,exports){"use strict";module.exports=function removeEventListener(target,type,listener,useCapture){if(target.removeEventListener){target.removeEventListener(type,listener,!!useCapture)}else{target.detachEvent("on"+type,listener)}return target}},{}],28:[function(require,module,exports){"use strict";module.exports=8},{}],29:[function(require,module,exports){"use strict";module.exports=11},{}],30:[function(require,module,exports){"use strict";module.exports=9},{}],31:[function(require,module,exports){"use strict";module.exports=10},{}],32:[function(require,module,exports){"use strict";module.exports=1},{}],33:[function(require,module,exports){"use strict";module.exports=3},{}],34:[function(require,module,exports){"use strict";module.exports=function createDocumentFragment(html){var fragment=document.createDocumentFragment();var div;if(html){div=document.createElement("div");div.innerHTML=html;while(div.firstChild){fragment.appendChild(div.firstChild)}}return fragment}},{}],35:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Array/prototype.filter");var isNodeType=require("./internal/isNodeType");var ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function filterByNodeType(nodes,nodeType){nodeType=nodeType||ELEMENT_NODE;nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(node){return isNodeType(node,nodeType)})}},{"./ELEMENT_NODE":32,"./internal/isNodeType":43,"@marcom/ac-polyfills/Array/prototype.filter":359,"@marcom/ac-polyfills/Array/prototype.slice":363}],36:[function(require,module,exports){"use strict";module.exports=function hasAttribute(el,attr){if("hasAttribute"in el){return el.hasAttribute(attr)}return el.attributes.getNamedItem(attr)!==null}},{}],37:[function(require,module,exports){"use strict";module.exports={createDocumentFragment:require("./createDocumentFragment"),filterByNodeType:require("./filterByNodeType"),hasAttribute:require("./hasAttribute"),indexOf:require("./indexOf"),insertAfter:require("./insertAfter"),insertBefore:require("./insertBefore"),insertFirstChild:require("./insertFirstChild"),insertLastChild:require("./insertLastChild"),isComment:require("./isComment"),isDocument:require("./isDocument"),isDocumentFragment:require("./isDocumentFragment"),isDocumentType:require("./isDocumentType"),isElement:require("./isElement"),isNode:require("./isNode"),isNodeList:require("./isNodeList"),isTextNode:require("./isTextNode"),remove:require("./remove"),replace:require("./replace"),COMMENT_NODE:require("./COMMENT_NODE"),DOCUMENT_FRAGMENT_NODE:require("./DOCUMENT_FRAGMENT_NODE"),DOCUMENT_NODE:require("./DOCUMENT_NODE"),DOCUMENT_TYPE_NODE:require("./DOCUMENT_TYPE_NODE"),ELEMENT_NODE:require("./ELEMENT_NODE"),TEXT_NODE:require("./TEXT_NODE")}},{"./COMMENT_NODE":28,"./DOCUMENT_FRAGMENT_NODE":29,"./DOCUMENT_NODE":30,"./DOCUMENT_TYPE_NODE":31,"./ELEMENT_NODE":32,"./TEXT_NODE":33,"./createDocumentFragment":34,"./filterByNodeType":35,"./hasAttribute":36,"./indexOf":38,"./insertAfter":39,"./insertBefore":40,"./insertFirstChild":41,"./insertLastChild":42,"./isComment":45,"./isDocument":46,"./isDocumentFragment":47,"./isDocumentType":48,"./isElement":49,"./isNode":50,"./isNodeList":51,"./isTextNode":52,"./remove":53,"./replace":54}],38:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");require("@marcom/ac-polyfills/Array/prototype.slice");var validate=require("./internal/validate");var filterByNodeType=require("./filterByNodeType");module.exports=function indexOf(node,nodeType){var parentNode=node.parentNode;var nodes;if(!parentNode){return 0}nodes=parentNode.childNodes;if(nodeType!==false){nodes=filterByNodeType(nodes,nodeType)}else{nodes=Array.prototype.slice.call(nodes)}return nodes.indexOf(node)}},{"./filterByNodeType":35,"./internal/validate":44,"@marcom/ac-polyfills/Array/prototype.indexOf":361,"@marcom/ac-polyfills/Array/prototype.slice":363}],39:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertAfter(node,target){validate.insertNode(node,true,"insertAfter");validate.childNode(target,true,"insertAfter");validate.hasParentNode(target,"insertAfter");if(!target.nextSibling){return target.parentNode.appendChild(node)}return target.parentNode.insertBefore(node,target.nextSibling)}},{"./internal/validate":44}],40:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertBefore(node,target){validate.insertNode(node,true,"insertBefore");validate.childNode(target,true,"insertBefore");validate.hasParentNode(target,"insertBefore");return target.parentNode.insertBefore(node,target)}},{"./internal/validate":44}],41:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertFirstChild(node,target){validate.insertNode(node,true,"insertFirstChild");validate.parentNode(target,true,"insertFirstChild");if(!target.firstChild){return target.appendChild(node)}return target.insertBefore(node,target.firstChild)}},{"./internal/validate":44}],42:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertLastChild(node,target){validate.insertNode(node,true,"insertLastChild");validate.parentNode(target,true,"insertLastChild");return target.appendChild(node)}},{"./internal/validate":44}],43:[function(require,module,exports){"use strict";var isNode=require("../isNode");module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1}},{"../isNode":50}],44:[function(require,module,exports){"use strict";var isNodeType=require("./isNodeType");var COMMENT_NODE=require("../COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("../DOCUMENT_FRAGMENT_NODE");var ELEMENT_NODE=require("../ELEMENT_NODE");var TEXT_NODE=require("../TEXT_NODE");var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=" must be an Element, TextNode, Comment, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, or Document Fragment";var ERR_NO_PARENT_NODE=" must have a parentNode";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"target";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"target";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||"target";if(!node.parentNode){throw new TypeError(funcName+": "+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":28,"../DOCUMENT_FRAGMENT_NODE":29,"../ELEMENT_NODE":32,"../TEXT_NODE":33,"./isNodeType":43}],45:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var COMMENT_NODE=require("./COMMENT_NODE");module.exports=function isComment(obj){return isNodeType(obj,COMMENT_NODE)}},{"./COMMENT_NODE":28,"./internal/isNodeType":43}],46:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var DOCUMENT_NODE=require("./DOCUMENT_NODE");module.exports=function isDocument(obj){return isNodeType(obj,DOCUMENT_NODE)}},{"./DOCUMENT_NODE":30,"./internal/isNodeType":43}],47:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var DOCUMENT_FRAGMENT_NODE=require("./DOCUMENT_FRAGMENT_NODE");module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":29,"./internal/isNodeType":43}],48:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var DOCUMENT_TYPE_NODE=require("./DOCUMENT_TYPE_NODE");module.exports=function isDocumentType(obj){return isNodeType(obj,DOCUMENT_TYPE_NODE)}},{"./DOCUMENT_TYPE_NODE":31,"./internal/isNodeType":43}],49:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":32,"./internal/isNodeType":43}],50:[function(require,module,exports){"use strict";module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],51:[function(require,module,exports){"use strict";var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){if(!obj){return false}if(typeof obj.length!=="number"){return false}if(typeof obj[0]==="object"&&(!obj[0]||!obj[0].nodeType)){return false}return nodeListToStringPattern.test(Object.prototype.toString.call(obj))}},{}],52:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var TEXT_NODE=require("./TEXT_NODE");module.exports=function isTextNode(obj){return isNodeType(obj,TEXT_NODE)}},{"./TEXT_NODE":33,"./internal/isNodeType":43}],53:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function remove(node){validate.childNode(node,true,"remove");if(!node.parentNode){return node}return node.parentNode.removeChild(node)}},{"./internal/validate":44}],54:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function replace(newNode,oldNode){validate.insertNode(newNode,true,"insertFirstChild","newNode");validate.childNode(oldNode,true,"insertFirstChild","oldNode");validate.hasParentNode(oldNode,"insertFirstChild","oldNode");return oldNode.parentNode.replaceChild(newNode,oldNode)}},{"./internal/validate":44}],55:[function(require,module,exports){"use strict";module.exports={ancestor:require("./ancestor"),ancestors:require("./ancestors"),children:require("./children"),filterBySelector:require("./filterBySelector"),firstChild:require("./firstChild"),lastChild:require("./lastChild"),matchesSelector:require("./matchesSelector"),nextSibling:require("./nextSibling"),nextSiblings:require("./nextSiblings"),previousSibling:require("./previousSibling"),previousSiblings:require("./previousSiblings"),querySelector:require("./querySelector"),querySelectorAll:require("./querySelectorAll"),siblings:require("./siblings")}},{"./ancestor":56,"./ancestors":57,"./children":58,"./filterBySelector":59,"./firstChild":60,"./lastChild":63,"./matchesSelector":64,"./nextSibling":65,"./nextSiblings":66,"./previousSibling":67,"./previousSiblings":68,"./querySelector":69,"./querySelectorAll":70,"./siblings":74}],56:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function ancestor(node,selector,inclusive){validate.childNode(node,true,"ancestors");validate.selector(selector,false,"ancestors");if(inclusive&&isElement(node)&&(!selector||matchesSelector(node,selector))){return node}if(node!==document.body){while((node=node.parentNode)&&isElement(node)){if(!selector||matchesSelector(node,selector)){return node}if(node===document.body){break}}}return null}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],57:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function ancestors(node,selector,inclusive){var els=[];validate.childNode(node,true,"ancestors");validate.selector(selector,false,"ancestors");if(inclusive&&isElement(node)&&(!selector||matchesSelector(node,selector))){els.push(node)}if(node!==document.body){while((node=node.parentNode)&&isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}if(node===document.body){break}}}return els}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],58:[function(require,module,exports){"use strict";var filterByNodeType=require("@marcom/ac-dom-nodes/filterByNodeType");var filterBySelector=require("./filterBySelector");var validate=require("./internal/validate");module.exports=function children(node,selector){var els;validate.parentNode(node,true,"children");validate.selector(selector,false,"children");els=node.children||node.childNodes;els=filterByNodeType(els);if(selector){els=filterBySelector(els,selector)}return els}},{"./filterBySelector":59,"./internal/validate":62,"@marcom/ac-dom-nodes/filterByNodeType":35}],59:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");require("@marcom/ac-polyfills/Array/prototype.filter");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function filterBySelector(nodes,selector){validate.selector(selector,true,"filterBySelector");nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(el){return matchesSelector(el,selector)})}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-polyfills/Array/prototype.filter":359,"@marcom/ac-polyfills/Array/prototype.slice":363}],60:[function(require,module,exports){"use strict";var children=require("./children");var validate=require("./internal/validate");module.exports=function firstChild(node,selector){var els;validate.parentNode(node,true,"firstChild");validate.selector(selector,false,"firstChild");if(node.firstElementChild&&!selector){return node.firstElementChild}els=children(node,selector);if(els.length){return els[0]}return null}},{"./children":58,"./internal/validate":62}],61:[function(require,module,exports){"use strict";module.exports=window.Element?function(proto){return proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector}(Element.prototype):null},{}],62:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isNode=require("@marcom/ac-dom-nodes/isNode");var COMMENT_NODE=require("@marcom/ac-dom-nodes/COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE");var DOCUMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_NODE");var ELEMENT_NODE=require("@marcom/ac-dom-nodes/ELEMENT_NODE");var TEXT_NODE=require("@marcom/ac-dom-nodes/TEXT_NODE");var isNodeType=function(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1};var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, Document, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var ERR_INVALID_SELECTOR=" must be a string";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"node";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},selector:function(selector,required,funcName,paramName){paramName=paramName||"selector";if((selector||required)&&typeof selector!=="string"){throw new TypeError(funcName+": "+paramName+ERR_INVALID_SELECTOR)}}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":28,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":29,"@marcom/ac-dom-nodes/DOCUMENT_NODE":30,"@marcom/ac-dom-nodes/ELEMENT_NODE":32,"@marcom/ac-dom-nodes/TEXT_NODE":33,"@marcom/ac-dom-nodes/isNode":50,"@marcom/ac-polyfills/Array/prototype.indexOf":361}],63:[function(require,module,exports){"use strict";var children=require("./children");var validate=require("./internal/validate");module.exports=function lastChild(node,selector){var els;validate.parentNode(node,true,"lastChild");validate.selector(selector,false,"lastChild");if(node.lastElementChild&&!selector){return node.lastElementChild}els=children(node,selector);if(els.length){return els[els.length-1]}return null}},{"./children":58,"./internal/validate":62}],64:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var validate=require("./internal/validate");var nativeMatches=require("./internal/nativeMatches");var matchesSelectorShim=require("./shims/matchesSelector");module.exports=function matchesSelector(node,selector){validate.selector(selector,true,"matchesSelector");if(!isElement(node)){return false}if(!nativeMatches){return matchesSelectorShim(node,selector)}return nativeMatches.call(node,selector)}},{"./internal/nativeMatches":61,"./internal/validate":62,"./shims/matchesSelector":71,"@marcom/ac-dom-nodes/isElement":49}],65:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function nextSibling(node,selector){validate.childNode(node,true,"nextSibling");validate.selector(selector,false,"nextSibling");if(node.nextElementSibling&&!selector){return node.nextElementSibling}while(node=node.nextSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}return null}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],66:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function nextSiblings(node,selector){var els=[];validate.childNode(node,true,"nextSiblings");validate.selector(selector,false,"nextSiblings");while(node=node.nextSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}return els}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],67:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function previousSibling(node,selector){validate.childNode(node,true,"previousSibling");validate.selector(selector,false,"previousSibling");if(node.previousElementSibling&&!selector){return node.previousElementSibling}while(node=node.previousSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}return null}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],68:[function(require,module,exports){"use strict";var isElement=require("@marcom/ac-dom-nodes/isElement");var matchesSelector=require("./matchesSelector");var validate=require("./internal/validate");module.exports=function previousSiblings(node,selector){var els=[];validate.childNode(node,true,"previousSiblings");validate.selector(selector,false,"previousSiblings");while(node=node.previousSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}return els.reverse()}},{"./internal/validate":62,"./matchesSelector":64,"@marcom/ac-dom-nodes/isElement":49}],69:[function(require,module,exports){"use strict";var validate=require("./internal/validate");var querySelectorShim=require("./shims/querySelector");var querySelectorAvailable="querySelector"in document;module.exports=function querySelector(selector,context){context=context||document;validate.parentNode(context,true,"querySelector","context");validate.selector(selector,true,"querySelector");if(!querySelectorAvailable){return querySelectorShim(selector,context)}return context.querySelector(selector)}},{"./internal/validate":62,"./shims/querySelector":72}],70:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");var validate=require("./internal/validate");var querySelectorAllShim=require("./shims/querySelectorAll");var querySelectorAllAvailable="querySelectorAll"in document;module.exports=function querySelectorAll(selector,context){context=context||document;validate.parentNode(context,true,"querySelectorAll","context");validate.selector(selector,true,"querySelectorAll");if(!querySelectorAllAvailable){return querySelectorAllShim(selector,context)}return Array.prototype.slice.call(context.querySelectorAll(selector))}},{"./internal/validate":62,"./shims/querySelectorAll":73,"@marcom/ac-polyfills/Array/prototype.slice":363}],71:[function(require,module,exports){"use strict";var querySelectorAll=require("../querySelectorAll");module.exports=function matchesSelector(node,selector){var context=node.parentNode||document;var nodes=querySelectorAll(selector,context);var i;for(i=0;i<nodes.length;i++){if(nodes[i]===node){return true}}return false}},{"../querySelectorAll":70}],72:[function(require,module,exports){"use strict";var querySelectorAll=require("./querySelectorAll");module.exports=function querySelector(selector,context){var allResults=querySelectorAll(selector,context);return allResults.length?allResults[0]:null}},{"./querySelectorAll":73}],73:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isElement=require("@marcom/ac-dom-nodes/isElement");var isDocumentFragment=require("@marcom/ac-dom-nodes/isDocumentFragment");var removeElement=require("@marcom/ac-dom-nodes/remove");var COLLECTION_PREFIX="_ac_qsa_";var isElementInContext=function(el,context){var parent;if(context===document){return true}parent=el;while((parent=parent.parentNode)&&isElement(parent)){if(parent===context){return true}}return false};var recalcStyles=function(context){if("recalc"in context){context.recalc(false)}else{document.recalc(false)}window.scrollBy(0,0)};module.exports=function querySelectorAll(selector,context){var style=document.createElement("style");var id=COLLECTION_PREFIX+(Math.random()+"").slice(-6);var els=[];var el;context=context||document;document[id]=[];if(isDocumentFragment(context)){context.appendChild(style)}else{document.documentElement.firstChild.appendChild(style)}style.styleSheet.cssText="*{display:recalc;}"+selector+'{ac-qsa:expression(document["'+id+'"] && document["'+id+'"].push(this));}';recalcStyles(context);while(document[id].length){el=document[id].shift();el.style.removeAttribute("ac-qsa");if(els.indexOf(el)===-1&&isElementInContext(el,context)){els.push(el)}}document[id]=null;removeElement(style);recalcStyles(context);return els}},{"@marcom/ac-dom-nodes/isDocumentFragment":47,"@marcom/ac-dom-nodes/isElement":49,"@marcom/ac-dom-nodes/remove":53,"@marcom/ac-polyfills/Array/prototype.indexOf":361}],74:[function(require,module,exports){"use strict";var children=require("./children");var validate=require("./internal/validate");module.exports=function siblings(node,selector){var els=[];validate.childNode(node,true,"siblings");validate.selector(selector,false,"siblings");if(node.parentNode){els=children(node.parentNode,selector);els=els.filter(function(el){return el!==node})}return els}},{"./children":58,"./internal/validate":62}],75:[function(require,module,exports){"use strict";var getStyleValue=require("@marcom/ac-prefixer/getStyleValue");var getStyleProperty=require("@marcom/ac-prefixer/getStyleProperty");var memoize=require("@marcom/ac-function/memoize");function cssPropertyAvailable(property,value){if(typeof value!=="undefined"){return!!getStyleValue(property,value)}else{return!!getStyleProperty(property)}}module.exports=memoize(cssPropertyAvailable);module.exports.original=cssPropertyAvailable},{"@marcom/ac-function/memoize":80,"@marcom/ac-prefixer/getStyleProperty":82,"@marcom/ac-prefixer/getStyleValue":83}],76:[function(require,module,exports){"use strict";module.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],77:[function(require,module,exports){"use strict";var touchAvailable=require("./touchAvailable").original;var globalsHelper=require("./helpers/globals");var once=require("@marcom/ac-function/once");function isDesktop(){var windowObj=globalsHelper.getWindow();return!touchAvailable()&&!windowObj.orientation}module.exports=once(isDesktop);module.exports.original=isDesktop},{"./helpers/globals":76,"./touchAvailable":90,"@marcom/ac-function/once":81}],78:[function(require,module,exports){"use strict";var globalsHelper=require("./helpers/globals");module.exports=function isRetina(){var windowObj=globalsHelper.getWindow();return"devicePixelRatio"in windowObj&&windowObj.devicePixelRatio>=1.5}},{"./helpers/globals":76}],79:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/matchMedia");var globalsHelper=require("./helpers/globals");var once=require("@marcom/ac-function/once");function mediaQueriesAvailable(){var windowObj=globalsHelper.getWindow();var mql=windowObj.matchMedia("only all");return!!(mql&&mql.matches)}module.exports=once(mediaQueriesAvailable);module.exports.original=mediaQueriesAvailable},{"./helpers/globals":76,"@marcom/ac-function/once":81,"@marcom/ac-polyfills/matchMedia":371}],80:[function(require,module,exports){"use strict";var defaultHashFunction=function(){var key="";var i;for(i=0;i<arguments.length;i++){if(i>0){key+=","}key+=arguments[i]}return key};module.exports=function memoize(func,hashFunction){hashFunction=hashFunction||defaultHashFunction;var memoized=function(){var args=arguments;var key=hashFunction.apply(this,args);if(!(key in memoized.cache)){memoized.cache[key]=func.apply(this,args)}return memoized.cache[key]};memoized.cache={};return memoized}},{}],81:[function(require,module,exports){"use strict";module.exports=function once(func){var result;return function(){if(typeof result==="undefined"){result=func.apply(this,arguments)}return result}}},{}],82:[function(require,module,exports){"use strict";var cache=require("./shared/stylePropertyCache");var getStyleTestElement=require("./shared/getStyleTestElement");var toCSS=require("./utils/toCSS");var toDOM=require("./utils/toDOM");var prefixHelper=require("./shared/prefixHelper");var memoizeStyleProperty=function(property,prefixed){var cssProperty=toCSS(property);var cssPrefixed=prefixed===false?false:toCSS(prefixed);cache[property]=cache[prefixed]=cache[cssProperty]=cache[cssPrefixed]={dom:prefixed,css:cssPrefixed};return prefixed};module.exports=function getStyleProperty(property){var properties;var ucProperty;var el;var i;property+="";if(property in cache){return cache[property].dom}el=getStyleTestElement();property=toDOM(property);ucProperty=property.charAt(0).toUpperCase()+property.substring(1);if(property==="filter"){properties=["WebkitFilter","filter"]}else{properties=(property+" "+prefixHelper.dom.join(ucProperty+" ")+ucProperty).split(" ")}for(i=0;i<properties.length;i++){if(typeof el.style[properties[i]]!=="undefined"){if(i!==0){prefixHelper.reduce(i-1)}return memoizeStyleProperty(property,properties[i])}}return memoizeStyleProperty(property,false)}},{"./shared/getStyleTestElement":84,"./shared/prefixHelper":85,"./shared/stylePropertyCache":86,"./utils/toCSS":88,"./utils/toDOM":89}],83:[function(require,module,exports){"use strict";var getStyleProperty=require("./getStyleProperty");var styleValueAvailable=require("./shared/styleValueAvailable");var prefixHelper=require("./shared/prefixHelper");var stylePropertyCache=require("./shared/stylePropertyCache");var styleValueCache={};var RE_CSS_FUNCTION_PARAMS=/(\([^\)]+\))/gi;var RE_CSS_VALUES=/([^ ,;\(]+(\([^\)]+\))?)/gi;module.exports=function getStyleValue(property,value){var cssProperty;value+="";property=getStyleProperty(property);if(!property){return false}if(styleValueAvailable(property,value)){return value}cssProperty=stylePropertyCache[property].css;value=value.replace(RE_CSS_VALUES,function(match){var values;var valueKey;var key;var i;if(match[0]==="#"||!isNaN(match[0])){return match}valueKey=match.replace(RE_CSS_FUNCTION_PARAMS,"");key=cssProperty+":"+valueKey;if(key in styleValueCache){if(styleValueCache[key]===false){return""}return match.replace(valueKey,styleValueCache[key])}values=prefixHelper.css.map(function(prefix){return prefix+match});values=[match].concat(values);for(i=0;i<values.length;i++){if(styleValueAvailable(property,values[i])){if(i!==0){prefixHelper.reduce(i-1)}styleValueCache[key]=values[i].replace(RE_CSS_FUNCTION_PARAMS,"");return values[i]}}styleValueCache[key]=false;return""});value=value.trim();return value===""?false:value}},{"./getStyleProperty":82,"./shared/prefixHelper":85,"./shared/stylePropertyCache":86,"./shared/styleValueAvailable":87}],84:[function(require,module,exports){"use strict";var el;module.exports=function getStyleTestElement(){if(!el){el=document.createElement("_")}else{el.style.cssText="";el.removeAttribute("style")}return el};module.exports.resetElement=function(){el=null}},{}],85:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{dup:16}],86:[function(require,module,exports){"use strict";module.exports={}},{}],87:[function(require,module,exports){"use strict";var cache=require("./stylePropertyCache");var getStyleTestElement=require("./getStyleTestElement");var flagsSet=false;var supportsAvailable;var invalidStyleThrowsError;var prepareFlags=function(){var el;if(!flagsSet){flagsSet=true;supportsAvailable="CSS"in window&&"supports"in window.CSS;invalidStyleThrowsError=false;el=getStyleTestElement();try{el.style.width="invalid"}catch(e){invalidStyleThrowsError=true}}};module.exports=function styleValueAvailable(property,value){var before;var el;prepareFlags();if(supportsAvailable){property=cache[property].css;return CSS.supports(property,value)}el=getStyleTestElement();before=el.style[property];if(invalidStyleThrowsError){try{el.style[property]=value}catch(e){return false}}else{el.style[property]=value}return el.style[property]&&el.style[property]!==before};module.exports.resetFlags=function(){flagsSet=false}},{"./getStyleTestElement":84,"./stylePropertyCache":86}],88:[function(require,module,exports){"use strict";var RE_DOM_PREFIXES=/^(webkit|moz|ms)/gi;module.exports=function toCSS(str){var i;if(str.toLowerCase()==="cssfloat"){return"float"}if(RE_DOM_PREFIXES.test(str)){str="-"+str}return str.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}},{}],89:[function(require,module,exports){"use strict";var RE_CSS_WORD=/-([a-z])/g;module.exports=function toDOM(str){var i;if(str.toLowerCase()==="float"){return"cssFloat"}str=str.replace(RE_CSS_WORD,function(str,m1){return m1.toUpperCase()});if(str.substr(0,2)==="Ms"){str="ms"+str.substring(2)}return str}},{}],90:[function(require,module,exports){"use strict";var globalsHelper=require("./helpers/globals");var once=require("@marcom/ac-function/once");function touchAvailable(){var windowObj=globalsHelper.getWindow();var documentObj=globalsHelper.getDocument();var navigatorObj=globalsHelper.getNavigator();return!!("ontouchstart"in windowObj||windowObj.DocumentTouch&&documentObj instanceof windowObj.DocumentTouch||navigatorObj.maxTouchPoints>0||navigatorObj.msMaxTouchPoints>0)}module.exports=once(touchAvailable);module.exports.original=touchAvailable},{"./helpers/globals":76,"@marcom/ac-function/once":81}],91:[function(require,module,exports){"use strict";var getBoundingClientRect=require("./utils/getBoundingClientRect");module.exports=function getContentDimensions(el,rendered){var scale=1;if(rendered){scale=getBoundingClientRect(el).width/el.offsetWidth}return{width:el.scrollWidth*scale,height:el.scrollHeight*scale}}},{"./utils/getBoundingClientRect":101}],92:[function(require,module,exports){"use strict";var getBoundingClientRect=require("./utils/getBoundingClientRect");module.exports=function getDimensions(el,rendered){var rect;if(rendered){rect=getBoundingClientRect(el);return{width:rect.width,height:rect.height}}return{width:el.offsetWidth,height:el.offsetHeight}}},{"./utils/getBoundingClientRect":101}],93:[function(require,module,exports){"use strict";var getDimensions=require("./getDimensions");var getBoundingClientRect=require("./utils/getBoundingClientRect");var getScrollX=require("./getScrollX");var getScrollY=require("./getScrollY");module.exports=function getPagePosition(el,rendered){var rect;var scrollX;var scrollY;var dimensions;if(rendered){rect=getBoundingClientRect(el);scrollX=getScrollX();scrollY=getScrollY();return{top:rect.top+scrollY,right:rect.right+scrollX,bottom:rect.bottom+scrollY,left:rect.left+scrollX}}dimensions=getDimensions(el,rendered);rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height};while(el=el.offsetParent){rect.top+=el.offsetTop;rect.left+=el.offsetLeft}return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":92,"./getScrollX":97,"./getScrollY":98,"./utils/getBoundingClientRect":101}],94:[function(require,module,exports){"use strict";var getDimensions=require("./getDimensions");var getPixelsInViewport=require("./getPixelsInViewport");module.exports=function getPercentInViewport(el,rendered){var inViewport=getPixelsInViewport(el,rendered);var height=getDimensions(el,rendered).height;return inViewport/height}},{"./getDimensions":92,"./getPixelsInViewport":95}],95:[function(require,module,exports){"use strict";var getViewportPosition=require("./getViewportPosition");module.exports=function getPixelsInViewport(el,rendered){var vh=document.documentElement.clientHeight;var position=getViewportPosition(el,rendered);var pixels;if(position.top>=vh||position.bottom<=0){return 0}pixels=position.bottom-position.top;if(position.top<0){pixels+=position.top}if(position.bottom>vh){pixels-=position.bottom-vh}return pixels}},{"./getViewportPosition":99}],96:[function(require,module,exports){"use strict";var getDimensions=require("./getDimensions");var getBoundingClientRect=require("./utils/getBoundingClientRect");module.exports=function getPosition(el,rendered){var rect;var parentRect;var dimensions;if(rendered){rect=getBoundingClientRect(el);if(el.offsetParent){parentRect=getBoundingClientRect(el.offsetParent);rect.top-=parentRect.top;rect.left-=parentRect.left}}else{dimensions=getDimensions(el,rendered);rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height}}return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":92,"./utils/getBoundingClientRect":101}],97:[function(require,module,exports){"use strict";module.exports=function getScrollX(el){var offset;el=el||window;if(el===window){offset=window.pageXOffset;if(!offset){el=document.documentElement||document.body.parentNode||document.body}else{return offset}}return el.scrollLeft}},{}],98:[function(require,module,exports){"use strict";module.exports=function getScrollY(el){var offset;el=el||window;if(el===window){offset=window.pageYOffset;if(!offset){el=document.documentElement||document.body.parentNode||document.body}else{return offset}}return el.scrollTop}},{}],99:[function(require,module,exports){"use strict";var getPagePosition=require("./getPagePosition");var getBoundingClientRect=require("./utils/getBoundingClientRect");var getScrollX=require("./getScrollX");var getScrollY=require("./getScrollY");module.exports=function getViewportPosition(el,rendered){var position;var scrollX;var scrollY;if(rendered){position=getBoundingClientRect(el);return{top:position.top,right:position.right,bottom:position.bottom,left:position.left}}position=getPagePosition(el);scrollX=getScrollX();scrollY=getScrollY();return{top:position.top-scrollY,right:position.right-scrollX,bottom:position.bottom-scrollY,left:position.left-scrollX}}},{"./getPagePosition":93,"./getScrollX":97,"./getScrollY":98,"./utils/getBoundingClientRect":101}],100:[function(require,module,exports){"use strict";var getPixelsInViewport=require("./getPixelsInViewport");var getPercentInViewport=require("./getPercentInViewport");module.exports=function isInViewport(el,rendered,threshold){var inViewport;threshold=threshold||0;if(typeof threshold==="string"&&threshold.slice(-2)==="px"){threshold=parseInt(threshold,10);inViewport=getPixelsInViewport(el,rendered)}else{inViewport=getPercentInViewport(el,rendered)}return inViewport>0&&inViewport>=threshold}},{"./getPercentInViewport":94,"./getPixelsInViewport":95}],101:[function(require,module,exports){"use strict";module.exports=function getBoundingClientRect(el){var rect=el.getBoundingClientRect();return{top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.width||rect.right-rect.left,height:rect.height||rect.bottom-rect.top}}},{}],102:[function(require,module,exports){"use strict";var cache=require("./shared/stylePropertyCache");var getStyleProperty=require("./getStyleProperty");var getStyleValue=require("./getStyleValue");module.exports=function getStyleCSS(property,value){var css;property=getStyleProperty(property);if(!property){return false}css=cache[property].css;if(typeof value!=="undefined"){value=getStyleValue(property,value);if(value===false){return false}css+=":"+value+";"}return css}},{"./getStyleProperty":103,"./getStyleValue":104,"./shared/stylePropertyCache":107}],103:[function(require,module,exports){arguments[4][82][0].apply(exports,arguments)},{"./shared/getStyleTestElement":105,"./shared/prefixHelper":106,"./shared/stylePropertyCache":107,"./utils/toCSS":110,"./utils/toDOM":111,dup:82}],104:[function(require,module,exports){arguments[4][83][0].apply(exports,arguments)},{"./getStyleProperty":103,"./shared/prefixHelper":106,"./shared/stylePropertyCache":107,"./shared/styleValueAvailable":108,dup:83}],105:[function(require,module,exports){arguments[4][84][0].apply(exports,arguments)},{dup:84}],106:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{dup:16}],107:[function(require,module,exports){arguments[4][86][0].apply(exports,arguments)},{dup:86}],108:[function(require,module,exports){arguments[4][87][0].apply(exports,arguments)},{"./getStyleTestElement":105,"./stylePropertyCache":107,dup:87}],109:[function(require,module,exports){"use strict";var RE_PREFIXES=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi;module.exports=function stripPrefixes(str){str=String.prototype.replace.call(str,RE_PREFIXES,"");return str.charAt(0).toLowerCase()+str.substring(1)}},{}],110:[function(require,module,exports){arguments[4][88][0].apply(exports,arguments)},{dup:88}],111:[function(require,module,exports){arguments[4][89][0].apply(exports,arguments)},{dup:89}],112:[function(require,module,exports){"use strict";module.exports={getStyle:require("./getStyle"),setStyle:require("./setStyle")}},{"./getStyle":113,"./setStyle":115}],113:[function(require,module,exports){"use strict";var getStyleProperty=require("@marcom/ac-prefixer/getStyleProperty");var stripPrefixes=require("@marcom/ac-prefixer/stripPrefixes");module.exports=function getStyle(){var properties=Array.prototype.slice.call(arguments);var target=properties.shift(properties);var computed=window.getComputedStyle(target);var styles={};var property;var prefixed;var value;var i;if(typeof properties[0]!=="string"){properties=properties[0]}for(i=0;i<properties.length;i++){property=properties[i];prefixed=getStyleProperty(property);if(prefixed){property=stripPrefixes(prefixed);value=computed[prefixed];if(!value||value==="auto"){value=null}if(value){value=stripPrefixes(value)}}else{value=null}styles[property]=value}return styles}},{"@marcom/ac-prefixer/getStyleProperty":103,"@marcom/ac-prefixer/stripPrefixes":109}],114:[function(require,module,exports){"use strict";module.exports=function normalizeValue(value){var combined;var partials;var i;if(!value&&value!==0){return""}if(Array.isArray(value)){return value+""}if(typeof value==="object"){combined="";partials=Object.keys(value);for(i=0;i<partials.length;i++){combined+=partials[i]+"("+value[partials[i]]+") "}return combined.trim()}return value}},{}],115:[function(require,module,exports){"use strict";var getStyleCSS=require("@marcom/ac-prefixer/getStyleCSS");var getStyleProperty=require("@marcom/ac-prefixer/getStyleProperty");var normalizeValue=require("./internal/normalizeValue");module.exports=function setStyle(target,styles){var cssText="";var cssRule;var property;var domProperty;var value;var targetCSSText;if(typeof styles!=="object"){throw new TypeError("setStyle: styles must be an Object")}for(property in styles){value=normalizeValue(styles[property]);if(!value&&value!==0){domProperty=getStyleProperty(property);if("removeAttribute"in target.style){target.style.removeAttribute(domProperty)}else{target.style[domProperty]=""}}else{cssRule=getStyleCSS(property,value);if(cssRule!==false){cssText+=" "+cssRule}}}if(cssText.length){targetCSSText=target.style.cssText;if(targetCSSText.charAt(targetCSSText.length-1)!==";"){targetCSSText+=";"}targetCSSText+=cssText;target.style.cssText=targetCSSText}return target}},{"./internal/normalizeValue":114,"@marcom/ac-prefixer/getStyleCSS":102,"@marcom/ac-prefixer/getStyleProperty":103}],116:[function(require,module,exports){"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":117}],117:[function(require,module,exports){"use strict";function EventEmitterMicro(){this._events={}}var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;if(arguments.length===1){this._events[eventName]=null;delete this._events[eventName];return}var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===false||this._events[eventName].length===0){return false}return true};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}this._events=null};module.exports=EventEmitterMicro},{}],118:[function(require,module,exports){"use strict";module.exports=function throttle(func,wait){var timeout=null;return function(){if(timeout===null){func.apply(this,arguments);timeout=setTimeout(function(){timeout=null},wait)}}}},{}],119:[function(require,module,exports){"use strict";var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var ac_addEventListener=require("@marcom/ac-dom-events/utils/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/utils/removeEventListener");var create=require("@marcom/ac-object/create");var KeyEvent=require("./internal/KeyEvent");var KEYDOWN="keydown";var KEYUP="keyup";function Keyboard(contextElement){this._keysDown={};this._DOMKeyDown=this._DOMKeyDown.bind(this);this._DOMKeyUp=this._DOMKeyUp.bind(this);this._context=contextElement||document;ac_addEventListener(this._context,KEYDOWN,this._DOMKeyDown,true);ac_addEventListener(this._context,KEYUP,this._DOMKeyUp,true);EventEmitterMicro.call(this)}var proto=Keyboard.prototype=create(EventEmitterMicro.prototype);proto.onDown=function(keyCode,callback){return this.on(KEYDOWN+":"+keyCode,callback)};proto.onceDown=function(keyCode,callback){return this.once(KEYDOWN+":"+keyCode,callback)};proto.offDown=function(keyCode,callback){return this.off(KEYDOWN+":"+keyCode,callback)};proto.onUp=function(keyCode,callback){return this.on(KEYUP+":"+keyCode,callback)};proto.onceUp=function(keyCode,callback){return this.once(KEYUP+":"+keyCode,callback)};proto.offUp=function(keyCode,callback){return this.off(KEYUP+":"+keyCode,callback)};proto.isDown=function(keyCode){keyCode+="";return this._keysDown[keyCode]||false};proto.isUp=function(keyCode){return!this.isDown(keyCode)};proto.destroy=function(){ac_removeEventListener(this._context,KEYDOWN,this._DOMKeyDown,true);ac_removeEventListener(this._context,KEYUP,this._DOMKeyUp,true);this._keysDown=null;this._context=null;EventEmitterMicro.prototype.destroy.call(this);return this};proto._DOMKeyDown=function(keyboardEvent){var evt=this._normalizeKeyboardEvent(keyboardEvent);var keyCode=evt.keyCode+="";this._trackKeyDown(keyCode);this.trigger(KEYDOWN+":"+keyCode,evt)};proto._DOMKeyUp=function(keyboardEvent){var evt=this._normalizeKeyboardEvent(keyboardEvent);var keyCode=evt.keyCode+="";this._trackKeyUp(keyCode);this.trigger(KEYUP+":"+keyCode,evt)};proto._normalizeKeyboardEvent=function(keyboardEvent){return new KeyEvent(keyboardEvent)};proto._trackKeyUp=function(keyCode){if(this._keysDown[keyCode]){this._keysDown[keyCode]=false}};proto._trackKeyDown=function(keyCode){if(!this._keysDown[keyCode]){this._keysDown[keyCode]=true}};module.exports=Keyboard},{"./internal/KeyEvent":121,"@marcom/ac-dom-events/utils/addEventListener":25,"@marcom/ac-dom-events/utils/removeEventListener":27,"@marcom/ac-event-emitter-micro":116,"@marcom/ac-object/create":124}],120:[function(require,module,exports){"use strict";var Keyboard=require("./Keyboard");module.exports=new Keyboard},{"./Keyboard":119}],121:[function(require,module,exports){"use strict";var blackList=["keyLocation"];function KeyEvent(originalEvt){this.originalEvent=originalEvt;var prop;for(prop in originalEvt){if(blackList.indexOf(prop)===-1&&typeof originalEvt[prop]!=="function"){this[prop]=originalEvt[prop]}}this.location=this.originalEvent.location!==undefined?this.originalEvent.location:this.originalEvent.keyLocation}KeyEvent.prototype={preventDefault:function(){if(typeof this.originalEvent.preventDefault!=="function"){this.originalEvent.returnValue=false;return}return this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}};module.exports=KeyEvent},{}],122:[function(require,module,exports){"use strict";module.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],123:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");var extend=require("./extend");var hasOwnProp=Object.prototype.hasOwnProperty;var deepClone=function(dest,source){var prop;for(prop in source){if(hasOwnProp.call(source,prop)){if(source[prop]===null){dest[prop]=null}else if(typeof source[prop]==="object"){dest[prop]=Array.isArray(source[prop])?[]:{};deepClone(dest[prop],source[prop])}else{dest[prop]=source[prop]}}}return dest};module.exports=function clone(object,deep){if(deep){return deepClone({},object)}return extend({},object)}},{"./extend":125,"@marcom/ac-polyfills/Array/isArray":357}],124:[function(require,module,exports){"use strict";var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error("Second argument not supported")}if(proto===null||typeof proto!=="object"){throw new TypeError("Object prototype may only be an Object.")}if(typeof Object.create==="function"){return Object.create(proto)}else{F.prototype=proto;return new F}}},{}],125:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.forEach");var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":360}],126:[function(require,module,exports){"use strict";module.exports={PageVisibilityManager:require("./ac-page-visibility/PageVisibilityManager")}},{"./ac-page-visibility/PageVisibilityManager":127}],127:[function(require,module,exports){"use strict";var create=require("@marcom/ac-object/create");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;function PageVisibilityManager(){if(typeof document.addEventListener==="undefined"){return}var visibilityChange;if(typeof document.hidden!=="undefined"){this._hidden="hidden";visibilityChange="visibilitychange"}else if(typeof document.mozHidden!=="undefined"){this._hidden="mozHidden";visibilityChange="mozvisibilitychange"}else if(typeof document.msHidden!=="undefined"){this._hidden="msHidden";visibilityChange="msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){this._hidden="webkitHidden";visibilityChange="webkitvisibilitychange"}if(typeof document[this._hidden]==="undefined"){this.isHidden=false}else{this.isHidden=document[this._hidden]}if(visibilityChange){document.addEventListener(visibilityChange,this._handleVisibilityChange.bind(this),false)}EventEmitterMicro.call(this)}var proto=PageVisibilityManager.prototype=create(EventEmitterMicro.prototype);proto.CHANGED="changed";proto._handleVisibilityChange=function(evt){this.isHidden=document[this._hidden];this.trigger(this.CHANGED,{isHidden:this.isHidden})};module.exports=new PageVisibilityManager},{"@marcom/ac-event-emitter-micro":116,"@marcom/ac-object/create":124}],128:[function(require,module,exports){"use strict";var BrowserData=require("./ac-browser/BrowserData");var webkitRegExp=/applewebkit/i;var IE=require("./ac-browser/IE");var browser=BrowserData.create();browser.isWebKit=function(userAgentString){var userAgent=userAgentString||window.navigator.userAgent;return userAgent?!!webkitRegExp.test(userAgent):false};browser.lowerCaseUserAgent=navigator.userAgent.toLowerCase();if(browser.name==="IE"){browser.IE={documentMode:IE.getDocumentMode()}}module.exports=browser},{"./ac-browser/BrowserData":129,"./ac-browser/IE":130}],129:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.filter");require("@marcom/ac-polyfills/Array/prototype.some");var _data=require("./data");function BrowserData(){}BrowserData.prototype={__getBrowserVersion:function(stringToSearch,identity){var version;if(!stringToSearch||!identity){return}var filteredData=_data.browser.filter(function(item){return item.identity===identity});filteredData.some(function(item){var versionSearchString=item.versionSearch||identity;var index=stringToSearch.indexOf(versionSearchString);if(index>-1){version=parseFloat(stringToSearch.substring(index+versionSearchString.length+1));return true}});return version},__getName:function(dataBrowser){return this.__getIdentityStringFromArray(dataBrowser)},__getIdentity:function(item){if(item.string){return this.__matchSubString(item)}else if(item.prop){return item.identity}},__getIdentityStringFromArray:function(dataArray){for(var i=0,l=dataArray.length,identity;i<l;i++){identity=this.__getIdentity(dataArray[i]);if(identity){return identity}}},__getOS:function(dataOS){return this.__getIdentityStringFromArray(dataOS)},__getOSVersion:function(stringToSearch,osIdentity){if(!stringToSearch||!osIdentity){return}var filteredData=_data.os.filter(function(item){return item.identity===osIdentity})[0];var versionSearchString=filteredData.versionSearch||osIdentity;var regex=new RegExp(versionSearchString+" ([\\d_\\.]+)","i");var version=stringToSearch.match(regex);if(version!==null){return version[1].replace(/_/g,".")}},__matchSubString:function(item){var subString=item.subString;if(subString){var matches=subString.test?!!subString.test(item.string):item.string.indexOf(subString)>-1;if(matches){return item.identity}}}};BrowserData.create=function(){var instance=new BrowserData;var out={};out.name=instance.__getName(_data.browser);out.version=instance.__getBrowserVersion(_data.versionString,out.name);out.os=instance.__getOS(_data.os);out.osVersion=instance.__getOSVersion(_data.versionString,out.os);return out};module.exports=BrowserData},{"./data":131,"@marcom/ac-polyfills/Array/prototype.filter":359,"@marcom/ac-polyfills/Array/prototype.some":364}],130:[function(require,module,exports){"use strict";module.exports={getDocumentMode:function(){var ie;if(document.documentMode){ie=parseInt(document.documentMode,10)}else{ie=5;if(document.compatMode){if(document.compatMode==="CSS1Compat"){ie=7}}}return ie}}},{}],131:[function(require,module,exports){"use strict";module.exports={browser:[{string:window.navigator.userAgent,subString:"Edge",identity:"Edge"},{string:window.navigator.userAgent,subString:/silk/i,identity:"Silk"},{string:window.navigator.userAgent,subString:/(android).*(version\/[0-9+].[0-9+])/i,identity:"Android"},{string:window.navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:window.navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:window.navigator.userAgent,subString:/mobile\/[^\s]*\ssafari\//i,identity:"Safari Mobile",versionSearch:"Version"},{string:window.navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:window.navigator.vendor,subString:"iCab",identity:"iCab"},{string:window.navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:window.navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:window.navigator.vendor,subString:"Camino",identity:"Camino"},{string:window.navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:window.navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:window.navigator.userAgent,subString:"Trident",identity:"IE",versionSearch:"rv"},{string:window.navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:window.navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:window.navigator.platform,subString:"Win",identity:"Windows",versionSearch:"Windows NT"},{string:window.navigator.platform,subString:"Mac",identity:"OS X"},{string:window.navigator.userAgent,subString:"iPhone",identity:"iOS",versionSearch:"iPhone OS"},{string:window.navigator.userAgent,subString:"iPad",identity:"iOS",versionSearch:"CPU OS"},{string:window.navigator.userAgent,subString:/android/i,identity:"Android"},{string:window.navigator.platform,subString:"Linux",identity:"Linux"}],versionString:window.navigator.userAgent||window.navigator.appVersion||undefined}},{}],132:[function(require,module,exports){"use strict";module.exports={PointerTracker:require("./ac-pointer-tracker/PointerTracker")}},{"./ac-pointer-tracker/PointerTracker":133}],133:[function(require,module,exports){"use strict";var ac_browser=require("@marcom/ac-browser");var ac_dom_events=require("@marcom/ac-dom-events");var ac_dom_styles=require("@marcom/ac-dom-styles");var create=require("@marcom/ac-object/create");var isLowThreshold=ac_browser.os==="Android"||ac_browser.name==="IE"&&ac_browser.version<=8;var touchAvailable=require("@marcom/ac-feature/touchAvailable")();var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;function PointerTracker(el,pointerEvents,options){this._el=el;options=options||{};this._lockVertical=options.lockVertical!==false;this._swipeThreshold=options.swipeThreshold||PointerTracker.DEFAULT_SWIPE_THRESHOLD;this._pointerEvents=pointerEvents||{};this._trackHover=options.trackHover;if(!this._trackHover){this._pointerEvents.down=this._pointerEvents.down||(touchAvailable?PointerTracker.TOUCH_EVENTS.down:PointerTracker.MOUSE_EVENTS.down);this._pointerEvents.up=this._pointerEvents.up||(touchAvailable?PointerTracker.TOUCH_EVENTS.up:PointerTracker.MOUSE_EVENTS.up)}else{this._pointerEvents.down=this._pointerEvents.down||PointerTracker.MOUSE_EVENTS.over;this._pointerEvents.up=this._pointerEvents.up||PointerTracker.MOUSE_EVENTS.out}this._pointerEvents.out=this._pointerEvents.out||(touchAvailable?PointerTracker.TOUCH_EVENTS.out:PointerTracker.MOUSE_EVENTS.out);this._pointerEvents.move=this._pointerEvents.move||(touchAvailable?PointerTracker.TOUCH_EVENTS.move:PointerTracker.MOUSE_EVENTS.move);this._onMouseDown=this._onMouseDown.bind(this);this._onMouseUp=this._onMouseUp.bind(this);this._onMouseOut=this._onMouseOut.bind(this);this._onMouseMove=this._onMouseMove.bind(this);EventEmitterMicro.call(this);ac_dom_events.addEventListener(this._el,this._pointerEvents.down,this._onMouseDown);this._setCursorStyle("grab")}PointerTracker.START="start";PointerTracker.END="end";PointerTracker.UPDATE="update";PointerTracker.SWIPE_RIGHT="swiperight";PointerTracker.SWIPE_LEFT="swipeleft";PointerTracker.DEFAULT_SWIPE_THRESHOLD=isLowThreshold?2:8;PointerTracker.TOUCH_EVENTS={down:"touchstart",up:"touchend",out:"mouseout",move:"touchmove"};PointerTracker.MOUSE_EVENTS={down:"mousedown",up:"mouseup",out:"mouseout",move:"mousemove",over:"mouseover"};var Super=EventEmitterMicro.prototype;var proto=PointerTracker.prototype=create(Super);proto.destroy=function(){if(this._isDragging){this._onMouseUp()}ac_dom_events.removeEventListener(this._el,this._pointerEvents.down,this._onMouseDown);this._setCursorStyle(null);this._el=null;this._pointerEvents=null;this._lockVertical=null;this._swipeThreshold=null;this._checkForTouchScrollY=null;this._isDragging=null;this._currentX=null;this._currentY=null;this._velocityX=null;this._velocityY=null;this._lastX=null;this._lastY=null;return Super.destroy.call(this)};proto._onMouseDown=function(evt){if(this._isDragging){return}this._isDragging=true;this._setCursorStyle("grabbing");ac_dom_events.removeEventListener(this._el,this._pointerEvents.down,this._onMouseDown);ac_dom_events.addEventListener(document.body,this._pointerEvents.up,this._onMouseUp);ac_dom_events.addEventListener(document,this._pointerEvents.out,this._onMouseOut);ac_dom_events.addEventListener(document.body,this._pointerEvents.move,this._onMouseMove);this._checkForTouchScrollY=this._lockVertical&&!!(evt.touches&&evt.touches[0]);if(this._checkForTouchScrollY){this._lastY=this._getTouchY(evt)}var values=this._storeAndGetValues(evt);this._velocityX=values.diffX=0;this._velocityY=values.diffY=0;this.trigger(PointerTracker.START,values)};proto._onMouseUp=function(evt){if(!this._isDragging){return}this._isDragging=false;this._setCursorStyle("grab");ac_dom_events.addEventListener(this._el,this._pointerEvents.down,this._onMouseDown);ac_dom_events.removeEventListener(document.body,this._pointerEvents.up,this._onMouseUp);ac_dom_events.removeEventListener(document,this._pointerEvents.out,this._onMouseOut);ac_dom_events.removeEventListener(document.body,this._pointerEvents.move,this._onMouseMove);var swipe;if(this._checkForTouchScrollY||this._trackHover){swipe=null}else if(this._velocityX>this._swipeThreshold){swipe=PointerTracker.SWIPE_LEFT}else if(this._velocityX*-1>this._swipeThreshold){swipe=PointerTracker.SWIPE_RIGHT}var values=this._storeAndGetValues(evt);values.swipe=swipe;this.trigger(PointerTracker.END,values);if(swipe&&!this._trackHover){this.trigger(swipe,values)}};proto._onMouseOut=function(evt){evt=evt?evt:window.event;var from=evt.relatedTarget||evt.toElement;if(!from||from.nodeName==="HTML"){this._onMouseUp(evt)}};proto._onMouseMove=function(evt){if(this._checkForTouchScrollY&&this._isVerticalTouchMove(evt)){this._onMouseUp(evt);return}ac_dom_events.preventDefault(evt);this.trigger(PointerTracker.UPDATE,this._storeAndGetValues(evt))};proto._storeAndGetValues=function(evt){if(evt===undefined){return{}}this._currentX=this._getPointerX(evt);this._currentY=this._getPointerY(evt);this._velocityX=this._lastX-this._currentX;this._velocityY=this._lastY-this._currentY;var values={x:this._currentX,y:this._currentY,lastX:this._lastX,lastY:this._lastY,diffX:this._velocityX,diffY:this._velocityY,interactionEvent:evt};this._lastX=this._currentX;this._lastY=this._currentY;return values};proto._getPointerX=function(evt){if(evt.pageX){return evt.pageX}else if(evt.touches&&evt.touches[0]){return evt.touches[0].pageX}else if(evt.clientX){return evt.clientX}return 0};proto._getPointerY=function(evt){if(evt.pageY){return evt.pageY}else if(evt.touches&&evt.touches[0]){return evt.touches[0].pageY}else if(evt.clientY){return evt.clientY}return 0};proto._getTouchX=function(evt){if(evt.touches&&evt.touches[0]){return evt.touches[0].pageX}return 0};proto._getTouchY=function(evt){if(evt.touches&&evt.touches[0]){return evt.touches[0].pageY}return 0};proto._isVerticalTouchMove=function(evt){var x=this._getTouchX(evt);var y=this._getTouchY(evt);var diffX=Math.abs(x-this._lastX);var diffY=Math.abs(y-this._lastY);this._checkForTouchScrollY=diffX<diffY;return this._checkForTouchScrollY};proto._setCursorStyle=function(cursor){ac_dom_styles.setStyle(this._el,{cursor:cursor})};module.exports=PointerTracker},{"@marcom/ac-browser":128,"@marcom/ac-dom-events":13,"@marcom/ac-dom-styles":112,"@marcom/ac-event-emitter-micro":116,"@marcom/ac-feature/touchAvailable":90,"@marcom/ac-object/create":124}],134:[function(require,module,exports){"use strict";var BrowserPrefixed=function(){var cssPrefix=["","-webkit-","-moz-","-o-","-ms-"];var transitionEndMap={"animation-delay":"transitionend","-o-animation-delay":"oTransitionEnd","-moz-animation-delay":"transitionend","-webkit-animation-delay":"webkitTransitionEnd","-ms-animation-delay":"transitionend"};var animationStartMap={"animation-delay":"animationstart","-o-animation-delay":"oanimationstart","-moz-animation-delay":"animationstart","-webkit-animation-delay":"webkitAnimationStart","-ms-animation-delay":"MSAnimationStart"};var animationIterationMap={"animation-delay":"animationiteration","-o-animation-delay":"oanimationiteration","-moz-animation-delay":"animationiteration","-webkit-animation-delay":"webkitAnimationIteration","-ms-animation-delay":"MSAnimationIteration"};var animationEndMap={"animation-delay":"animationend","-o-animation-delay":"oanimationend","-moz-animation-delay":"animationend","-webkit-animation-delay":"webkitAnimationEnd","-ms-animation-delay":"MSAnimationEnd"};var el=document.createElement("_");var cssPrefixes=["","-webkit-","-moz-","-o-","-ms-"];function getStyleProp(propSuffix){for(var i=0;i<cssPrefixes.length;i++){var propName=cssPrefix[i]+propSuffix;if(el.style[propName]!==undefined){return propName}}return undefined}var cssFilterPrefix=["-webkit-","","-moz-","-o-","-ms-"];function getFilterPrefix(propSuffix){for(var i=0;i<cssFilterPrefix.length;i++){var propName=cssFilterPrefix[i]+propSuffix;if(el.style[propName]!==undefined){return propName}}return undefined}return{filter:getFilterPrefix("filter"),transform:getStyleProp("transform"),transformOrigin:getStyleProp("transform-origin"),transition:getStyleProp("transition"),transitionDelay:getStyleProp("transition-delay"),transitionDuration:getStyleProp("transition-duration"),transitionProperty:getStyleProp("transition-property"),transitionTimingFunction:getStyleProp("transition-timing-function"),transitionEnd:transitionEndMap[getStyleProp("animation-delay")],animation:getStyleProp("animation"),animationDelay:getStyleProp("animation-delay"),animationDirection:getStyleProp("animation-direction"),animationDuration:getStyleProp("animation-duration"),animationFillMode:getStyleProp("animation-fill-mode"),animationIterationCount:getStyleProp("animation-iteration-count"),animationName:getStyleProp("animation-name"),animationTimingFunction:getStyleProp("animation-timing-function"),animationPlayState:getStyleProp("animation-play-state"),animationStart:animationStartMap[getStyleProp("animation-delay")],animationIteration:animationIterationMap[getStyleProp("animation-delay")],animationEnd:animationEndMap[getStyleProp("animation-delay")]}}();module.exports=BrowserPrefixed},{}],135:[function(require,module,exports){var Clock=require("./ac-clock/Clock"),ThrottledClock=require("./ac-clock/ThrottledClock"),sharedClockInstance=require("./ac-clock/sharedClockInstance");sharedClockInstance.Clock=Clock;sharedClockInstance.ThrottledClock=ThrottledClock;module.exports=sharedClockInstance},{"./ac-clock/Clock":136,"./ac-clock/ThrottledClock":137,"./ac-clock/sharedClockInstance":138}],136:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Function/prototype.bind");require("@marcom/ac-polyfills/requestAnimationFrame");var proto;var EventEmitter=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var pageLoadTime=(new Date).getTime();function Clock(){EventEmitter.call(this);this.lastFrameTime=null;this._animationFrame=null;this._active=false;this._startTime=null;this._boundOnAnimationFrame=this._onAnimationFrame.bind(this);this._getTime=Date.now||function(){return(new Date).getTime()}}proto=Clock.prototype=new EventEmitter(null);proto.start=function(){if(this._active){return}this._tick()};proto.stop=function(){if(this._active){window.cancelAnimationFrame(this._animationFrame)}this._animationFrame=null;this.lastFrameTime=null;this._active=false};proto.destroy=function(){this.stop();this.off();var i;for(i in this){if(this.hasOwnProperty(i)){this[i]=null}}};proto.isRunning=function(){return this._active};proto._tick=function(){if(!this._active){this._active=true}this._animationFrame=window.requestAnimationFrame(this._boundOnAnimationFrame)};proto._onAnimationFrame=function(time){if(this.lastFrameTime===null){this.lastFrameTime=time}var delta=time-this.lastFrameTime;var fps=0;if(delta>=1e3){delta=0}if(delta!==0){fps=1e3/delta}if(this._firstFrame===true){delta=0;this._firstFrame=false}if(fps===0){this._firstFrame=true}else{var data={time:time,delta:delta,fps:fps,naturalFps:fps,timeNow:this._getTime()};this.trigger("update",data);this.trigger("draw",data)}this._animationFrame=null;this.lastFrameTime=time;if(this._active!==false){this._tick()}else{this.lastFrameTime=null}};module.exports=Clock},{"@marcom/ac-event-emitter-micro":169,"@marcom/ac-polyfills/Function/prototype.bind":367,"@marcom/ac-polyfills/requestAnimationFrame":372}],137:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/requestAnimationFrame");var proto;var sharedClockInstance=require("./sharedClockInstance"),EventEmitter=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;function ThrottledClock(fps,options){if(fps===null){return}EventEmitter.call(this);options=options||{};this._fps=fps||null;this._clock=options.clock||sharedClockInstance;this._lastThrottledTime=null;this._clockEvent=null;this._boundOnClockDraw=this._onClockDraw.bind(this);this._boundOnClockUpdate=this._onClockUpdate.bind(this);this._clock.on("update",this._boundOnClockUpdate)}proto=ThrottledClock.prototype=new EventEmitter(null);proto.setFps=function(fps){this._fps=fps;return this};proto.getFps=function(){return this._fps};proto.start=function(){this._clock.start();return this};proto.stop=function(){this._clock.stop();return this};proto.isRunning=function(){return this._clock.isRunning()};proto.destroy=function(){this._clock.off("update",this._boundOnClockUpdate);this._clock.destroy.call(this)};proto._onClockUpdate=function(e){if(this._lastThrottledTime===null){this._lastThrottledTime=this._clock.lastFrameTime}var delta=e.time-this._lastThrottledTime;if(!this._fps){throw new TypeError("FPS is not defined.")}if(Math.ceil(1e3/delta)>=this._fps+2){return}this._clockEvent=e;this._clockEvent.delta=delta;this._clockEvent.fps=1e3/delta;this._lastThrottledTime=this._clockEvent.time;this._clock.once("draw",this._boundOnClockDraw);this.trigger("update",this._clockEvent)};proto._onClockDraw=function(){this.trigger("draw",this._clockEvent)};module.exports=ThrottledClock},{"./sharedClockInstance":138,"@marcom/ac-event-emitter-micro":169,"@marcom/ac-polyfills/requestAnimationFrame":372}],138:[function(require,module,exports){"use strict";var Clock=require("./Clock");module.exports=new Clock},{"./Clock":136}],139:[function(require,module,exports){"use strict";module.exports={Clip:require("./ac-clip/Clip")}},{"./ac-clip/Clip":140}],140:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");var create=require("@marcom/ac-object/create");var createPredefined=require("@marcom/ac-easing").createPredefined;var Clock=require("@marcom/ac-clock");var Ease=require("@marcom/ac-easing").Ease;var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var DEFAULT_EASE="ease";function Clip(target,duration,propsTo,options){options=options||{};this._options=options;this._isYoyo=options.yoyo;this._direction=1;this._timeScale=1;this._loop=options.loop||0;this._loopCount=0;this._target=target;this.duration(duration);this._delay=(options.delay||0)*1e3;this._remainingDelay=this._delay;this._progress=0;this._clock=options.clock||Clock;this._playing=false;this._getTime=Date.now||function(){return(new Date).getTime()};this._propsTo=propsTo||{};this._propsFrom=options.propsFrom||{};this._onStart=options.onStart||null;this._onUpdate=options.onUpdate||null;this._onDraw=options.onDraw||null;this._onComplete=options.onComplete||null;var ease=options.ease||DEFAULT_EASE;this._ease=typeof ease==="function"?new Ease(ease):createPredefined(ease);this._start=this._start.bind(this);this._update=this._update.bind(this);this._draw=this._draw.bind(this);this._isPrepared=false;Clip._add(this);EventEmitterMicro.call(this)}var proto=Clip.prototype=create(EventEmitterMicro.prototype);Clip.COMPLETE="complete";Clip.PAUSE="pause";Clip.PLAY="play";proto.play=function(){if(!this._playing){this._playing=true;if(this._delay===0||this._remainingDelay===0){this._start()}else{if(!this._isPrepared){this._setDiff();this._updateProps()}this._startTimeout=setTimeout(this._start,this._remainingDelay/this._timeScale);this._delayStart=this._getTime()}}return this};proto.pause=function(){if(this._playing){if(this._startTimeout){this._remainingDelay=this._getTime()-this._delayStart;clearTimeout(this._startTimeout)}this._stop();this.trigger(Clip.PAUSE,this)}return this};proto.destroy=function(){this.pause();this._options=null;this._target=null;this._storeTarget=null;this._ease=null;this._clock=null;this._propsTo=null;this._propsFrom=null;this._storePropsTo=null;this._storePropsFrom=null;this._propsDiff=null;this._propsEase=null;this._onStart=null;this._onUpdate=null;this._onDraw=null;this._onComplete=null;Clip._remove(this);EventEmitterMicro.prototype.destroy.call(this);return this};proto.reset=function(){if(!this._isPrepared){return}this._stop();this._resetLoop(this._target,this._storeTarget);this._direction=1;this._loop=this._options.loop||0;this._loopCount=0;this._propsFrom=this._storePropsFrom;this._propsTo=this._storePropsTo;this._progress=0;this._setStartTime();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}return this};proto.playing=function(){return this._playing};proto.target=function(){return this._target};proto.duration=function(duration){if(duration!==undefined){this._duration=duration;this._durationMs=duration*1e3/this._timeScale;if(this._playing){this._setStartTime()}}return this._duration};proto.timeScale=function(timeScale){if(timeScale!==undefined){this._timeScale=timeScale;this.duration(this._duration)}return this._timeScale};proto.currentTime=function(time){if(time!==undefined){return this.progress(time/this._duration)*this._duration}return this.progress()*this._duration};proto.progress=function(progress){if(progress!==undefined){this._progress=Math.min(1,Math.max(0,progress));this._setStartTime();if(!this._isPrepared){this._setDiff()}if(this._playing&&progress===1){this._completeProps();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}this._complete()}else{this._updateProps();if(this._onUpdate){this._onUpdate.call(this,this)}if(this._onDraw){this._onDraw.call(this,this)}}}return this._progress};proto._resetLoop=function(target,stored){var prop;for(prop in stored){if(stored.hasOwnProperty(prop)){if(stored[prop]!==null){if(typeof stored[prop]==="object"){this._resetLoop(target[prop],stored[prop])}else{target[prop]=stored[prop]}}}}};proto._cloneObjects=function(){var cloneTarget={};var clonePropsTo={};var clonePropsFrom={};this._cloneObjectsLoop(this._target,this._propsTo,this._propsFrom,cloneTarget,clonePropsTo,clonePropsFrom);return{target:cloneTarget,propsTo:clonePropsTo,propsFrom:clonePropsFrom}};proto._cloneObjectsLoop=function(target,to,from,cloneTarget,clonePropsTo,clonePropsFrom){var type;var prop;for(prop in from){if(from.hasOwnProperty(prop)&&to[prop]===undefined&&target[prop]!==undefined){cloneTarget[prop]=target[prop];clonePropsTo[prop]=target[prop];clonePropsFrom[prop]=from[prop]}}for(prop in to){if(target.hasOwnProperty(prop)){type=typeof target[prop];if(target[prop]!==null&&type==="object"){if(Array.isArray(target[prop])){cloneTarget[prop]=[];clonePropsTo[prop]=[];clonePropsFrom[prop]=[]}else{cloneTarget[prop]={};clonePropsTo[prop]={};clonePropsFrom[prop]={}}this._cloneObjectsLoop(target[prop],to[prop]||{},from[prop]||{},cloneTarget[prop],clonePropsTo[prop],clonePropsFrom[prop])}else if(to[prop]!==null&&type==="number"){cloneTarget[prop]=target[prop];clonePropsTo[prop]=to[prop];if(from&&from[prop]!==undefined){clonePropsFrom[prop]=from[prop]}}}}};proto._prepareProperties=function(){if(!this._isPrepared){var clones=this._cloneObjects();this._storeTarget=clones.target;this._propsTo=clones.propsTo;this._storePropsTo=this._propsTo;this._propsFrom=clones.propsFrom;this._storePropsFrom=this._propsFrom;this._isPrepared=true}};proto._setStartTime=function(){this._startTime=this._getTime()-this.progress()*this._durationMs};proto._setDiff=function(){if(!this._isPrepared){this._prepareProperties()}this._propsDiff={};this._setDiffLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff)};proto._setDiffLoop=function(to,from,target,diff){var type;var prop;for(prop in to){if(to.hasOwnProperty(prop)){type=typeof to[prop];if(to[prop]!==null&&type==="object"){from[prop]=from[prop]||{};diff[prop]=diff[prop]||{};this._setDiffLoop(to[prop],from[prop],target[prop],diff[prop])}else if(type==="number"&&target[prop]!==undefined){if(from[prop]!==undefined){target[prop]=from[prop]}else{from[prop]=target[prop]}diff[prop]=to[prop]-target[prop]}else{to[prop]=null;from[prop]=null}}}};proto._start=function(){this._startTimeout=null;this._remainingDelay=0;this._setStartTime();this._clock.on("update",this._update);this._clock.on("draw",this._draw);if(!this._clock.isRunning()){this._clock.start()}this._setDiff();this._playing=true;this._running=true;if(this._onStart){this._onStart.call(this,this)}this.trigger(Clip.PLAY,this)};proto._stop=function(){this._playing=false;this._running=false;this._clock.off("update",this._update);this._clock.off("draw",this._draw)};proto._updateProps=function(){var eased;if(this._direction===1){eased=this._ease.getValue(this._progress)}else{eased=1-this._ease.getValue(1-this._progress)}this._updatePropsLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff,eased)};proto._updatePropsLoop=function(to,from,target,diff,eased){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=="number"){this._updatePropsLoop(to[prop],from[prop],target[prop],diff[prop],eased)}else{target[prop]=from[prop]+diff[prop]*eased}}}};proto._completeProps=function(){this._completePropsLoop(this._propsTo,this._target)};proto._completePropsLoop=function(to,target){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=="number"){this._completePropsLoop(to[prop],target[prop])}else{target[prop]=to[prop]}}}};proto._complete=function(){if(this._isYoyo&&(this._loop>0&&this._loopCount<=this._loop||this._loop===0&&this._loopCount===0)){this._propsFrom=this._direction===1?this._storePropsTo:this._storePropsFrom;this._propsTo=this._direction===1?this._storePropsFrom:this._storePropsTo;this._direction*=-1;if(this._direction===-1){++this._loopCount}this.progress(0);this._start()}else if(this._loopCount<this._loop){++this._loopCount;this.progress(0);this._start()}else{this.trigger(Clip.COMPLETE,this);if(this._onComplete){this._onComplete.call(this,this)}if(this._options&&this._options.destroyOnComplete){this.destroy()}}};proto._update=function(evt){if(this._running){this._progress=(evt.timeNow-this._startTime)/this._durationMs;if(this._progress>=1){this._progress=1;this._running=false;this._completeProps()}else{this._updateProps()}if(this._onUpdate){this._onUpdate.call(this,this)}}};proto._draw=function(evt){if(this._onDraw){this._onDraw.call(this,this)}if(!this._running){this._stop();if(this._progress===1){this._complete()}}};Clip._instantiate=function(){this._clips=[];return this};Clip._add=function(clip){this._clips.push(clip)};Clip._remove=function(clip){var index=this._clips.indexOf(clip);if(index>-1){this._clips.splice(index,1)}};Clip.getAll=function(target){if(target!==undefined){var clips=[];var i=this._clips.length;while(i--){if(this._clips[i].target()===target){clips.push(this._clips[i])}}return clips}return Array.prototype.slice.call(this._clips)};Clip.destroyAll=function(target){var clips=this.getAll(target);if(this._clips.length===clips.length){this._clips=[]}var i=clips.length;while(i--){clips[i].destroy()}return clips};Clip.to=function(target,duration,propsTo,options){options=options||{};if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new Clip(target,duration,propsTo,options).play()};Clip.from=function(target,duration,propsFrom,options){options=options||{};options.propsFrom=propsFrom;if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new Clip(target,duration,options.propsTo,options).play()};module.exports=Clip._instantiate()},{"@marcom/ac-clock":135,"@marcom/ac-easing":161,"@marcom/ac-event-emitter-micro":169,"@marcom/ac-object/create":124,"@marcom/ac-polyfills/Array/isArray":357}],141:[function(require,module,exports){"use strict";var Color=require("./ac-color/Color");Color.decimalToHex=require("./ac-color/static/decimalToHex");Color.hexToDecimal=require("./ac-color/static/hexToDecimal");Color.hexToRgb=require("./ac-color/static/hexToRgb");Color.isColor=require("./ac-color/static/isColor");Color.isHex=require("./ac-color/static/isHex");Color.isRgb=require("./ac-color/static/isRgb");Color.isRgba=require("./ac-color/static/isRgba");Color.mixColors=require("./ac-color/static/mixColors");Color.rgbaToArray=require("./ac-color/static/rgbaToArray");Color.rgbToArray=require("./ac-color/static/rgbToArray");Color.rgbToDecimal=require("./ac-color/static/rgbToDecimal");Color.rgbToHex=require("./ac-color/static/rgbToHex");Color.rgbToHsl=require("./ac-color/static/rgbToHsl");Color.rgbToHsv=require("./ac-color/static/rgbToHsv");Color.rgbaToObject=require("./ac-color/static/rgbaToObject");Color.rgbToObject=require("./ac-color/static/rgbToObject");Color.shortToLongHex=require("./ac-color/static/shortToLongHex");module.exports={Color:Color}},{"./ac-color/Color":142,"./ac-color/static/decimalToHex":144,"./ac-color/static/hexToDecimal":145,"./ac-color/static/hexToRgb":146,"./ac-color/static/isColor":147,"./ac-color/static/isHex":148,"./ac-color/static/isRgb":149,"./ac-color/static/isRgba":150,"./ac-color/static/mixColors":151,"./ac-color/static/rgbToArray":152,"./ac-color/static/rgbToDecimal":153,"./ac-color/static/rgbToHex":154,"./ac-color/static/rgbToHsl":155,"./ac-color/static/rgbToHsv":156,"./ac-color/static/rgbToObject":157,"./ac-color/static/rgbaToArray":158,"./ac-color/static/rgbaToObject":159,"./ac-color/static/shortToLongHex":160}],142:[function(require,module,exports){"use strict";var cssColorNames=require("./helpers/cssColorNames");var hexToRgb=require("./static/hexToRgb");var isColor=require("./static/isColor");var isHex=require("./static/isHex");var isRgba=require("./static/isRgba");var mixColors=require("./static/mixColors");var rgbaToArray=require("./static/rgbaToArray");var rgbToArray=require("./static/rgbToArray");var rgbToDecimal=require("./static/rgbToDecimal");var rgbToHex=require("./static/rgbToHex");var rgbaToObject=require("./static/rgbaToObject");var rgbToObject=require("./static/rgbToObject");var shortToLongHex=require("./static/shortToLongHex");function Color(color){if(!isColor(color)&&!cssColorNames.nameToRgbObject[color]){throw new Error(color+" is not a supported color.")}this._setColor(color)}var proto=Color.prototype;proto._setColor=function(color){this._color={};if(isHex(color)){this._color.hex=shortToLongHex(color);this._color.rgb={color:hexToRgb(color)}}else if(isRgba(color)){this._color.rgba={color:color};var rgbaObject=this.rgbaObject();this._color.rgb={color:"rgb("+rgbaObject.r+", "+rgbaObject.g+", "+rgbaObject.b+")"}}else if(cssColorNames.nameToRgbObject[color]){var rgbObject=cssColorNames.nameToRgbObject[color];this._color.rgb={object:rgbObject,color:"rgb("+rgbObject.r+", "+rgbObject.g+", "+rgbObject.b+")"}}else{this._color.rgb={color:color}}};proto.rgb=function(){return this._color.rgb.color};proto.rgba=function(){if(this._color.rgba===undefined){var rgbObject=this.rgbObject();this._color.rgba={color:"rgba("+rgbObject.r+", "+rgbObject.g+", "+rgbObject.b+", 1)"}}return this._color.rgba.color};proto.hex=function(){if(this._color.hex===undefined){this._color.hex=rgbToHex.apply(this,this.rgbArray())}return this._color.hex};proto.decimal=function(){if(this._color.decimal===undefined){this._color.decimal=rgbToDecimal(this.rgb())}return this._color.decimal};proto.cssName=function(){return cssColorNames.rgbToName[this.rgb()]||null};proto.rgbArray=function(){if(this._color.rgb.array===undefined){this._color.rgb.array=rgbToArray(this.rgb())}return this._color.rgb.array};proto.rgbaArray=function(){if(this._color.rgba===undefined){this.rgba()}if(this._color.rgba.array===undefined){this._color.rgba.array=rgbaToArray(this.rgba())}return this._color.rgba.array};proto.rgbObject=function(){if(this._color.rgb.object===undefined){this._color.rgb.object=rgbToObject(this.rgb())}return this._color.rgb.object};proto.rgbaObject=function(){if(this._color.rgba===undefined){this.rgba()}if(this._color.rgba.object===undefined){this._color.rgba.object=rgbaToObject(this.rgba())}return this._color.rgba.object};proto.getRed=function(){return this.rgbObject().r};proto.getGreen=function(){return this.rgbObject().g};proto.getBlue=function(){return this.rgbObject().b};proto.getAlpha=function(){if(this._color.rgba===undefined){return 1}return this.rgbaObject().a};proto.setRed=function(red){if(red!==this.getRed()){this._setColor("rgba("+red+", "+this.getGreen()+", "+this.getBlue()+", "+this.getAlpha()+")")}return this.rgbObject().r};proto.setGreen=function(green){if(green!==this.getGreen()){this._setColor("rgba("+this.getRed()+", "+green+", "+this.getBlue()+", "+this.getAlpha()+")")}return this.rgbObject().g};proto.setBlue=function(blue){if(blue!==this.getBlue()){this._setColor("rgba("+this.getRed()+", "+this.getGreen()+", "+blue+", "+this.getAlpha()+")")}return this.rgbObject().b};proto.setAlpha=function(alpha){if(alpha!==this.getAlpha()){this._setColor("rgba("+this.getRed()+", "+this.getGreen()+", "+this.getBlue()+", "+alpha+")")}return this.rgbaObject().a};proto.mix=function(color,percent){var rgbObject=rgbToObject(mixColors(this.rgb(),color,percent));this._setColor("rgba("+rgbObject.r+", "+rgbObject.g+", "+rgbObject.b+", "+this.getAlpha()+")");return this.rgb()};proto.clone=function(){return new Color(this.rgb())};module.exports=Color},{"./helpers/cssColorNames":143,"./static/hexToRgb":146,"./static/isColor":147,"./static/isHex":148,"./static/isRgba":150,"./static/mixColors":151,"./static/rgbToArray":152,"./static/rgbToDecimal":153,"./static/rgbToHex":154,"./static/rgbToObject":157,"./static/rgbaToArray":158,"./static/rgbaToObject":159,"./static/shortToLongHex":160}],143:[function(require,module,exports){"use strict";var rgbToName={"rgb(240, 248, 255)":"aliceblue","rgb(250, 235, 215)":"antiquewhite","rgb(0, 0, 0)":"black","rgb(0, 0, 255)":"blue","rgb(0, 255, 255)":"cyan","rgb(0, 0, 139)":"darkblue","rgb(0, 139, 139)":"darkcyan","rgb(0, 100, 0)":"darkgreen","rgb(0, 206, 209)":"darkturquoise","rgb(0, 191, 255)":"deepskyblue","rgb(0, 128, 0)":"green","rgb(0, 255, 0)":"lime","rgb(0, 0, 205)":"mediumblue","rgb(0, 250, 154)":"mediumspringgreen","rgb(0, 0, 128)":"navy","rgb(0, 255, 127)":"springgreen","rgb(0, 128, 128)":"teal","rgb(25, 25, 112)":"midnightblue","rgb(30, 144, 255)":"dodgerblue","rgb(32, 178, 170)":"lightseagreen","rgb(34, 139, 34)":"forestgreen","rgb(46, 139, 87)":"seagreen","rgb(47, 79, 79)":"darkslategray","rgb(50, 205, 50)":"limegreen","rgb(60, 179, 113)":"mediumseagreen","rgb(64, 224, 208)":"turquoise","rgb(65, 105, 225)":"royalblue","rgb(70, 130, 180)":"steelblue","rgb(72, 61, 139)":"darkslateblue","rgb(72, 209, 204)":"mediumturquoise","rgb(75, 0, 130)":"indigo","rgb(85, 107, 47)":"darkolivegreen","rgb(95, 158, 160)":"cadetblue","rgb(100, 149, 237)":"cornflowerblue","rgb(102, 205, 170)":"mediumaquamarine","rgb(105, 105, 105)":"dimgray","rgb(106, 90, 205)":"slateblue","rgb(107, 142, 35)":"olivedrab","rgb(112, 128, 144)":"slategray","rgb(119, 136, 153)":"lightslategray","rgb(123, 104, 238)":"mediumslateblue","rgb(124, 252, 0)":"lawngreen","rgb(127, 255, 212)":"aquamarine","rgb(127, 255, 0)":"chartreuse","rgb(128, 128, 128)":"gray","rgb(128, 0, 0)":"maroon","rgb(128, 128, 0)":"olive","rgb(128, 0, 128)":"purple","rgb(135, 206, 250)":"lightskyblue","rgb(135, 206, 235)":"skyblue","rgb(138, 43, 226)":"blueviolet","rgb(139, 0, 139)":"darkmagenta","rgb(139, 0, 0)":"darkred","rgb(139, 69, 19)":"saddlebrown","rgb(143, 188, 143)":"darkseagreen","rgb(144, 238, 144)":"lightgreen","rgb(147, 112, 219)":"mediumpurple","rgb(148, 0, 211)":"darkviolet","rgb(152, 251, 152)":"palegreen","rgb(153, 50, 204)":"darkorchid","rgb(154, 205, 50)":"yellowgreen","rgb(160, 82, 45)":"sienna","rgb(165, 42, 42)":"brown","rgb(169, 169, 169)":"darkgray","rgb(173, 255, 47)":"greenyellow","rgb(173, 216, 230)":"lightblue","rgb(175, 238, 238)":"paleturquoise","rgb(176, 196, 222)":"lightsteelblue","rgb(176, 224, 230)":"powderblue","rgb(178, 34, 34)":"firebrick","rgb(184, 134, 11)":"darkgoldenrod","rgb(186, 85, 211)":"mediumorchid","rgb(188, 143, 143)":"rosybrown","rgb(189, 183, 107)":"darkkhaki","rgb(192, 192, 192)":"silver","rgb(199, 21, 133)":"mediumvioletred","rgb(205, 92, 92)":"indianred","rgb(205, 133, 63)":"peru","rgb(210, 105, 30)":"chocolate","rgb(210, 180, 140)":"tan","rgb(211, 211, 211)":"lightgray","rgb(216, 191, 216)":"thistle","rgb(218, 165, 32)":"goldenrod","rgb(218, 112, 214)":"orchid","rgb(219, 112, 147)":"palevioletred","rgb(220, 20, 60)":"crimson","rgb(220, 220, 220)":"gainsboro","rgb(221, 160, 221)":"plum","rgb(222, 184, 135)":"burlywood","rgb(224, 255, 255)":"lightcyan","rgb(230, 230, 250)":"lavender","rgb(233, 150, 122)":"darksalmon","rgb(238, 232, 170)":"palegoldenrod","rgb(238, 130, 238)":"violet","rgb(240, 255, 255)":"azure","rgb(240, 255, 240)":"honeydew","rgb(240, 230, 140)":"khaki","rgb(240, 128, 128)":"lightcoral","rgb(244, 164, 96)":"sandybrown","rgb(245, 245, 220)":"beige","rgb(245, 255, 250)":"mintcream","rgb(245, 222, 179)":"wheat","rgb(245, 245, 245)":"whitesmoke","rgb(248, 248, 255)":"ghostwhite","rgb(250, 250, 210)":"lightgoldenrodyellow","rgb(250, 240, 230)":"linen","rgb(250, 128, 114)":"salmon","rgb(253, 245, 230)":"oldlace","rgb(255, 228, 196)":"bisque","rgb(255, 235, 205)":"blanchedalmond","rgb(255, 127, 80)":"coral","rgb(255, 248, 220)":"cornsilk","rgb(255, 140, 0)":"darkorange","rgb(255, 20, 147)":"deeppink","rgb(255, 250, 240)":"floralwhite","rgb(255, 215, 0)":"gold","rgb(255, 105, 180)":"hotpink","rgb(255, 255, 240)":"ivory","rgb(255, 240, 245)":"lavenderblush","rgb(255, 250, 205)":"lemonchiffon","rgb(255, 182, 193)":"lightpink","rgb(255, 160, 122)":"lightsalmon","rgb(255, 255, 224)":"lightyellow","rgb(255, 0, 255)":"magenta","rgb(255, 228, 225)":"mistyrose","rgb(255, 228, 181)":"moccasin","rgb(255, 222, 173)":"navajowhite","rgb(255, 165, 0)":"orange","rgb(255, 69, 0)":"orangered","rgb(255, 239, 213)":"papayawhip","rgb(255, 218, 185)":"peachpuff","rgb(255, 192, 203)":"pink","rgb(255, 0, 0)":"red","rgb(255, 245, 238)":"seashell","rgb(255, 250, 250)":"snow","rgb(255, 99, 71)":"tomato","rgb(255, 255, 255)":"white","rgb(255, 255, 0)":"yellow","rgb(102, 51, 153)":"rebeccapurple"};var nameToRgbObject={aqua:{r:0,g:255,b:255},aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},black:{r:0,g:0,b:0},blue:{r:0,g:0,b:255},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgreen:{r:0,g:100,b:0},darkturquoise:{r:0,g:206,b:209},deepskyblue:{r:0,g:191,b:255},green:{r:0,g:128,b:0},lime:{r:0,g:255,b:0},mediumblue:{r:0,g:0,b:205},mediumspringgreen:{r:0,g:250,b:154},navy:{r:0,g:0,b:128},springgreen:{r:0,g:255,b:127},teal:{r:0,g:128,b:128},midnightblue:{r:25,g:25,b:112},dodgerblue:{r:30,g:144,b:255},lightseagreen:{r:32,g:178,b:170},forestgreen:{r:34,g:139,b:34},seagreen:{r:46,g:139,b:87},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},limegreen:{r:50,g:205,b:50},mediumseagreen:{r:60,g:179,b:113},turquoise:{r:64,g:224,b:208},royalblue:{r:65,g:105,b:225},steelblue:{r:70,g:130,b:180},darkslateblue:{r:72,g:61,b:139},mediumturquoise:{r:72,g:209,b:204},indigo:{r:75,g:0,b:130},darkolivegreen:{r:85,g:107,b:47},cadetblue:{r:95,g:158,b:160},cornflowerblue:{r:100,g:149,b:237},mediumaquamarine:{r:102,g:205,b:170},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},slateblue:{r:106,g:90,b:205},olivedrab:{r:107,g:142,b:35},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},mediumslateblue:{r:123,g:104,b:238},lawngreen:{r:124,g:252,b:0},aquamarine:{r:127,g:255,b:212},chartreuse:{r:127,g:255,b:0},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},maroon:{r:128,g:0,b:0},olive:{r:128,g:128,b:0},purple:{r:128,g:0,b:128},lightskyblue:{r:135,g:206,b:250},skyblue:{r:135,g:206,b:235},blueviolet:{r:138,g:43,b:226},darkmagenta:{r:139,g:0,b:139},darkred:{r:139,g:0,b:0},saddlebrown:{r:139,g:69,b:19},darkseagreen:{r:143,g:188,b:143},lightgreen:{r:144,g:238,b:144},mediumpurple:{r:147,g:112,b:219},darkviolet:{r:148,g:0,b:211},palegreen:{r:152,g:251,b:152},darkorchid:{r:153,g:50,b:204},yellowgreen:{r:154,g:205,b:50},sienna:{r:160,g:82,b:45},brown:{r:165,g:42,b:42},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},greenyellow:{r:173,g:255,b:47},lightblue:{r:173,g:216,b:230},paleturquoise:{r:175,g:238,b:238},lightsteelblue:{r:176,g:196,b:222},powderblue:{r:176,g:224,b:230},firebrick:{r:178,g:34,b:34},darkgoldenrod:{r:184,g:134,b:11},mediumorchid:{r:186,g:85,b:211},rosybrown:{r:188,g:143,b:143},darkkhaki:{r:189,g:183,b:107},silver:{r:192,g:192,b:192},mediumvioletred:{r:199,g:21,b:133},indianred:{r:205,g:92,b:92},peru:{r:205,g:133,b:63},chocolate:{r:210,g:105,b:30},tan:{r:210,g:180,b:140},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},thistle:{r:216,g:191,b:216},goldenrod:{r:218,g:165,b:32},orchid:{r:218,g:112,b:214},palevioletred:{r:219,g:112,b:147},crimson:{r:220,g:20,b:60},gainsboro:{r:220,g:220,b:220},plum:{r:221,g:160,b:221},burlywood:{r:222,g:184,b:135},lightcyan:{r:224,g:255,b:255},lavender:{r:230,g:230,b:250},darksalmon:{r:233,g:150,b:122},palegoldenrod:{r:238,g:232,b:170},violet:{r:238,g:130,b:238},azure:{r:240,g:255,b:255},honeydew:{r:240,g:255,b:240},khaki:{r:240,g:230,b:140},lightcoral:{r:240,g:128,b:128},sandybrown:{r:244,g:164,b:96},beige:{r:245,g:245,b:220},mintcream:{r:245,g:255,b:250},wheat:{r:245,g:222,b:179},whitesmoke:{r:245,g:245,b:245},ghostwhite:{r:248,g:248,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},linen:{r:250,g:240,b:230},salmon:{r:250,g:128,b:114},oldlace:{r:253,g:245,b:230},bisque:{r:255,g:228,b:196},blanchedalmond:{r:255,g:235,b:205},coral:{r:255,g:127,b:80},cornsilk:{r:255,g:248,b:220},darkorange:{r:255,g:140,b:0},deeppink:{r:255,g:20,b:147},floralwhite:{r:255,g:250,b:240},fuchsia:{r:255,g:0,b:255},gold:{r:255,g:215,b:0},hotpink:{r:255,g:105,b:180},ivory:{r:255,g:255,b:240},lavenderblush:{r:255,g:240,b:245},lemonchiffon:{r:255,g:250,b:205},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightyellow:{r:255,g:255,b:224},magenta:{r:255,g:0,b:255},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},pink:{r:255,g:192,b:203},red:{r:255,g:0,b:0},seashell:{r:255,g:245,b:238},snow:{r:255,g:250,b:250},tomato:{r:255,g:99,b:71},white:{r:255,g:255,b:255},yellow:{r:255,g:255,b:0},rebeccapurple:{r:102,g:51,b:153}};module.exports={rgbToName:rgbToName,nameToRgbObject:nameToRgbObject}},{}],144:[function(require,module,exports){"use strict";module.exports=function decimalToHex(decimal){return"#"+decimal.toString(16)}},{}],145:[function(require,module,exports){"use strict";module.exports=function hexToDecimal(hex){return parseInt(hex.substr(1),16)}},{}],146:[function(require,module,exports){"use strict";var shortToLongHex=require("./shortToLongHex");module.exports=function hexToRgb(hex){hex=shortToLongHex(hex);var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?"rgb("+parseInt(result[1],16)+", "+parseInt(result[2],16)+", "+parseInt(result[3],16)+")":null}},{"./shortToLongHex":160}],147:[function(require,module,exports){"use strict";var isRgb=require("./isRgb");var isRgba=require("./isRgba");var isHex=require("./isHex");module.exports=function isColor(str){return isHex(str)||isRgb(str)||isRgba(str)}},{"./isHex":148,"./isRgb":149,"./isRgba":150}],148:[function(require,module,exports){"use strict";module.exports=function isHex(str){var regex=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;return regex.test(str)}},{}],149:[function(require,module,exports){"use strict";module.exports=function isRgb(str){var regex=/^rgb\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\s*\)$/;return regex.exec(str)!==null}},{}],150:[function(require,module,exports){"use strict";module.exports=function isRgba(str){var regex=/^rgba\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*(0(\.\d+)?|1(\.0+)?)\s*\)$/;return regex.exec(str)!==null}},{}],151:[function(require,module,exports){"use strict";var isHex=require("./isHex");var hexToRgb=require("./hexToRgb");var rgbToObject=require("./rgbToObject");module.exports=function mixColors(from,to,percent){from=isHex(from)?hexToRgb(from):from;to=isHex(to)?hexToRgb(to):to;from=rgbToObject(from);to=rgbToObject(to);var r=from.r+(to.r-from.r)*percent;var g=from.g+(to.g-from.g)*percent;var b=from.b+(to.b-from.b)*percent;return"rgb("+Math.round(r)+", "+Math.round(g)+", "+Math.round(b)+")"}},{"./hexToRgb":146,"./isHex":148,"./rgbToObject":157}],152:[function(require,module,exports){"use strict";var rgbToObject=require("./rgbToObject");module.exports=function rgbToArray(rgb){var o=rgbToObject(rgb);return[o.r,o.g,o.b]}},{"./rgbToObject":157}],153:[function(require,module,exports){"use strict";var hexToDecimal=require("./hexToDecimal");var rgbToArray=require("./rgbToArray");var rgbToHex=require("./rgbToHex");module.exports=function rgbToDecimal(rgb){var hex=rgbToHex.apply(this,rgbToArray(rgb));return hexToDecimal(hex)}},{"./hexToDecimal":145,"./rgbToArray":152,"./rgbToHex":154}],154:[function(require,module,exports){"use strict";module.exports=function rgbToHex(r,g,b){return"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}},{}],155:[function(require,module,exports){"use strict";module.exports=function rgbToHsl(r,g,b){if(arguments.length!==3){return false}r/=255;g/=255;b/=255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var sum=max+min;var diff=max-min;var h;var s;var l=sum/2;if(max===min){h=s=0}else{s=l>.5?diff/(2-max-min):diff/sum;switch(max){case r:h=(g-b)/diff;break;case g:h=2+(b-r)/diff;break;case b:h=4+(r-g)/diff;break}h*=60;if(h<0){h+=360}}return[h,Math.round(100*s),Math.round(100*l)]}},{}],156:[function(require,module,exports){"use strict";module.exports=function rgbToHsv(r,g,b){if(arguments.length!==3){return false}var red=r/255;var green=g/255;var blue=b/255;var max=Math.max(red,green,blue);var min=Math.min(red,green,blue);var h;var s;var v=max;var delta=max-min;s=max===0?0:delta/max;if(max===min){h=0}else{switch(max){case red:h=(green-blue)/delta+(green<blue?6:0);break;case green:h=(blue-red)/delta+2;break;case blue:h=(red-green)/delta+4;break}h/=6}return[Math.round(360*h),Math.round(100*s),Math.round(100*v)]}},{}],157:[function(require,module,exports){"use strict";module.exports=function rgbToObject(rgb){var regex=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/;var match=regex.exec(rgb);return{r:Number(match[1]),g:Number(match[2]),b:Number(match[3])}}},{}],158:[function(require,module,exports){"use strict";var rgbaToObject=require("./rgbaToObject");module.exports=function rgbaToArray(rgba){var o=rgbaToObject(rgba);return[o.r,o.g,o.b,o.a]}},{"./rgbaToObject":159}],159:[function(require,module,exports){"use strict";module.exports=function rgbaToObject(rgba){var regex=/rgba\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(0(\.\d+)?|1(\.0+)?)\s*\)/;var match=regex.exec(rgba);return{r:Number(match[1]),g:Number(match[2]),b:Number(match[3]),a:Number(match[4])}}},{}],160:[function(require,module,exports){"use strict";module.exports=function shortToLongHex(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return"#"+r+r+g+g+b+b});return hex}},{}],161:[function(require,module,exports){"use strict";module.exports={createBezier:require("./ac-easing/createBezier"),createPredefined:require("./ac-easing/createPredefined"),createStep:require("./ac-easing/createStep"),Ease:require("./ac-easing/Ease")}},{"./ac-easing/Ease":162,"./ac-easing/createBezier":163,"./ac-easing/createPredefined":164,"./ac-easing/createStep":165}],162:[function(require,module,exports){"use strict";var ERR_FUNCTION_REQUIRE="Ease expects an easing function.";function Ease(func,cssString){if(typeof func!=="function"){throw new TypeError(ERR_FUNCTION_REQUIRE)}this.easingFunction=func;this.cssString=cssString||null}var proto=Ease.prototype;proto.getValue=function(value){return this.easingFunction(value,0,1,1)};module.exports=Ease},{}],163:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.every");var Ease=require("./Ease");var KeySpline=require("./helpers/KeySpline");var ERR_BEZIER_VALUES="Bezier curve expects exactly four (4) numbers. Given: ";module.exports=function createBezier(x1,y1,x2,y2){var pts=Array.prototype.slice.call(arguments);var allNums=pts.every(function(pt){return typeof pt==="number"});if(pts.length!==4||!allNums){throw new TypeError(ERR_BEZIER_VALUES+pts)}var keySpline=new KeySpline(x1,y1,x2,y2);var easingFn=function(time,begin,change,duration){return keySpline.get(time/duration)*change+begin};var cssString="cubic-bezier("+pts.join(", ")+")";return new Ease(easingFn,cssString)}},{"./Ease":162,"./helpers/KeySpline":166,"@marcom/ac-polyfills/Array/prototype.every":358}],164:[function(require,module,exports){"use strict";var createStep=require("./createStep");var cssAliases=require("./helpers/cssAliases");var easingFunctions=require("./helpers/easingFunctions");var Ease=require("./Ease");var ERR_PREDEFINED='Easing function "%TYPE%" not recognized among the following: '+Object.keys(easingFunctions).join(", ");module.exports=function createPredefined(type){var easingFn;if(type==="step-start"){return createStep(1,"start")}else if(type==="step-end"){return createStep(1,"end")}else{easingFn=easingFunctions[type]}if(!easingFn){throw new Error(ERR_PREDEFINED.replace("%TYPE%",type))}return new Ease(easingFn,cssAliases[type])}},{"./Ease":162,"./createStep":165,"./helpers/cssAliases":167,"./helpers/easingFunctions":168}],165:[function(require,module,exports){"use strict";var Ease=require("./Ease");var ERR_STEP_TYPE="Step function expects a numeric value greater than zero. Given: ";var ERR_STEP_DIRECTION='Step function direction must be either "start" or "end" (default). Given: ';module.exports=function createStep(steps,direction){direction=direction||"end";if(typeof steps!=="number"||steps<1){throw new TypeError(ERR_STEP_TYPE+steps)}if(direction!=="start"&&direction!=="end"){throw new TypeError(ERR_STEP_DIRECTION+direction)}var easingFn=function(time,begin,change,duration){var length=change/steps;var step=Math[direction==="start"?"floor":"ceil"](time/duration*steps);return begin+length*step};var cssString="steps("+steps+", "+direction+")";return new Ease(easingFn,cssString)}},{"./Ease":162}],166:[function(require,module,exports){function KeySpline(mX1,mY1,mX2,mY2){this.get=function(aX){if(mX1===mY1&&mX2===mY2){return aX}return CalcBezier(GetTForX(aX),mY1,mY2)};function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function CalcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function GetSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function GetTForX(aX){var aGuessT=aX;for(var i=0;i<4;++i){var currentSlope=GetSlope(aGuessT,mX1,mX2);if(currentSlope===0){return aGuessT}var currentX=CalcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope}return aGuessT}}module.exports=KeySpline},{}],167:[function(require,module,exports){"use strict";var aliases={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"};aliases["easeIn"]=aliases["ease-in"];aliases["easeOut"]=aliases["ease-out"];aliases["easeInOut"]=aliases["ease-in-out"];aliases["easeInCubic"]=aliases["ease-in-cubic"];aliases["easeOutCubic"]=aliases["ease-out-cubic"];aliases["easeInOutCubic"]=aliases["ease-in-out-cubic"];aliases["easeInQuad"]=aliases["ease-in-quad"];aliases["easeOutQuad"]=aliases["ease-out-quad"];aliases["easeInOutQuad"]=aliases["ease-in-out-quad"];aliases["easeInQuart"]=aliases["ease-in-quart"];aliases["easeOutQuart"]=aliases["ease-out-quart"];aliases["easeInOutQuart"]=aliases["ease-in-out-quart"];aliases["easeInQuint"]=aliases["ease-in-quint"];aliases["easeOutQuint"]=aliases["ease-out-quint"];aliases["easeInOutQuint"]=aliases["ease-in-out-quint"];aliases["easeInSine"]=aliases["ease-in-sine"];aliases["easeOutSine"]=aliases["ease-out-sine"];aliases["easeInOutSine"]=aliases["ease-in-out-sine"];aliases["easeInExpo"]=aliases["ease-in-expo"];aliases["easeOutExpo"]=aliases["ease-out-expo"];aliases["easeInOutExpo"]=aliases["ease-in-out-expo"];aliases["easeInCirc"]=aliases["ease-in-circ"];aliases["easeOutCirc"]=aliases["ease-out-circ"];aliases["easeInOutCirc"]=aliases["ease-in-out-circ"];aliases["easeInBack"]=aliases["ease-in-back"];aliases["easeOutBack"]=aliases["ease-out-back"];aliases["easeInOutBack"]=aliases["ease-in-out-back"];module.exports=aliases},{}],168:[function(require,module,exports){"use strict";var createBezier=require("../createBezier");var ease=createBezier(.25,.1,.25,1).easingFunction;var easeIn=createBezier(.42,0,1,1).easingFunction;var easeOut=createBezier(0,0,.58,1).easingFunction;var easeInOut=createBezier(.42,0,.58,1).easingFunction;var linear=function(time,begin,change,duration){return change*time/duration+begin};var easeInQuad=function(time,begin,change,duration){return change*(time/=duration)*time+begin};var easeOutQuad=function(time,begin,change,duration){return-change*(time/=duration)*(time-2)+begin};var easeInOutQuad=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time+begin}return-change/2*(--time*(time-2)-1)+begin};var easeInCubic=function(time,begin,change,duration){return change*(time/=duration)*time*time+begin};var easeOutCubic=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time+1)+begin};var easeInOutCubic=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time+begin}return change/2*((time-=2)*time*time+2)+begin};var easeInQuart=function(time,begin,change,duration){return change*(time/=duration)*time*time*time+begin};var easeOutQuart=function(time,begin,change,duration){return-change*((time=time/duration-1)*time*time*time-1)+begin};var easeInOutQuart=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time+begin}return-change/2*((time-=2)*time*time*time-2)+begin};var easeInQuint=function(time,begin,change,duration){return change*(time/=duration)*time*time*time*time+begin};var easeOutQuint=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time*time*time+1)+begin};var easeInOutQuint=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time*time+begin}return change/2*((time-=2)*time*time*time*time+2)+begin};var easeInSine=function(time,begin,change,duration){return-change*Math.cos(time/duration*(Math.PI/2))+change+begin};var easeOutSine=function(time,begin,change,duration){return change*Math.sin(time/duration*(Math.PI/2))+begin};var easeInOutSine=function(time,begin,change,duration){return-change/2*(Math.cos(Math.PI*time/duration)-1)+begin};var easeInExpo=function(time,begin,change,duration){return time===0?begin:change*Math.pow(2,10*(time/duration-1))+begin};var easeOutExpo=function(time,begin,change,duration){return time===duration?begin+change:change*(-Math.pow(2,-10*time/duration)+1)+begin};var easeInOutExpo=function(time,begin,change,duration){if(time===0){return begin}else if(time===duration){return begin+change}else if((time/=duration/2)<1){return change/2*Math.pow(2,10*(time-1))+begin}return change/2*(-Math.pow(2,-10*--time)+2)+begin};var easeInCirc=function(time,begin,change,duration){return-change*(Math.sqrt(1-(time/=duration)*time)-1)+begin};var easeOutCirc=function(time,begin,change,duration){return change*Math.sqrt(1-(time=time/duration-1)*time)+begin};var easeInOutCirc=function(time,begin,change,duration){if((time/=duration/2)<1){return-change/2*(Math.sqrt(1-time*time)-1)+begin}return change/2*(Math.sqrt(1-(time-=2)*time)+1)+begin};var easeInElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration)===1){return begin+change}if(!period){period=duration*.3}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}return-(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin};var easeOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration)===1){return begin+change}if(!period){period=duration*.3}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}return amplitude*Math.pow(2,-10*time)*Math.sin((time*duration-shootover)*(2*Math.PI)/period)+change+begin};var easeInOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}else if((time/=duration/2)===2){return begin+change}if(!period){period=duration*(.3*1.5)}if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}if(time<1){return-.5*(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin}return amplitude*Math.pow(2,-10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period)*.5+change+begin};var easeInBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}return change*(time/=duration)*time*((shootover+1)*time-shootover)+begin};var easeOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}return change*((time=time/duration-1)*time*((shootover+1)*time+shootover)+1)+begin};var easeInOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}if((time/=duration/2)<1){return change/2*(time*time*(((shootover*=1.525)+1)*time-shootover))+begin}return change/2*((time-=2)*time*(((shootover*=1.525)+1)*time+shootover)+2)+begin};var easeOutBounce=function(time,begin,change,duration){if((time/=duration)<1/2.75){return change*(7.5625*time*time)+begin}else if(time<2/2.75){return change*(7.5625*(time-=1.5/2.75)*time+.75)+begin}else if(time<2.5/2.75){return change*(7.5625*(time-=2.25/2.75)*time+.9375)+begin}return change*(7.5625*(time-=2.625/2.75)*time+.984375)+begin};var easeInBounce=function(time,begin,change,duration){return change-easeOutBounce(duration-time,0,change,duration)+begin};var easeInOutBounce=function(time,begin,change,duration){if(time<duration/2){return easeInBounce(time*2,0,change,duration)*.5+begin}return easeOutBounce(time*2-duration,0,change,duration)*.5+change*.5+begin};module.exports={linear:linear,ease:ease,easeIn:easeIn,"ease-in":easeIn,easeOut:easeOut,"ease-out":easeOut,easeInOut:easeInOut,"ease-in-out":easeInOut,easeInCubic:easeInCubic,"ease-in-cubic":easeInCubic,easeOutCubic:easeOutCubic,"ease-out-cubic":easeOutCubic,easeInOutCubic:easeInOutCubic,"ease-in-out-cubic":easeInOutCubic,easeInQuad:easeInQuad,"ease-in-quad":easeInQuad,easeOutQuad:easeOutQuad,"ease-out-quad":easeOutQuad,easeInOutQuad:easeInOutQuad,"ease-in-out-quad":easeInOutQuad,easeInQuart:easeInQuart,"ease-in-quart":easeInQuart,easeOutQuart:easeOutQuart,"ease-out-quart":easeOutQuart,easeInOutQuart:easeInOutQuart,"ease-in-out-quart":easeInOutQuart,easeInQuint:easeInQuint,"ease-in-quint":easeInQuint,easeOutQuint:easeOutQuint,"ease-out-quint":easeOutQuint,easeInOutQuint:easeInOutQuint,"ease-in-out-quint":easeInOutQuint,easeInSine:easeInSine,"ease-in-sine":easeInSine,easeOutSine:easeOutSine,"ease-out-sine":easeOutSine,easeInOutSine:easeInOutSine,"ease-in-out-sine":easeInOutSine,easeInExpo:easeInExpo,"ease-in-expo":easeInExpo,easeOutExpo:easeOutExpo,"ease-out-expo":easeOutExpo,easeInOutExpo:easeInOutExpo,"ease-in-out-expo":easeInOutExpo,easeInCirc:easeInCirc,"ease-in-circ":easeInCirc,easeOutCirc:easeOutCirc,"ease-out-circ":easeOutCirc,easeInOutCirc:easeInOutCirc,"ease-in-out-circ":easeInOutCirc,easeInBack:easeInBack,"ease-in-back":easeInBack,easeOutBack:easeOutBack,"ease-out-back":easeOutBack,easeInOutBack:easeInOutBack,"ease-in-out-back":easeInOutBack,easeInElastic:easeInElastic,"ease-in-elastic":easeInElastic,easeOutElastic:easeOutElastic,"ease-out-elastic":easeOutElastic,easeInOutElastic:easeInOutElastic,"ease-in-out-elastic":easeInOutElastic,easeInBounce:easeInBounce,"ease-in-bounce":easeInBounce,easeOutBounce:easeOutBounce,"ease-out-bounce":easeOutBounce,easeInOutBounce:easeInOutBounce,"ease-in-out-bounce":easeInOutBounce}},{"../createBezier":163}],169:[function(require,module,exports){"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":170}],170:[function(require,module,exports){"use strict";function EventEmitterMicro(){this._events={}}var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===false||this._events[eventName].length===0){return false}return true};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}this._events=null};module.exports=EventEmitterMicro},{}],171:[function(require,module,exports){"use strict";require("./helpers/Float32Array");var transitionEnd=require("./helpers/transitionEnd");var Clip=require("@marcom/ac-clip").Clip;var ClipEasing=require("./clips/ClipEasing");var ClipInlineCss=require("./clips/ClipInlineCss");var ClipTransitionCss=require("./clips/ClipTransitionCss");function ClipFactory(target,duration,propsTo,options){if(target.nodeType){if(transitionEnd===undefined||options&&options.inlineStyles){return new ClipInlineCss(target,duration,propsTo,options)}return new ClipTransitionCss(target,duration,propsTo,options)}return new ClipEasing(target,duration,propsTo,options)}for(var prop in Clip){if(typeof Clip[prop]==="function"&&prop.substr(0,1)!=="_"){ClipFactory[prop]=Clip[prop].bind(Clip)}}ClipFactory.to=function(target,duration,propsTo,options){options=options||{};if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new ClipFactory(target,duration,propsTo,options).play()};ClipFactory.from=function(target,duration,propsFrom,options){options=options||{};options.propsFrom=propsFrom;if(options.destroyOnComplete===undefined){options.destroyOnComplete=true}return new ClipFactory(target,duration,options.propsTo,options).play()};module.exports=ClipFactory},{"./clips/ClipEasing":174,"./clips/ClipInlineCss":175,"./clips/ClipTransitionCss":176,"./helpers/Float32Array":179,"./helpers/transitionEnd":188,"@marcom/ac-clip":139}],172:[function(require,module,exports){"use strict";module.exports=require("./timeline/Timeline")},{"./timeline/Timeline":190}],173:[function(require,module,exports){"use strict";module.exports={Clip:require("./Clip"),Timeline:require("./Timeline")}},{"./Clip":171,"./Timeline":172}],174:[function(require,module,exports){"use strict";var clone=require("@marcom/ac-object/clone");var create=require("@marcom/ac-object/create");var createPredefined=require("@marcom/ac-easing").createPredefined;var isCssCubicBezierString=require("../helpers/isCssCubicBezierString");var BezierCurveCssManager=require("../helpers/BezierCurveCssManager");var Clip=require("@marcom/ac-clip").Clip;var Ease=require("@marcom/ac-easing").Ease;function ClipEasing(target,duration,propsTo,options){if(options&&isCssCubicBezierString(options.ease)){options.ease=BezierCurveCssManager.create(options.ease).toEasingFunction()}options=options||{};this._propsEase=options.propsEase||{};Clip.call(this,target,duration,propsTo,options)}var Super=Clip.prototype;var proto=ClipEasing.prototype=create(Super);proto.reset=function(){var returnValue=Super.reset.call(this);if(this._clips){var i=this._clips.length;while(i--){this._clips[i].reset()}}return returnValue};proto.destroy=function(){if(this._clips){var i=this._clips.length;while(i--){this._clips[i].destroy()}this._clips=null}this._eases=null;this._storeOnUpdate=null;return Super.destroy.call(this)};proto._prepareProperties=function(){var easeCount=0;var groupsTo={};var groupsFrom={};var eases={};var prop;var ease;if(this._propsEase){for(prop in this._propsTo){if(this._propsTo.hasOwnProperty(prop)){ease=this._propsEase[prop];if(isCssCubicBezierString(ease)){ease=BezierCurveCssManager.create(ease).toEasingFunction()}if(ease===undefined){if(groupsTo[this._ease]===undefined){groupsTo[this._ease]={};groupsFrom[this._ease]={};eases[this._ease]=this._ease.easingFunction;easeCount++}groupsTo[this._ease][prop]=this._propsTo[prop];groupsFrom[this._ease][prop]=this._propsFrom[prop]}else if(typeof ease==="function"){groupsTo[easeCount]={};groupsFrom[easeCount]={};groupsTo[easeCount][prop]=this._propsTo[prop];groupsFrom[easeCount][prop]=this._propsFrom[prop];eases[easeCount]=ease;easeCount++}else{if(groupsTo[ease]===undefined){groupsTo[ease]={};groupsFrom[ease]={};eases[ease]=ease;easeCount++}groupsTo[ease][prop]=this._propsTo[prop];groupsFrom[ease][prop]=this._propsFrom[prop]}}}if(easeCount>1){var optionsClone=clone(this._options||{},true);var duration=this._duration*.001;this._storeOnUpdate=this._onUpdate;this._onUpdate=this._onUpdateClips;optionsClone.onStart=null;optionsClone.onUpdate=null;optionsClone.onDraw=null;optionsClone.onComplete=null;this._clips=[];for(ease in groupsTo){if(groupsTo.hasOwnProperty(ease)){optionsClone.ease=eases[ease];optionsClone.propsFrom=groupsFrom[ease];this._clips.push(new Clip(this._target,duration,groupsTo[ease],optionsClone))}}ease="linear";this._propsTo={};this._propsFrom={}}else{for(prop in eases){if(eases.hasOwnProperty(prop)){ease=eases[prop]}}}if(ease!==undefined){this._ease=typeof ease==="function"?new Ease(ease):createPredefined(ease)}}return Super._prepareProperties.call(this)};proto._onUpdateClips=function(clip){var progress=this._direction===1?clip.progress():1-clip.progress();var i=this._clips.length;while(i--){this._clips[i].progress(progress)}if(typeof this._storeOnUpdate==="function"){this._storeOnUpdate.call(this,this)}};module.exports=ClipEasing},{"../helpers/BezierCurveCssManager":178,"../helpers/isCssCubicBezierString":184,"@marcom/ac-clip":139,"@marcom/ac-easing":161,"@marcom/ac-object/clone":123,"@marcom/ac-object/create":124}],175:[function(require,module,exports){"use strict";var setStyle=require("@marcom/ac-dom-styles/setStyle");var convertToStyleObject=require("../helpers/convertToStyleObject");var convertToTransitionableObjects=require("../helpers/convertToTransitionableObjects");var create=require("@marcom/ac-object/create");var removeTransitions=require("../helpers/removeTransitions");var ClipEasing=require("./ClipEasing");function ClipInlineCss(target,duration,propsTo,options){options=options||{};this._el=target;this._storeOnStart=options.onStart||null;this._storeOnDraw=options.onDraw||null;this._storeOnComplete=options.onComplete||null;options.onStart=this._onStart;options.onDraw=this._onDraw;options.onComplete=this._onComplete;ClipEasing.call(this,{},duration,propsTo,options)}var Super=ClipEasing.prototype;var proto=ClipInlineCss.prototype=create(Super);proto.play=function(){var returnValue=Super.play.call(this);if(this._remainingDelay!==0){setStyle(this._el,convertToStyleObject(this._target))}return returnValue};proto.reset=function(){var returnValue=Super.reset.call(this);setStyle(this._el,convertToStyleObject(this._target));return returnValue};proto.destroy=function(){this._el=null;this._completeStyles=null;this._storeOnStart=null;this._storeOnDraw=null;this._storeOnComplete=null;return Super.destroy.call(this)};proto.target=function(){return this._el};proto._prepareProperties=function(){var converted=convertToTransitionableObjects(this._el,this._propsTo,this._propsFrom);this._target=converted.target;this._propsFrom=converted.propsFrom;this._propsTo=converted.propsTo;removeTransitions(this._el,this._target);var completeStyles=this._isYoyo?this._propsFrom:this._propsTo;this._completeStyles=convertToStyleObject(completeStyles);if(this._options.removeStylesOnComplete!==undefined){var prop;var removeStyles=this._options.removeStylesOnComplete;if(typeof removeStyles==="boolean"&&removeStyles){for(prop in this._completeStyles){if(this._completeStyles.hasOwnProperty(prop)){this._completeStyles[prop]=null}}}else if(typeof removeStyles==="object"&&removeStyles.length){var i=removeStyles.length;while(i--){prop=removeStyles[i];if(this._completeStyles.hasOwnProperty(prop)){this._completeStyles[prop]=null}}}}return Super._prepareProperties.call(this)};proto._onStart=function(clip){if(this.playing()&&this._direction===1&&this._delay===0){setStyle(this._el,convertToStyleObject(this._propsFrom))}if(typeof this._storeOnStart==="function"){this._storeOnStart.call(this,this)}};proto._onDraw=function(clip){setStyle(this._el,convertToStyleObject(this._target));if(typeof this._storeOnDraw==="function"){this._storeOnDraw.call(this,this)}};proto._onComplete=function(clip){setStyle(this._el,this._completeStyles);if(typeof this._storeOnComplete==="function"){this._storeOnComplete.call(this,this)}};module.exports=ClipInlineCss},{"../helpers/convertToStyleObject":181,"../helpers/convertToTransitionableObjects":182,"../helpers/removeTransitions":185,"./ClipEasing":174,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-object/create":124}],176:[function(require,module,exports){"use strict";var setStyle=require("@marcom/ac-dom-styles/setStyle");var getStyle=require("@marcom/ac-dom-styles/getStyle");var convertToStyleObject=require("../helpers/convertToStyleObject");var convertToTransitionableObjects=require("../helpers/convertToTransitionableObjects");var clone=require("@marcom/ac-object/clone");var create=require("@marcom/ac-object/create");var createPredefined=require("@marcom/ac-easing").createPredefined;var isCssCubicBezierString=require("../helpers/isCssCubicBezierString");var removeTransitions=require("../helpers/removeTransitions");var transitionEnd=require("../helpers/transitionEnd");var waitAnimationFrames=require("../helpers/waitAnimationFrames");var BezierCurveCssManager=require("../helpers/BezierCurveCssManager");var Clip=require("@marcom/ac-clip").Clip;var ClipEasing=require("./ClipEasing");var PageVisibilityManager=require("@marcom/ac-page-visibility").PageVisibilityManager;var DEFAULT_EASE="ease";var ERROR_EASE_NOT_SUPPORTED="%EASE% is not a supported predefined ease when transitioning with Elements "+"and CSS transition. If you need to use %EASE% then pass the inlineStyle:true option.";var ERROR_EASE_IS_FUNCTION="Function eases are not supported when using CSS transitions with Elements. "+"Either use a cubic-bezier string (e.g. 'cubic-bezier(0, 0, 1, 1)' or pass the "+"inlineStyle option as `true` to render styles each frame instead of using CSS transitions.";function ClipTransitionCss(target,duration,propsTo,options){options=options||{};this._el=target;this._storeEase=options.ease;if(typeof this._storeEase==="function"){throw new Error(ERROR_EASE_IS_FUNCTION)}this._storeOnStart=options.onStart||null;this._storeOnComplete=options.onComplete||null;options.onStart=this._onStart.bind(this);options.onComplete=this._onComplete.bind(this);this._stylesTo=clone(propsTo,true);this._stylesFrom=options.propsFrom?clone(options.propsFrom,true):{};this._propsEase=options.propsEase?clone(options.propsEase,true):{};if(isCssCubicBezierString(options.ease)){options.ease=BezierCurveCssManager.create(options.ease).toEasingFunction()}Clip.call(this,{},duration,{},options);this._propsFrom={}}var Super=Clip.prototype;var proto=ClipTransitionCss.prototype=create(Super);proto.play=function(){var returnValue=Super.play.call(this);if(this._direction===1&&this.progress()===0&&this._remainingDelay!==0){this._applyStyles(0,convertToStyleObject(this._stylesFrom))}return returnValue};proto.reset=function(){var returnValue=Super.reset.call(this);this._stylesClip.reset();this._applyStyles(0,convertToStyleObject(this._styles));return returnValue};proto.destroy=function(){PageVisibilityManager.off("changed",this._onVisibilityChanged);this._removeTransitionListener();this.off("pause",this._onPaused);this._onPaused();this._stylesClip.destroy();this._stylesClip=null;this._el=null;this._propsArray=null;this._styles=null;this._stylesFrom=null;this._stylesTo=null;this._completeStyles=null;this._storeOnStart=null;this._storeOnComplete=null;this._onTransitionEnded=null;return Super.destroy.call(this)};proto.target=function(){return this._el};proto.duration=function(duration){var returnValue=Super.duration.call(this,duration);if(duration===undefined){return returnValue}if(this.playing()){this.progress(this._progress)}return returnValue};proto.progress=function(progress){var returnValue=Super.progress.call(this,progress);if(progress===undefined){return returnValue}progress=this._direction===1?progress:1-progress;this._stylesClip.progress(progress);this._applyStyles(0,convertToStyleObject(this._styles));if(this.playing()){this._isWaitingForStylesToBeApplied=true;waitAnimationFrames(this._setStylesAfterWaiting,2)}return returnValue};proto._prepareProperties=function(){var converted=convertToTransitionableObjects(this._el,this._stylesTo,this._stylesFrom);this._styles=converted.target;this._stylesTo=converted.propsTo;this._stylesFrom=converted.propsFrom;var ease=this._storeEase||DEFAULT_EASE;this._eases={};this._propsArray=[];var convertedEase;this._styleCompleteTo=convertToStyleObject(this._stylesTo);this._styleCompleteFrom=convertToStyleObject(this._stylesFrom);this._propsEaseKeys={};var prop;for(prop in this._stylesTo){if(this._stylesTo.hasOwnProperty(prop)){this._propsArray[this._propsArray.length]=prop;if(this._propsEase[prop]===undefined){if(this._eases[ease]===undefined){convertedEase=this._convertEase(ease);this._eases[ease]=convertedEase.css}this._propsEaseKeys[prop]=ease}else if(this._eases[this._propsEase[prop]]===undefined){convertedEase=this._convertEase(this._propsEase[prop]);this._eases[this._propsEase[prop]]=convertedEase.css;this._propsEaseKeys[prop]=this._propsEase[prop];this._propsEase[prop]=convertedEase.js}else if(isCssCubicBezierString(this._propsEase[prop])){this._propsEaseKeys[prop]=this._propsEase[prop];this._propsEase[prop]=this._eases[this._propsEase[prop]]["1"].toEasingFunction()}}}this._onPaused=this._onPaused.bind(this);this.on("pause",this._onPaused);this._setOtherTransitions();this._currentTransitionStyles=this._otherTransitions;this._completeStyles=convertToStyleObject(this._isYoyo?this._stylesFrom:this._stylesTo);if(this._options.removeStylesOnComplete!==undefined){var removeStyles=this._options.removeStylesOnComplete;if(typeof removeStyles==="boolean"&&removeStyles){for(prop in this._stylesTo){this._completeStyles[prop]=null}}else if(typeof removeStyles==="object"&&removeStyles.length){var i=removeStyles.length;while(i--){this._completeStyles[removeStyles[i]]=null}}}this._onTransitionEnded=this._onTransitionEnded.bind(this);this._setStylesAfterWaiting=this._setStylesAfterWaiting.bind(this);this._onVisibilityChanged=this._onVisibilityChanged.bind(this);PageVisibilityManager.on(PageVisibilityManager.CHANGED,this._onVisibilityChanged);this._stylesClip=new ClipEasing(this._styles,1,this._stylesTo,{ease:this._options.ease,propsFrom:this._stylesFrom,propsEase:this._options.propsEase});Clip._remove(this._stylesClip);return Super._prepareProperties.call(this)};proto._convertEase=function(ease){if(typeof ease==="function"){throw new Error(ERROR_EASE_IS_FUNCTION)}var bezierCurve;var jsEase;if(isCssCubicBezierString(ease)){bezierCurve=BezierCurveCssManager.create(ease);jsEase=bezierCurve.toEasingFunction()}else{var predefinedEase=createPredefined(ease);if(predefinedEase.cssString===null){throw new Error(ERROR_EASE_NOT_SUPPORTED.replace(/%EASE%/g,ease))}bezierCurve=BezierCurveCssManager.create(predefinedEase.cssString);jsEase=ease}return{css:{1:bezierCurve,"-1":bezierCurve.reversed()},js:jsEase}};proto._complete=function(){if((this._isWaitingForStylesToBeApplied||this._isTransitionEnded||!this._isListeningForTransitionEnd)&&this.progress()===1){this._isWaitingForStylesToBeApplied=false;Super._complete.call(this)}};proto._onTransitionEnded=function(){this._isTransitionEnded=true;this._complete()};proto._addTransitionListener=function(){if(!this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded){this._isListeningForTransitionEnd=true;this._isTransitionEnded=false;this._el.addEventListener(transitionEnd,this._onTransitionEnded)}};proto._removeTransitionListener=function(){if(this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded){this._isListeningForTransitionEnd=false;this._isTransitionEnded=false;this._el.removeEventListener(transitionEnd,this._onTransitionEnded)}};proto._applyStyles=function(duration,styles){if(duration>0){var transition="";var eases={};var prop;for(prop in this._eases){if(this._eases.hasOwnProperty(prop)){eases[prop]=this._eases[prop][this._direction].splitAt(this.progress()).toCSSString()}}for(prop in this._stylesTo){if(this._stylesTo.hasOwnProperty(prop)){transition+=prop+" "+duration+"ms "+eases[this._propsEaseKeys[prop]]+" 0ms, "}}this._currentTransitionStyles=transition.substr(0,transition.length-2);if(!this._doStylesMatchCurrentStyles(styles)){this._addTransitionListener()}else{this._removeTransitionListener()}}else{this._currentTransitionStyles="";this._removeTransitionListener()}styles["transition"]=this._getOtherClipTransitionStyles()+this._currentTransitionStyles;setStyle(this._el,styles)};proto._doStylesMatchCurrentStyles=function(newStyles){var currentStyles=getStyle.apply(this,[this._el].concat([this._propsArray]));var style;for(style in newStyles){if(newStyles.hasOwnProperty(style)&&currentStyles.hasOwnProperty(style)&&newStyles[style]!==currentStyles[style]){return false}}return true};proto._setStylesAfterWaiting=function(){this._isWaitingForStylesToBeApplied=false;if(this.playing()){var duration=this._durationMs*(1-this.progress());var styles=this._direction>0?this._styleCompleteTo:this._styleCompleteFrom;this._applyStyles(duration,styles)}};proto._setOtherTransitions=function(){removeTransitions(this._el,this._stylesTo);var clips=Clip.getAll(this._el);var i=clips.length;while(i--){if(clips[i]!==this&&clips[i].playing()&&clips[i]._otherTransitions&&clips[i]._otherTransitions.length){this._otherTransitions=clips[i]._otherTransitions;return}}this._otherTransitions=getStyle(this._el,"transition").transition;if(this._otherTransitions===null||this._otherTransitions==="all 0s ease 0s"){this._otherTransitions=""}};proto._getTransitionStyles=function(){var transition=this._getOtherClipTransitionStyles();if(this._otherTransitions.length){transition+=this._otherTransitions}else if(transition.length){transition=transition.substr(0,transition.length-2)}return transition};proto._getOtherClipTransitionStyles=function(){var transition="";var clips=Clip.getAll(this._el);var i=clips.length;while(i--){if(clips[i]!==this&&clips[i].playing()&&clips[i]._currentTransitionStyles&&clips[i]._currentTransitionStyles.length){transition+=clips[i]._currentTransitionStyles+", "}}return transition};proto._onVisibilityChanged=function(evt){if(this.playing()&&!evt.isHidden){this._update({timeNow:this._getTime()});var progress=this.progress();if(progress<1){this.progress(progress)}}};proto._onPaused=function(clip){var styles=getStyle.apply(this,[this._el].concat([this._propsArray]));styles["transition"]=this._getTransitionStyles();this._removeTransitionListener();setStyle(this._el,styles)};proto._onStart=function(clip){var waitFrames=this._direction===1&&this.progress()===0&&this._delay===0?2:0;if(waitFrames){this._isWaitingForStylesToBeApplied=true;this._applyStyles(0,this._styleCompleteFrom)}waitAnimationFrames(this._setStylesAfterWaiting,waitFrames);if(typeof this._storeOnStart==="function"){this._storeOnStart.call(this,this)}};proto._onComplete=function(clip){this._removeTransitionListener();this._completeStyles["transition"]=this._getTransitionStyles();setStyle(this._el,this._completeStyles);if(typeof this._storeOnComplete==="function"){this._storeOnComplete.call(this,this)}};module.exports=ClipTransitionCss},{"../helpers/BezierCurveCssManager":178,"../helpers/convertToStyleObject":181,"../helpers/convertToTransitionableObjects":182,"../helpers/isCssCubicBezierString":184,"../helpers/removeTransitions":185,"../helpers/transitionEnd":188,"../helpers/waitAnimationFrames":189,"./ClipEasing":174,"@marcom/ac-clip":139,"@marcom/ac-dom-styles/getStyle":113,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-easing":161,"@marcom/ac-object/clone":123,"@marcom/ac-object/create":124,"@marcom/ac-page-visibility":126}],177:[function(require,module,exports){"use strict";var createBezier=require("@marcom/ac-easing").createBezier;function BezierCurveCss(curve,manager){this.manager=manager;this.p1={x:curve[0],y:curve[1]};this.p2={x:curve[2],y:curve[3]};this._isLinear=this.p1.x===this.p1.y&&this.p2.x===this.p2.y;this._cacheSplits={}}var proto=BezierCurveCss.prototype;proto.splitAt=function(percent){if(this._isLinear){return this}percent=Math.round(percent*40)/40;if(percent===0){return this}else if(this._cacheSplits[percent]!==undefined){return this._cacheSplits[percent]}var x=[this.p1.x,this.p2.x];var y=[this.p1.y,this.p2.y];var maxIterations=0;var targetX=percent;var min=0;var max=1;var startX=this._getStartX(percent,x);while(targetX!==startX&&maxIterations<1e3){if(targetX<startX){max=percent}else{min=percent}percent=min+(max-min)*.5;startX=this._getStartX(percent,x);++maxIterations}var split=this._splitBezier(percent,x,y);var normalized=this._normalize(split);var newBezierCurve=this.manager.create(normalized);this._cacheSplits[targetX]=newBezierCurve;return newBezierCurve};proto.reversed=function(){var arr=this.toArray();return this.manager.create([.5-(arr[2]-.5),.5-(arr[3]-.5),.5-(arr[0]-.5),.5-(arr[1]-.5)])};proto.toArray=function(){return[this.p1.x,this.p1.y,this.p2.x,this.p2.y]};proto.toCSSString=function(){return"cubic-bezier("+this.p1.x+", "+this.p1.y+", "+this.p2.x+", "+this.p2.y+")"};proto.toEasingFunction=function(){return createBezier.apply(this,this.toArray()).easingFunction};proto._getStartX=function(p,x){var cp=p-1;var p2=p*p;var cp2=cp*cp;var p3=p2*p;return p3-3*p2*cp*x[1]+3*p*cp2*x[0]};proto._splitBezier=function(p,x,y){var cp=p-1;var p2=p*p;var cp2=cp*cp;var p3=p2*p;return[p3-3*p2*cp*x[1]+3*p*cp2*x[0],p3-3*p2*cp*y[1]+3*p*cp2*y[0],p2-2*p*cp*x[1]+cp2*x[0],p2-2*p*cp*y[1]+cp2*y[0],p-cp*x[1],p-cp*y[1]]};proto._normalize=function(array){return[(array[2]-array[0])/(1-array[0]),(array[3]-array[1])/(1-array[1]),(array[4]-array[0])/(1-array[0]),(array[5]-array[1])/(1-array[1])]};module.exports=BezierCurveCss},{"@marcom/ac-easing":161}],178:[function(require,module,exports){"use strict";var BezierCurveCss=require("./BezierCurveCss");function BezierCurveCssManager(){this._instances={}}var proto=BezierCurveCssManager.prototype;proto.create=function(curve){var key;if(typeof curve==="string"){key=curve.replace(/ /g,"")}else{key="cubic-bezier("+curve.join(",")+")"}if(this._instances[key]===undefined){if(typeof curve==="string"){curve=curve.match(/\d*\.?\d+/g);var i=curve.length;while(i--){curve[i]=Number(curve[i])}}this._instances[key]=new BezierCurveCss(curve,this)}return this._instances[key]};module.exports=new BezierCurveCssManager},{"./BezierCurveCss":177}],179:[function(require,module,exports){"use strict";if(typeof window.Float32Array==="undefined"){window.Float32Array=function(){}}},{}],180:[function(require,module,exports){"use strict";var getDimensions=require("@marcom/ac-dom-metrics/getDimensions");var splitUnits=require("./splitUnits");var percentagePropToDimention={translateX:"width",translateY:"height"};function TransformMatrix(transform,el,styles){this._transform=transform;var split;var value;var prop;for(prop in styles){if(styles.hasOwnProperty(prop)&&typeof this._transform[prop]==="function"){split=splitUnits(styles[prop]);if(split.unit==="%"){value=this._convertPercentToPixelValue(prop,split.value,el)}else{value=split.value}this._transform[prop].call(this._transform,value)}}}var proto=TransformMatrix.prototype;proto._convertPercentToPixelValue=function(prop,value,el){prop=percentagePropToDimention[prop];var dimentions=getDimensions(el);if(dimentions[prop]){value*=.01;return dimentions[prop]*value}return value};proto.toArray=function(){return this._transform.toArray()};proto.toCSSString=function(){return this._transform.toCSSString()};module.exports=TransformMatrix},{"./splitUnits":186,"@marcom/ac-dom-metrics/getDimensions":92}],181:[function(require,module,exports){"use strict";module.exports=function convertToStyleObject(target){var styles={};var matrix;var prop;for(prop in target){if(target.hasOwnProperty(prop)&&target[prop]!==null){if(target[prop].isColor){if(target[prop].isRgb){styles[prop]="rgb("+Math.round(target[prop].r)+", "+Math.round(target[prop].g)+", "+Math.round(target[prop].b)+")"}else if(target[prop].isRgba){styles[prop]="rgba("+Math.round(target[prop].r)+", "+Math.round(target[prop].g)+", "+Math.round(target[prop].b)+", "+target[prop].a+")"}}else if(prop==="transform"){matrix=target[prop].length===6?"matrix":"matrix3d";styles[prop]=matrix+"("+target[prop].join(",")+")"}else if(!target[prop].unit){styles[prop]=target[prop].value}else{styles[prop]=target[prop].value+target[prop].unit}}}return styles}},{}],182:[function(require,module,exports){"use strict";var getStyle=require("@marcom/ac-dom-styles/getStyle");var clone=require("@marcom/ac-object/clone");var splitUnits=require("./splitUnits");var toCamCase=require("./toCamCase");var Color=require("@marcom/ac-color").Color;var cssPropertyAvailable=require("@marcom/ac-feature/cssPropertyAvailable");var Transform=require("@marcom/ac-transform").Transform;var TransformMatrix=require("./TransformMatrix");var toColorObject=function(color){if(Color.isRgba(color)){color=new Color(color).rgbaObject();color["isRgba"]=true}else{color=new Color(color).rgbObject();color["isRgb"]=true}color["isColor"]=true;return color};var convertRgbToRgbaObject=function(obj){if(obj.isRgb){obj.isRgb=false;obj.isRgba=true;obj.a=1}};var standardizeColors=function(target,propsFrom,propsTo){if(target.isRgba||propsFrom.isRgba||propsTo.isRgba){convertRgbToRgbaObject(target);convertRgbToRgbaObject(propsFrom);convertRgbToRgbaObject(propsTo)}};var convertMatrixTo3d=function(matrix){return[matrix[0],matrix[1],0,0,matrix[2],matrix[3],0,0,0,0,1,0,matrix[4],matrix[5],0,1]};var standardizeMatrices=function(target,propsFrom,propsTo){if(target["transform"].length===16||propsFrom["transform"].length===16||propsTo["transform"].length===16){if(target["transform"].length===6){target["transform"]=convertMatrixTo3d(target["transform"])}if(propsFrom["transform"].length===6){propsFrom["transform"]=convertMatrixTo3d(propsFrom["transform"])}if(propsTo["transform"].length===6){propsTo["transform"]=convertMatrixTo3d(propsTo["transform"])}}};module.exports=function convertToTransitionableObjects(el,propsTo,propsFrom){var target={};propsTo=clone(propsTo,true);propsFrom=clone(propsFrom,true);var style;var mTarget;var mTo;var mFrom;var isTransformSupported=cssPropertyAvailable("transform");var prop;for(prop in propsTo){if(propsTo.hasOwnProperty(prop)&&propsTo[prop]!==null){if(prop==="transform"){if(isTransformSupported){mTarget=new Transform;style=getStyle(el,"transform")["transform"]||"none";mTarget.setMatrixValue(style);mTo=new TransformMatrix(new Transform,el,propsTo[prop])}if(mTo&&mTo.toCSSString()!==mTarget.toCSSString()){mFrom=new TransformMatrix(propsFrom[prop]?new Transform:mTarget.clone(),el,propsFrom[prop]);target[prop]=mTarget.toArray();propsTo[prop]=mTo.toArray();propsFrom[prop]=mFrom.toArray()}else{target[prop]=null;propsTo[prop]=null}}else{style=getStyle(el,prop)[toCamCase(prop)]||propsFrom[prop];if(Color.isColor(style)){target[prop]=toColorObject(style);propsFrom[prop]=propsFrom[prop]!==undefined?toColorObject(propsFrom[prop]):clone(target[prop],true);propsTo[prop]=toColorObject(propsTo[prop])}else{target[prop]=splitUnits(style);propsFrom[prop]=propsFrom[prop]!==undefined?splitUnits(propsFrom[prop]):clone(target[prop],true);propsTo[prop]=splitUnits(propsTo[prop])}}}}for(prop in propsFrom){if(propsFrom.hasOwnProperty(prop)&&propsFrom[prop]!==null&&(propsTo[prop]===undefined||propsTo[prop]===null)){if(prop==="transform"){if(isTransformSupported){mTarget=new Transform;mTarget.setMatrixValue(getComputedStyle(el).transform||getComputedStyle(el).webkitTransform||"none");mFrom=new TransformMatrix(new Transform,el,propsFrom[prop])}if(mFrom&&mFrom.toCSSString()!==mTarget.toCSSString()){mTo=new TransformMatrix(mTarget.clone());target[prop]=mTarget.toArray();propsTo[prop]=mTo.toArray();propsFrom[prop]=mFrom.toArray()}else{target[prop]=null;propsTo[prop]=null;propsFrom[prop]=null}}else{style=getStyle(el,prop)[toCamCase(prop)];if(Color.isColor(style)){target[prop]=toColorObject(style);propsTo[prop]=clone(target[prop],true);propsFrom[prop]=toColorObject(propsFrom[prop])}else{target[prop]=splitUnits(style);propsFrom[prop]=splitUnits(propsFrom[prop]);propsTo[prop]=clone(target[prop],true)}}}if(target[prop]&&target[prop].isColor){standardizeColors(target[prop],propsFrom[prop],propsTo[prop])}}if(target["transform"]){standardizeMatrices(target,propsFrom,propsTo)}return{target:target,propsTo:propsTo,propsFrom:propsFrom}}},{"./TransformMatrix":180,"./splitUnits":186,"./toCamCase":187,"@marcom/ac-color":141,"@marcom/ac-dom-styles/getStyle":113,"@marcom/ac-feature/cssPropertyAvailable":75,"@marcom/ac-object/clone":123,"@marcom/ac-transform":216}],183:[function(require,module,exports){"use strict";module.exports=function getShorthandTransition(styles){if(styles.transitionProperty){var transition="";var props=styles.transitionProperty.split(", ");var duration=styles.transitionDuration.split(", ");var ease=styles.transitionTimingFunction.replace(/\d+[,]+[\s]/gi,function(match){return match.substr(0,match.length-1)}).split(", ");var delay=styles.transitionDelay.split(", ");var i=props.length;while(i--){transition+=props[i]+" "+duration[i]+" "+ease[i]+" "+delay[i]+", "}return transition.substr(0,transition.length-2)}return false}},{}],184:[function(require,module,exports){"use strict";module.exports=function isCssCubicBezierString(str){return typeof str==="string"&&str.substr(0,13)==="cubic-bezier("}},{}],185:[function(require,module,exports){"use strict";var setStyle=require("@marcom/ac-dom-styles/setStyle");var getStyle=require("@marcom/ac-dom-styles/getStyle");var getShorthandTransition=require("./getShorthandTransition");module.exports=function removeTransitions(el,propsTo){var transition=getStyle(el,"transition","transition-property","transition-duration","transition-timing-function","transition-delay");transition=transition.transition||getShorthandTransition(transition);if(transition&&transition.length){transition=transition.split(",");var deleteCount=0;var prop;var i=transition.length;while(i--){prop=transition[i].trim().split(" ")[0];if(propsTo[prop]!==undefined){transition.splice(i,1);++deleteCount}}if(deleteCount){if(transition.length===0){transition=["all"]}setStyle(el,{transition:transition.join(",").trim()})}}}},{"./getShorthandTransition":183,"@marcom/ac-dom-styles/getStyle":113,"@marcom/ac-dom-styles/setStyle":115}],186:[function(require,module,exports){"use strict";module.exports=function splitUnits(value){value=String(value);if(value.indexOf(" ")>-1){throw new Error("Shorthand CSS is not supported. Please use longhand CSS only.")}var regex=/(\d*\.?\d*)(.*)/;var multipler=1;if(value&&value.substr(0,1)==="-"){value=value.substr(1);multipler=-1}var match=String(value).match(regex);return{value:Number(match[1])*multipler,unit:match[2]}}},{}],187:[function(require,module,exports){"use strict";module.exports=function toCamCase(str){var camelCaseReplace=function(match,group,offset,string){return offset===0&&string.substr(1,3)!=="moz"?group:group.toUpperCase()};return str.replace(/-(\w)/g,camelCaseReplace)}},{}],188:[function(require,module,exports){"use strict";var transitionEnd;module.exports=function transitionEndEvent(){if(transitionEnd){return transitionEnd}var t;var el=document.createElement("fakeelement");var transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){transitionEnd=transitions[t];return transitionEnd}}}()},{}],189:[function(require,module,exports){"use strict";var PageVisibilityManager=require("@marcom/ac-page-visibility").PageVisibilityManager;module.exports=function waitAnimationFrames(callback,frames){if(frames){var rAF=function(cb){if(PageVisibilityManager.isHidden){setTimeout(cb,16)}else{window.requestAnimationFrame(cb)}};var count=0;var waitFunc=function(){if(count===frames){callback.call(this)}else{++count;rAF(waitFunc)}};waitFunc()}else{callback.call(this)}}},{"@marcom/ac-page-visibility":126}],190:[function(require,module,exports){"use strict";var create=require("@marcom/ac-object/create");var Clip=require("@marcom/ac-clip").Clip;var TimelineClip=require("./TimelineClip");var TimelineCallback=require("./TimelineCallback");var TimelineItemList=require("./TimelineItemList");var superProto=Clip.prototype;function Timeline(options){options=options||{};options.ease=options.ease||"linear";options.destroyOnComplete=false;this.options=options;Clip.call(this,{t:0},0,{t:1},options);this._itemList=new TimelineItemList}var proto=Timeline.prototype=create(superProto);Timeline.prototype.constructor=Timeline;proto._update=function(evt){superProto._update.call(this,evt);this._render()};proto.progress=function(progress){superProto.progress.call(this,progress);if(progress!==undefined){this._render()}return this._progress};proto._render=function(){if(this._itemList.length===0){return}var renderTime=this._target.t*this._duration;var aClip=this._itemList.head;var next=aClip;while(next){next=aClip.next;var offsetTime=renderTime-aClip.position;aClip.currentTime(offsetTime);aClip=next}};proto.addClip=function(clip,position){position=position===undefined?this.duration():position;var builtInDelay=clip._delay/1e3;this._itemList.append(new TimelineClip(clip,position+builtInDelay));this._updateDuration()};proto.addCallback=function(fn,position){position=position===undefined?this.duration():position;this._itemList.append(new TimelineCallback(fn,position));this._updateDuration()};proto.remove=function(clipOrFunction){var item=this._itemList.getItem(clipOrFunction);if(item){this._itemList.remove(item);this._updateDuration()}};proto._updateDuration=function(){var lastClip=this._itemList.head;var duration=lastClip.position+lastClip.duration();this._itemList.forEach(function(clip){var newDuration=clip.position+clip.duration();if(newDuration>=duration){lastClip=clip;duration=newDuration}});this.duration(duration)};proto.destroy=function(){var next=this._itemList.head;while(next){var timelineClip=next;next=timelineClip.next;this._itemList.remove(timelineClip)}this._duration=0;return superProto.destroy.call(this)};module.exports=Timeline},{"./TimelineCallback":191,"./TimelineClip":192,"./TimelineItemList":193,"@marcom/ac-clip":139,"@marcom/ac-object/create":124}],191:[function(require,module,exports){"use strict";function TimelineCallback(fn,position){this.callback=fn;this._delay=0;this.position=position;this._hasTriggered=false;this.prev=null;this.next=null}var proto=TimelineCallback.prototype;proto.duration=function(){return 0};proto.currentTime=function(offsetTime){if(offsetTime>=0&&!this._hasTriggered){this.callback();this._hasTriggered=true}if(offsetTime<0&&this._hasTriggered){this.callback();this._hasTriggered=false}return 0};module.exports=TimelineCallback},{}],192:[function(require,module,exports){"use strict";function TimelineClip(clip,position){this.clip=clip;this.position=position;this.duration=this.clip.duration.bind(this.clip);this.lastProgress=-1;this.prev=null;this.next=null}var proto=TimelineClip.prototype;proto.currentTime=function(offsetTime){var clampedProgress=Math.min(1,Math.max(0,offsetTime/this.clip._duration));if(clampedProgress!==clampedProgress){clampedProgress=1}if(this.lastProgress===clampedProgress){return this.lastProgress}if(this.lastProgress===0||clampedProgress===0||this.lastProgress===-1){if(this.clip._storeOnStart){this.clip._storeOnStart(this.clip)}}this.clip._playing=clampedProgress*this.clip._duration===this.clip._duration;this.lastProgress=this.clip.progress(clampedProgress);return this.lastProgress};proto.destroy=function(){this.clip.destroy();this.prev=null;this.next=null;this.duration=null};module.exports=TimelineClip},{}],193:[function(require,module,exports){"use strict";var TimelineClip=require("./TimelineClip");var TimelineCallback=require("./TimelineCallback");var TimelineItemList=function(){this.head=null;this.tail=null;this.length=0};var proto=TimelineItemList.prototype;proto.append=function(clip){clip.prev=null;clip.next=null;if(this.tail){this.tail.next=clip;clip.prev=this.tail}else{this.head=clip}this.tail=clip;this.length++};proto.remove=function(clip){if(clip===this.head){this.head=this.head.next}else if(clip===this.tail){this.tail=this.tail.prev}if(clip.prev){clip.prev.next=clip.next}if(clip.next){clip.next.prev=clip.prev}clip.next=clip.prev=null;if(this.head===null){this.tail=null}this.length--};proto.getItem=function(clipOrFunction){var next=this.head;while(next){var item=next;if(item instanceof TimelineClip&&item.clip===clipOrFunction||item instanceof TimelineCallback&&item.callback===clipOrFunction){return item}next=item.next}return null};proto.forEach=function(callback){var i=0;var next=this.head;while(next){var clip=next;callback(clip,i,this.length);next=clip.next}};proto.destroy=function(){while(this.head){var item=this.head;this.remove(item);item.destroy()}};module.exports=TimelineItemList},{"./TimelineCallback":191,"./TimelineClip":192}],194:[function(require,module,exports){module.exports=clone;function clone(a){var out=new Float32Array(16);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}},{}],195:[function(require,module,exports){module.exports=create;function create(){var out=new Float32Array(16);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}},{}],196:[function(require,module,exports){module.exports=fromRotationTranslation;function fromRotationTranslation(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;out[0]=1-(yy+zz);out[1]=xy+wz;out[2]=xz-wy;out[3]=0;out[4]=xy-wz;out[5]=1-(xx+zz);out[6]=yz+wx;out[7]=0;out[8]=xz+wy;out[9]=yz-wx;out[10]=1-(xx+yy);out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}},{}],197:[function(require,module,exports){module.exports=identity;function identity(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}},{}],198:[function(require,module,exports){module.exports=invert;function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det){return null}det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a02*b10-a01*b11-a03*b09)*det;out[2]=(a31*b05-a32*b04+a33*b03)*det;out[3]=(a22*b04-a21*b05-a23*b03)*det;out[4]=(a12*b08-a10*b11-a13*b07)*det;out[5]=(a00*b11-a02*b08+a03*b07)*det;out[6]=(a32*b02-a30*b05-a33*b01)*det;out[7]=(a20*b05-a22*b02+a23*b01)*det;out[8]=(a10*b10-a11*b08+a13*b06)*det;out[9]=(a01*b08-a00*b10-a03*b06)*det;out[10]=(a30*b04-a31*b02+a33*b00)*det;out[11]=(a21*b02-a20*b04-a23*b00)*det;out[12]=(a11*b07-a10*b09-a12*b06)*det;out[13]=(a00*b09-a01*b07+a02*b06)*det;out[14]=(a31*b01-a30*b03-a32*b00)*det;out[15]=(a20*b03-a21*b01+a22*b00)*det;return out}},{}],199:[function(require,module,exports){module.exports=multiply;function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=b0*a00+b1*a10+b2*a20+b3*a30;out[1]=b0*a01+b1*a11+b2*a21+b3*a31;out[2]=b0*a02+b1*a12+b2*a22+b3*a32;out[3]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[4];b1=b[5];b2=b[6];b3=b[7];out[4]=b0*a00+b1*a10+b2*a20+b3*a30;out[5]=b0*a01+b1*a11+b2*a21+b3*a31;out[6]=b0*a02+b1*a12+b2*a22+b3*a32;out[7]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[8];b1=b[9];b2=b[10];b3=b[11];out[8]=b0*a00+b1*a10+b2*a20+b3*a30;out[9]=b0*a01+b1*a11+b2*a21+b3*a31;out[10]=b0*a02+b1*a12+b2*a22+b3*a32;out[11]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[12];b1=b[13];b2=b[14];b3=b[15];out[12]=b0*a00+b1*a10+b2*a20+b3*a30;out[13]=b0*a01+b1*a11+b2*a21+b3*a31;out[14]=b0*a02+b1*a12+b2*a22+b3*a32;out[15]=b0*a03+b1*a13+b2*a23+b3*a33;return out}},{}],200:[function(require,module,exports){module.exports=rotate;function rotate(out,a,rad,axis){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22;if(Math.abs(len)<1e-6){return null}len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;out[0]=a00*b00+a10*b01+a20*b02;out[1]=a01*b00+a11*b01+a21*b02;out[2]=a02*b00+a12*b01+a22*b02;out[3]=a03*b00+a13*b01+a23*b02;out[4]=a00*b10+a10*b11+a20*b12;out[5]=a01*b10+a11*b11+a21*b12;out[6]=a02*b10+a12*b11+a22*b12;out[7]=a03*b10+a13*b11+a23*b12;out[8]=a00*b20+a10*b21+a20*b22;out[9]=a01*b20+a11*b21+a21*b22;out[10]=a02*b20+a12*b21+a22*b22;out[11]=a03*b20+a13*b21+a23*b22;if(a!==out){out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}return out}},{}],201:[function(require,module,exports){module.exports=rotateX;function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[4]=a10*c+a20*s;out[5]=a11*c+a21*s;out[6]=a12*c+a22*s;out[7]=a13*c+a23*s;out[8]=a20*c-a10*s;out[9]=a21*c-a11*s;out[10]=a22*c-a12*s;out[11]=a23*c-a13*s;return out}},{}],202:[function(require,module,exports){module.exports=rotateY;function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out}},{}],203:[function(require,module,exports){module.exports=rotateZ;function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out}},{}],204:[function(require,module,exports){module.exports=scale;function scale(out,a,v){var x=v[0],y=v[1],z=v[2];out[0]=a[0]*x;out[1]=a[1]*x;out[2]=a[2]*x;out[3]=a[3]*x;out[4]=a[4]*y;out[5]=a[5]*y;out[6]=a[6]*y;out[7]=a[7]*y;out[8]=a[8]*z;out[9]=a[9]*z;out[10]=a[10]*z;out[11]=a[11]*z;out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}},{}],205:[function(require,module,exports){module.exports=translate;function translate(out,a,v){var x=v[0],y=v[1],z=v[2],a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23;if(a===out){out[12]=a[0]*x+a[4]*y+a[8]*z+a[12];out[13]=a[1]*x+a[5]*y+a[9]*z+a[13];out[14]=a[2]*x+a[6]*y+a[10]*z+a[14];out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]}else{a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a03;out[4]=a10;out[5]=a11;out[6]=a12;out[7]=a13;out[8]=a20;out[9]=a21;out[10]=a22;out[11]=a23;out[12]=a00*x+a10*y+a20*z+a[12];out[13]=a01*x+a11*y+a21*z+a[13];out[14]=a02*x+a12*y+a22*z+a[14];out[15]=a03*x+a13*y+a23*z+a[15]}return out}},{}],206:[function(require,module,exports){module.exports=transpose;function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a01;out[6]=a[9];out[7]=a[13];out[8]=a02;out[9]=a12;out[11]=a[14];out[12]=a03;out[13]=a13;out[14]=a23}else{out[0]=a[0];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a[1];out[5]=a[5];out[6]=a[9];out[7]=a[13];out[8]=a[2];out[9]=a[6];out[10]=a[10];out[11]=a[14];out[12]=a[3];out[13]=a[7];out[14]=a[11];out[15]=a[15]}return out}},{}],207:[function(require,module,exports){module.exports=create;function create(){var out=new Float32Array(3);out[0]=0;out[1]=0;out[2]=0;return out}},{}],208:[function(require,module,exports){module.exports=cross;function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];out[0]=ay*bz-az*by;out[1]=az*bx-ax*bz;out[2]=ax*by-ay*bx;return out}},{}],209:[function(require,module,exports){module.exports=dot;function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}},{}],210:[function(require,module,exports){module.exports=fromValues;function fromValues(x,y,z){var out=new Float32Array(3);out[0]=x;out[1]=y;out[2]=z;return out}},{}],211:[function(require,module,exports){module.exports=length;function length(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)}},{}],212:[function(require,module,exports){module.exports=normalize;function normalize(out,a){var x=a[0],y=a[1],z=a[2];var len=x*x+y*y+z*z;if(len>0){len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;out[2]=a[2]*len}return out}},{}],213:[function(require,module,exports){module.exports=create;function create(){var out=new Float32Array(4);out[0]=0;out[1]=0;out[2]=0;out[3]=0;return out}},{}],214:[function(require,module,exports){module.exports=fromValues;function fromValues(x,y,z,w){var out=new Float32Array(4);out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out}},{}],215:[function(require,module,exports){module.exports=transformMat4;function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w;out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w;out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w;out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w;return out}},{}],216:[function(require,module,exports){"use strict";module.exports={Transform:require("./ac-transform/Transform")}},{"./ac-transform/Transform":217}],217:[function(require,module,exports){"use strict";var mat4=require("./gl-matrix/mat4");var vec3=require("./gl-matrix/vec3");var vec4=require("./gl-matrix/vec4");var degToRad=Math.PI/180;var radToDeg=180/Math.PI;var m11=0,mA=0,m12=1,mB=1,m13=2,m14=3;var m21=4,mC=4,m22=5,mD=5,m23=6,m24=7;var m31=8,m32=9,m33=10,m34=11;var m41=12,mE=12,m42=13,mF=13,m43=14,m44=15;function Transform(){this.m=mat4.create()}var proto=Transform.prototype;proto.rotateX=function(deg){var rad=degToRad*deg;mat4.rotateX(this.m,this.m,rad);return this};proto.rotateY=function(deg){var rad=degToRad*deg;mat4.rotateY(this.m,this.m,rad);return this};proto.rotateZ=function(deg){var rad=degToRad*deg;mat4.rotateZ(this.m,this.m,rad);return this};proto.rotate=proto.rotateZ;proto.rotate3d=function(x,y,z,deg){if(y===null||y===undefined)y=x;if(z===null||y===undefined)z=x;var rad=degToRad*deg;mat4.rotate(this.m,this.m,rad,[x,y,z]);return this};proto.rotateAxisAngle=proto.rotate3d;proto.scale=function(sx,sy){sy=sy||sx;mat4.scale(this.m,this.m,[sx,sy,1]);return this};proto.scaleX=function(sx){mat4.scale(this.m,this.m,[sx,1,1]);return this};proto.scaleY=function(sy){mat4.scale(this.m,this.m,[1,sy,1]);return this};proto.scaleZ=function(sz){mat4.scale(this.m,this.m,[1,1,sz]);return this};proto.scale3d=function(sx,sy,sz){mat4.scale(this.m,this.m,[sx,sy,sz]);return this};proto.skew=function(ax,ay){if(ay===null||ay===undefined){return this.skewX(ax)}ax=degToRad*ax;ay=degToRad*ay;var transform=mat4.create();transform[mC]=Math.tan(ax);transform[mB]=Math.tan(ay);mat4.multiply(this.m,this.m,transform);return this};proto.skewX=function(ax){ax=degToRad*ax;var transform=mat4.create();transform[mC]=Math.tan(ax);mat4.multiply(this.m,this.m,transform);return this};proto.skewY=function(ay){ay=degToRad*ay;var transform=mat4.create();transform[mB]=Math.tan(ay);mat4.multiply(this.m,this.m,transform);return this};proto.translate=function(tx,ty){ty=ty||0;mat4.translate(this.m,this.m,[tx,ty,0]);return this};proto.translate3d=function(tx,ty,tz){mat4.translate(this.m,this.m,[tx,ty,tz]);return this};proto.translateX=function(tx){mat4.translate(this.m,this.m,[tx,0,0]);return this};proto.translateY=function(ty){mat4.translate(this.m,this.m,[0,ty,0]);return this};proto.translateZ=function(tz){mat4.translate(this.m,this.m,[0,0,tz]);return this};proto.perspective=function(depth){var t=mat4.create();if(depth!==0){t[m34]=-1/depth}mat4.multiply(this.m,this.m,t)};proto.inverse=function(){var t=this.clone();t.m=mat4.invert(t.m,this.m);return t};proto.reset=function(){mat4.identity(this.m);return this};proto.getTranslateXY=function(){var m=this.m;if(this.isAffine()){return[m[mE],m[mF]]}return[m[m41],m[m42]]};proto.getTranslateXYZ=function(){var m=this.m;if(this.isAffine()){return[m[mE],m[mF],0]}return[m[m41],m[m42],m[m43]]};proto.getTranslateX=function(){var m=this.m;if(this.isAffine()){return m[mE]}return m[m41]};proto.getTranslateY=function(){var m=this.m;if(this.isAffine()){return m[mF]}return m[m42]};proto.getTranslateZ=function(){var m=this.m;if(this.isAffine()){return 0}return m[m43]};proto.clone=function(){var t=new Transform;t.m=mat4.clone(this.m);return t};proto.toArray=function(){var m=this.m;if(this.isAffine()){return[m[mA],m[mB],m[mC],m[mD],m[mE],m[mF]]}return[m[m11],m[m12],m[m13],m[m14],m[m21],m[m22],m[m23],m[m24],m[m31],m[m32],m[m33],m[m34],m[m41],m[m42],m[m43],m[m44]]};proto.fromArray=function(arr){this.m=Array.prototype.slice.call(arr);return this};proto.setMatrixValue=function(string){string=String(string).trim();var m=mat4.create();if(string==="none"){this.m=m;return this}var type=string.slice(0,string.indexOf("(")),parts,i;if(type==="matrix3d"){parts=string.slice(9,-1).split(",");for(i=0;i<parts.length;i++){m[i]=parseFloat(parts[i])}}else if(type==="matrix"){parts=string.slice(7,-1).split(",");for(i=parts.length;i--;)parts[i]=parseFloat(parts[i]);m[m11]=parts[0];m[m12]=parts[1];m[m41]=parts[4];m[m21]=parts[2];m[m22]=parts[3];m[m42]=parts[5]}else{throw new TypeError("Invalid Matrix Value")}this.m=m;return this};var isZero=function(val){return Math.abs(val)<1e-4};proto.decompose=function(convertToDegrees){convertToDegrees=convertToDegrees||false;var matrix=mat4.clone(this.m);var translation=vec3.create();var scale=vec3.create();var skew=vec3.create();var perspective=vec4.create();var quaternion=vec4.create();var eulerRotation=vec3.create();for(var i=0;i<16;i++)matrix[i]/=matrix[m44];var perspectiveMatrix=mat4.clone(matrix);perspectiveMatrix[m14]=0;perspectiveMatrix[m24]=0;perspectiveMatrix[m34]=0;perspectiveMatrix[m44]=1;var a03=matrix[3],a13=matrix[7],a23=matrix[11],a30=matrix[12],a31=matrix[13],a32=matrix[14],a33=matrix[15];var rightHandSide=vec4.create();if(!isZero(matrix[m14])||!isZero(matrix[m24])||!isZero(matrix[m34])){rightHandSide[0]=matrix[m14];rightHandSide[1]=matrix[m24];rightHandSide[2]=matrix[m34];rightHandSide[3]=matrix[m44];var inversePerspectiveMatrix=mat4.invert(mat4.create(),perspectiveMatrix);var transposedInversePerspectiveMatrix=mat4.transpose(mat4.create(),inversePerspectiveMatrix);perspective=vec4.transformMat4(perspective,rightHandSide,transposedInversePerspectiveMatrix)}else{perspective=vec4.fromValues(0,0,0,1)}translation[0]=a30;translation[1]=a31;translation[2]=a32;var row=[vec3.create(),vec3.create(),vec3.create()];row[0][0]=matrix[0];row[0][1]=matrix[1];row[0][2]=matrix[2];row[1][0]=matrix[4];row[1][1]=matrix[5];row[1][2]=matrix[6];row[2][0]=matrix[8];row[2][1]=matrix[9];row[2][2]=matrix[10];scale[0]=vec3.length(row[0]);vec3.normalize(row[0],row[0]);skew[0]=vec3.dot(row[0],row[1]);row[1]=this._combine(row[1],row[0],1,-skew[0]);scale[1]=vec3.length(row[1]);vec3.normalize(row[1],row[1]);skew[0]/=scale[1];skew[1]=vec3.dot(row[0],row[2]);row[2]=this._combine(row[2],row[0],1,-skew[1]);skew[2]=vec3.dot(row[1],row[2]);row[2]=this._combine(row[2],row[1],1,-skew[2]);scale[2]=vec3.length(row[2]);vec3.normalize(row[2],row[2]);skew[1]/=scale[2];skew[2]/=scale[2];var pdum3=vec3.cross(vec3.create(),row[1],row[2]);if(vec3.dot(row[0],pdum3)<0){for(i=0;i<3;i++){scale[i]*=-1;row[i][0]*=-1;row[i][1]*=-1;row[i][2]*=-1}}quaternion[0]=.5*Math.sqrt(Math.max(1+row[0][0]-row[1][1]-row[2][2],0));quaternion[1]=.5*Math.sqrt(Math.max(1-row[0][0]+row[1][1]-row[2][2],0));quaternion[2]=.5*Math.sqrt(Math.max(1-row[0][0]-row[1][1]+row[2][2],0));quaternion[3]=.5*Math.sqrt(Math.max(1+row[0][0]+row[1][1]+row[2][2],0));if(row[2][1]>row[1][2])quaternion[0]=-quaternion[0];if(row[0][2]>row[2][0])quaternion[1]=-quaternion[1];if(row[1][0]>row[0][1])quaternion[2]=-quaternion[2];var axisAngle=vec4.fromValues(quaternion[0],quaternion[1],quaternion[2],2*Math.acos(quaternion[3]));var rotation=this._rotationFromQuat(quaternion);if(convertToDegrees){skew[0]=Math.round(skew[0]*radToDeg*100)/100;skew[1]=Math.round(skew[1]*radToDeg*100)/100;skew[2]=Math.round(skew[2]*radToDeg*100)/100;rotation[0]=Math.round(rotation[0]*radToDeg*100)/100;rotation[1]=Math.round(rotation[1]*radToDeg*100)/100;rotation[2]=Math.round(rotation[2]*radToDeg*100)/100;axisAngle[3]=Math.round(axisAngle[3]*radToDeg*100)/100}return{translation:translation,scale:scale,skew:skew,perspective:perspective,quaternion:quaternion,eulerRotation:rotation,axisAngle:axisAngle}};proto.recompose=function(translation,scale,skew,perspective,quaternion){translation=translation||vec3.create();scale=scale||vec3.create();skew=skew||vec3.create();perspective=perspective||vec4.create();quaternion=quaternion||vec4.create();var matrix=mat4.fromRotationTranslation(mat4.create(),quaternion,translation);matrix[m14]=perspective[0];matrix[m24]=perspective[1];matrix[m34]=perspective[2];matrix[m44]=perspective[3];var temp=mat4.create();if(skew[2]!==0){temp[m32]=skew[2];mat4.multiply(matrix,matrix,temp)}if(skew[1]!==0){temp[m32]=0;temp[m31]=skew[1];mat4.multiply(matrix,matrix,temp)}if(skew[0]){temp[m31]=0;temp[4]=skew[0];mat4.multiply(matrix,matrix,temp)}mat4.scale(matrix,matrix,scale);this.m=matrix;return this};proto.isAffine=function(){return this.m[m13]===0&&this.m[m14]===0&&this.m[m23]===0&&this.m[m24]===0&&this.m[m31]===0&&this.m[m32]===0&&this.m[m33]===1&&this.m[m34]===0&&this.m[m43]===0&&this.m[m44]===1};proto.toString=function(){var m=this.m;if(this.isAffine()){return"matrix("+m[mA]+", "+m[mB]+", "+m[mC]+", "+m[mD]+", "+m[mE]+", "+m[mF]+")"}return"matrix3d("+m[m11]+", "+m[m12]+", "+m[m13]+", "+m[m14]+", "+m[m21]+", "+m[m22]+", "+m[m23]+", "+m[m24]+", "+m[m31]+", "+m[m32]+", "+m[m33]+", "+m[m34]+", "+m[m41]+", "+m[m42]+", "+m[m43]+", "+m[m44]+")"};proto.toCSSString=proto.toString;proto._combine=function(A,B,ascl,bscl){var result=vec3.create();result[0]=ascl*A[0]+bscl*B[0];result[1]=ascl*A[1]+bscl*B[1];result[2]=ascl*A[2]+bscl*B[2];return result};proto._matrix2dToMat4=function(matrix){var out=mat4.create();for(var i=0;i<4;i++){for(var j=0;j<4;j++){out[i*4+j]=matrix[i][j]}}return out};proto._mat4ToMatrix2d=function(ref){var matrix=[];for(var i=0;i<4;i++){matrix[i]=[];for(var j=0;j<4;j++){matrix[i][j]=ref[i*4+j]}}return matrix};proto._rotationFromQuat=function(q){var sqw=q[3]*q[3];var sqx=q[0]*q[0];var sqy=q[1]*q[1];var sqz=q[2]*q[2];var unit=sqx+sqy+sqz+sqw;var test=q[0]*q[1]+q[2]*q[3];var x,y,z;if(test>.499*unit){y=2*Math.atan2(q[0],q[3]);z=Math.PI/2;x=0;return vec3.fromValues(x,y,z)}if(test<-.499*unit){y=-2*Math.atan2(q[0],q[3]);z=-Math.PI/2;x=0;return vec3.fromValues(x,y,z)}y=Math.atan2(2*q[1]*q[3]-2*q[0]*q[2],sqx-sqy-sqz+sqw);z=Math.asin(2*test/unit);x=Math.atan2(2*q[0]*q[3]-2*q[1]*q[2],-sqx+sqy-sqz+sqw);return vec3.fromValues(x,y,z)};module.exports=Transform},{"./gl-matrix/mat4":218,"./gl-matrix/vec3":219,"./gl-matrix/vec4":220}],218:[function(require,module,exports){var mat4={create:require("gl-mat4/create"),rotate:require("gl-mat4/rotate"),rotateX:require("gl-mat4/rotateX"),rotateY:require("gl-mat4/rotateY"),rotateZ:require("gl-mat4/rotateZ"),scale:require("gl-mat4/scale"),multiply:require("gl-mat4/multiply"),translate:require("gl-mat4/translate"),invert:require("gl-mat4/invert"),clone:require("gl-mat4/clone"),transpose:require("gl-mat4/transpose"),identity:require("gl-mat4/identity"),fromRotationTranslation:require("gl-mat4/fromRotationTranslation")};module.exports=mat4},{"gl-mat4/clone":194,"gl-mat4/create":195,"gl-mat4/fromRotationTranslation":196,"gl-mat4/identity":197,"gl-mat4/invert":198,"gl-mat4/multiply":199,"gl-mat4/rotate":200,"gl-mat4/rotateX":201,"gl-mat4/rotateY":202,"gl-mat4/rotateZ":203,"gl-mat4/scale":204,"gl-mat4/translate":205,"gl-mat4/transpose":206}],219:[function(require,module,exports){var vec3={create:require("gl-vec3/create"),dot:require("gl-vec3/dot"),normalize:require("gl-vec3/normalize"),length:require("gl-vec3/length"),cross:require("gl-vec3/cross"),fromValues:require("gl-vec3/fromValues")};module.exports=vec3},{"gl-vec3/create":207,"gl-vec3/cross":208,"gl-vec3/dot":209,"gl-vec3/fromValues":210,"gl-vec3/length":211,"gl-vec3/normalize":212}],220:[function(require,module,exports){var vec4={create:require("gl-vec4/create"),transformMat4:require("gl-vec4/transformMat4"),fromValues:require("gl-vec4/fromValues")};module.exports=vec4},{"gl-vec4/create":213,"gl-vec4/fromValues":214,"gl-vec4/transformMat4":215}],221:[function(require,module,exports){"use strict";var Clip=require("@marcom/ac-eclipse").Clip;var cssPropertyAvailable=require("@marcom/ac-feature/cssPropertyAvailable");module.exports=function fade(el,from,to,duration,options){if(cssPropertyAvailable("opacity")){options=options||{};if(duration){options.autoplay=options.autoplay===false?options.autoplay:true;options.propsFrom=options.propsFrom||{};options.propsFrom.opacity=from;if(options.autoplay){return Clip.to(el,duration,{opacity:to},options)}return new Clip(el,duration,{opacity:to},options)}el.style.opacity=to;if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}else{el.style.visibility=to?"visible":"hidden";if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}}},{"@marcom/ac-eclipse":173,"@marcom/ac-feature/cssPropertyAvailable":75}],222:[function(require,module,exports){"use strict";var Clip=require("@marcom/ac-eclipse").Clip;var cssPropertyAvailable=require("@marcom/ac-feature/cssPropertyAvailable");module.exports=function fadeIn(el,duration,options){var OPACITY=1;options=options||{};if(cssPropertyAvailable("opacity")){if(duration){options.autoplay=options.autoplay===false?options.autoplay:true;if(options.autoplay){return Clip.to(el,duration,{opacity:OPACITY},options)}return new Clip(el,duration,{opacity:OPACITY},options)}el.style.opacity=OPACITY;if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}else{el.style.visibility="visible";if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}}},{"@marcom/ac-eclipse":173,"@marcom/ac-feature/cssPropertyAvailable":75}],223:[function(require,module,exports){"use strict";var Clip=require("@marcom/ac-eclipse").Clip;var cssPropertyAvailable=require("@marcom/ac-feature/cssPropertyAvailable");module.exports=function fadeOut(el,duration,options){var OPACITY=0;options=options||{};if(cssPropertyAvailable("opacity")){if(duration){options.autoplay=options.autoplay===false?options.autoplay:true;if(options.autoplay){return Clip.to(el,duration,{opacity:OPACITY},options)}return new Clip(el,duration,{opacity:OPACITY},options)}el.style.opacity=OPACITY;if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}else{el.style.visibility="hidden";if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}}},{"@marcom/ac-eclipse":173,"@marcom/ac-feature/cssPropertyAvailable":75}],224:[function(require,module,exports){"use strict";var Clip=require("@marcom/ac-eclipse").Clip;var ac_dom_styles=require("@marcom/ac-dom-styles");module.exports=function move(el,x,y,duration,options){options=options||{};options.autoplay=options.autoplay===false?options.autoplay:true;var storedOnStart=options.onStart||null;var storedOnComplete=options.onComplete||null;var to;to={transform:{translateX:x+"px",translateY:y+"px"}};if(duration){options.onStart=function(){el.style.willChange="transform";if(storedOnStart!==null){storedOnStart.call(this)}};options.onComplete=function(){el.style.willChange="";if(storedOnComplete!==null){storedOnComplete.call(this)}};if(options.autoplay){return Clip.to(el,duration,to,options)}return new Clip(el,duration,to,options)}ac_dom_styles.setStyle(el,to);if(typeof options.onStart==="function"){options.onStart()}if(typeof options.onComplete==="function"){options.onComplete()}}},{"@marcom/ac-dom-styles":112,"@marcom/ac-eclipse":173}],225:[function(require,module,exports){"use strict";var BrowserPrefixed=require("@marcom/ac-browser-prefixed");var Transform=require("@marcom/ac-transform").Transform;var move=require("./move");module.exports=function moveX(el,x,duration,options){var transform=new Transform;transform.setMatrixValue(getComputedStyle(el)[BrowserPrefixed.transform]);return move(el,x,transform.getTranslateY(),duration,options)}},{"./move":224,"@marcom/ac-browser-prefixed":134,"@marcom/ac-transform":216}],226:[function(require,module,exports){"use strict";var Clip=require("@marcom/ac-eclipse").Clip;module.exports=function scroll(el,x,y,duration,options){options=options||{};options.autoplay=options.autoplay===false?options.autoplay:true;var isWindow=el===window;var currentScrollPositionX;var currentScrollPositionY;if(isWindow){currentScrollPositionX=el.pageXOffset;currentScrollPositionY=el.pageYOffset}else{currentScrollPositionX=el.scrollLeft;currentScrollPositionY=el.scrollTop}var scrollPosition={x:currentScrollPositionX,y:currentScrollPositionY};var to={x:x,y:y};if(typeof options.onDraw==="function"){var storeOnDraw=options.onDraw}var newOnDraw=function(evt){if(isWindow){el.scrollTo(scrollPosition.x,scrollPosition.y)}else{el.scrollLeft=scrollPosition.x;el.scrollTop=scrollPosition.y}if(storeOnDraw){storeOnDraw.call(this,evt)}};options.onDraw=newOnDraw;if(options.autoplay){return Clip.to(scrollPosition,duration,to,options)}return new Clip(scrollPosition,duration,to,options)}},{"@marcom/ac-eclipse":173}],227:[function(require,module,exports){"use strict";var scroll=require("./scroll");module.exports=function scrollX(el,x,duration,options){var isWindow=el===window;var currentScrollPositionY;if(isWindow){currentScrollPositionY=el.pageYOffset}else{currentScrollPositionY=el.scrollTop}return scroll(el,x,currentScrollPositionY,duration,options)}},{"./scroll":226}],228:[function(require,module,exports){"use strict";var ac_classList=require("@marcom/ac-classlist");var analyticsManager=require("./singletons/analyticsManager");var create=require("@marcom/ac-object/create");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var Item=require("./Item");function Gallery(options){options=options||{};this._wrapAround=options.wrapAround||false;this._itemType=options.itemType||Item;this._items=[];this._itemsIdLookup={};this.showNext=this.showNext.bind(this);this.showPrevious=this.showPrevious.bind(this);this._update=this._update.bind(this);this._updateItems=this._updateItems.bind(this);EventEmitterMicro.call(this);Gallery._add(this,options.analyticsOptions)}Gallery.FADE="fade";Gallery.FADE_SELECTOR="[data-ac-gallery-fade]";Gallery.SLIDE="slide";Gallery.SLIDE_SELECTOR="[data-ac-gallery-slide]";Gallery.UPDATE="update";Gallery.UPDATE_COMPLETE="update:complete";var superProto=EventEmitterMicro.prototype;var proto=Gallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}else if(this._items.indexOf(item)>-1){return item}if(typeof index==="number"){this._items.splice(index,0,item)}else{this._items.push(item)}if(this._items.length===1){item.show();this._setCurrentItem(item)}else{item.hide();if(this.getNextItem()===item){this._setNextItem(item)}if(this.getPreviousItem()===item){this._setPreviousItem(item)}}if(item.getElementId()!==null){this._itemsIdLookup[item.getElementId()]=item}item.on(Item.SELECTED,this._update);return item};proto.removeItem=function(item,options){options=options||{};if(typeof item==="number"){item=this._items[item]}var index=this._items.indexOf(item);if(index>-1){var nextItem=this.getNextItem();var previousItem=this.getPreviousItem();this._items.splice(index,1);item.off(Item.SELECTED,this._update);if(nextItem===item){this._setNextItem(this.getNextItem())}if(previousItem===item){this._setPreviousItem(this.getPreviousItem())}}if(item===this._currentItem&&this._items.length&&options.setCurrentItem!==false){this._update({item:this._items[0]});this._setLastItem(null)}if(options.destroyItem&&item.getElement()){item.destroy()}return item};proto.show=function(item,options){if(typeof item==="number"){item=this._items[item]}else if(typeof item==="string"){item=this._itemsIdLookup[item]}if(item){options=options||{};this._update({item:item,interactionEvent:options.interactionEvent})}return item||null};proto.showNext=function(options){var item=this.getNextItem();if(item){this.show(item,options)}return item};proto.showPrevious=function(options){var item=this.getPreviousItem();if(item){this.show(item,options)}return item};proto.isInView=function(){return this._currentItem&&this._currentItem.isInView()};proto.getTotalItems=function(){return this._items.length};proto.getItems=function(){return this._items};proto.getItem=function(key){if(typeof key==="number"){return this.getItemAt(key)}else if(typeof key==="string"){return this.getItemById(key)}};proto.getItemAt=function(index){return this._items[index]||null};proto.getItemById=function(id){return this._itemsIdLookup[id]||null};proto.getItemIndex=function(item){return this._items.indexOf(item)};proto.getCurrentItem=function(){return this._currentItem||null};proto.getLastItem=function(){return this._lastItem||null};proto.getNextItem=function(){var item;var index=this._items.indexOf(this._currentItem);if(index<this._items.length-1){item=this._items[index+1]}else if(this._wrapAround){item=this._items[0]}return item||null};proto.getPreviousItem=function(){var item;var index=this._items.indexOf(this._currentItem);if(index>0){item=this._items[index-1]}else if(this._wrapAround){item=this._items[this._items.length-1]}return item||null};proto.getId=function(){return this._id};proto.destroy=function(options){options=options||{};if(options.destroyItems===undefined){options.destroyItems=true}this._setCurrentItem(null);if(options.destroyItems){var item;while(this._items.length){item=this._items[0];item.off(Item.SELECTED,this._update);this.removeItem(item,{destroyItem:true,setCurrentItem:false})}}this._items=null;this._itemsIdLookup=null;Gallery._remove(this);return superProto.destroy.call(this)};proto._setCurrentItem=function(item){if(this._currentItem&&this._currentItem.getElement()&&this._currentItem!==item){ac_classList.remove(this._currentItem.getElement(),Item.CSS_CURRENT_ITEM);this._setLastItem(this._currentItem)}this._currentItem=item;if(this._currentItem&&this._currentItem.getElement()){ac_classList.add(this._currentItem.getElement(),Item.CSS_CURRENT_ITEM);this._setNextItem(this.getNextItem());this._setPreviousItem(this.getPreviousItem())}};proto._setLastItem=function(item){if(this._lastItem&&this._lastItem.getElement()&&this._lastItem!==item){ac_classList.remove(this._lastItem.getElement(),Item.CSS_LAST_ITEM)}this._lastItem=item;if(this._lastItem&&this._lastItem.getElement()){ac_classList.add(this._lastItem.getElement(),Item.CSS_LAST_ITEM)}};proto._setNextItem=function(item){if(this._nextItem&&this._nextItem.getElement()&&this._nextItem!==item){ac_classList.remove(this._nextItem.getElement(),Item.CSS_NEXT_ITEM)}this._nextItem=item;if(this._nextItem&&this._nextItem.getElement()){ac_classList.add(this._nextItem.getElement(),Item.CSS_NEXT_ITEM)}};proto._setPreviousItem=function(item){if(this._previousItem&&this._previousItem.getElement()&&this._previousItem!==item){ac_classList.remove(this._previousItem.getElement(),Item.CSS_PREVIOUS_ITEM)}this._previousItem=item;if(this._previousItem&&this._previousItem.getElement()){ac_classList.add(this._previousItem.getElement(),Item.CSS_PREVIOUS_ITEM)}};proto._updateItems=function(items,silent){if(items.outgoing[0]){items.outgoing[0].hide()}items.incoming[0].show();if(!silent){this.trigger(Gallery.UPDATE_COMPLETE,items)}};proto._update=function(evt){var hasChanged=this._currentItem!==evt.item;if(hasChanged){this._setCurrentItem(evt.item)}var items={incoming:[evt.item],outgoing:this._lastItem?[this._lastItem]:[],interactionEvent:evt.interactionEvent||null};if(hasChanged){this.trigger(Gallery.UPDATE,items)}this._updateItems(items,!hasChanged)};Gallery._instantiate=function(){this._galleries=[];this._idCounter=0;return this};Gallery._add=function(gallery,analyticsOptions){this._galleries.push(gallery);gallery._id=++this._idCounter;analyticsManager.add(gallery,analyticsOptions)};Gallery._remove=function(gallery){var index=this._galleries.indexOf(gallery);if(index>-1){this._galleries.splice(index,1);analyticsManager.remove(gallery)}};Gallery.getAll=function(){return Array.prototype.slice.call(this._galleries)};Gallery.getAllInView=function(){var inView=[];var index=this._galleries.length;while(index--){if(this._galleries[index].isInView()){inView.push(this._galleries[index])}}return inView};Gallery.destroyAll=function(){var i=this._galleries.length;while(i--){this._galleries[i].destroy()}this._galleries=[]};module.exports=Gallery._instantiate()},{"./Item":229,"./singletons/analyticsManager":243,"@marcom/ac-classlist":8,"@marcom/ac-event-emitter-micro":116,"@marcom/ac-object/create":124}],229:[function(require,module,exports){"use strict";var ac_classList=require("@marcom/ac-classlist");var ac_addEventListener=require("@marcom/ac-dom-events/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/removeEventListener");var preventDefault=require("@marcom/ac-dom-events/preventDefault");var isInViewport=require("@marcom/ac-dom-metrics/isInViewport");var getPercentInViewport=require("@marcom/ac-dom-metrics/getPercentInViewport");var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var create=require("@marcom/ac-object/create");var focusableSelectors=require("./helpers/focusableSelectors");var keyMap=require("@marcom/ac-keyboard/keyMap");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var Keyboard=require("@marcom/ac-keyboard");var CSS_CURRENT="current";function Item(el){this._el=el;this._triggerKeys=[];this._triggerEls={};this._isShown=false;this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this);this._onTriggered=this._onTriggered.bind(this);this._el.setAttribute("role","tabpanel");this._focusableEls=ac_querySelectorAll(focusableSelectors,el);EventEmitterMicro.call(this)}Item.CSS_CURRENT_ITEM="ac-gallery-currentitem";Item.CSS_LAST_ITEM="ac-gallery-lastitem";Item.CSS_NEXT_ITEM="ac-gallery-nextitem";Item.CSS_PREVIOUS_ITEM="ac-gallery-previousitem";Item.SELECTED="selected";Item.SHOW="show";Item.HIDE="hide";var proto=Item.prototype=create(EventEmitterMicro.prototype);proto.show=function(){this._isShown=true;this._addCurrentClassToTriggers();this._setTabIndexOnFocusableItems(null);this._el.removeAttribute("aria-hidden");this.trigger(Item.SHOW,this)};proto.hide=function(){this._isShown=false;this._removeCurrentClassFromTriggers();this._setTabIndexOnFocusableItems("-1");this._el.setAttribute("aria-hidden","true");this.trigger(Item.HIDE,this)};proto.addElementTrigger=function(el,eventType){eventType=eventType||"click";if(this._triggerEls[eventType]===undefined){this._triggerEls[eventType]=[]}var index=this._triggerEls[eventType].indexOf(el);if(index<0){el.setAttribute("role","tab");el.setAttribute("tabindex","0");var id=this.getElementId();if(id){el.setAttribute("aria-controls",id)}id=el.getAttribute("id");if(id&&this._el.getAttribute("aria-labelledby")===null){this._el.setAttribute("aria-labelledby",id)}ac_addEventListener(el,eventType,this._onTriggered);this._triggerEls[eventType].push(el);if(this._isShown){el.setAttribute("aria-selected","true");ac_classList.add(el,CSS_CURRENT)}else{el.setAttribute("aria-selected","false")}}};proto.removeElementTrigger=function(el,eventType){eventType=eventType||"click";if(this._triggerEls[eventType]===undefined){return}var index=this._triggerEls[eventType].indexOf(el);if(index>-1){this._cleanElementTrigger(el,eventType)}if(this._triggerEls[eventType].length===0){this._triggerEls[eventType]=undefined}};proto.addKeyTrigger=function(key){if(typeof key==="string"){key=keyMap[key.toUpperCase()]}if(typeof key==="number"){var index=this._triggerKeys.indexOf(key);if(index<0){Keyboard.onDown(key,this._onKeyboardInteraction);this._triggerKeys.push(key)}}};proto.removeKeyTrigger=function(key){if(typeof key==="string"){key=keyMap[key.toUpperCase()]}if(typeof key==="number"){var index=this._triggerKeys.indexOf(key);if(index>-1){Keyboard.offDown(key,this._onKeyboardInteraction);this._triggerKeys.splice(index,1)}}};proto.removeAllTriggers=function(){var key;var index=this._triggerKeys.length;while(index--){key=this._triggerKeys[index];Keyboard.offDown(key,this._onKeyboardInteraction)}this._triggerKeys=[];var el;var type;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];this._cleanElementTrigger(el,type)}}this._triggerEls={}};proto.isInView=function(){if(this._el){return isInViewport(this._el)}return false};proto.percentageInView=function(){if(this._el){return getPercentInViewport(this._el)}return 0};proto.getElement=function(){return this._el};proto.getElementId=function(){if(this._elId!==undefined){return this._elId}this._elId=this._el.getAttribute("id")||null;return this._elId};proto.destroy=function(){if(this._isShown){this._isShown=null;ac_classList.remove(this._el,Item.CSS_CURRENT_ITEM,Item.CSS_LAST_ITEM,Item.CSS_NEXT_ITEM,Item.CSS_PREVIOUS_ITEM);this._removeCurrentClassFromTriggers()}this.removeAllTriggers();this._setTabIndexOnFocusableItems(null);this._el.removeAttribute("aria-hidden");this._el.removeAttribute("role");this._el.removeAttribute("aria-labelledby");this._triggerKeys=null;this._triggerEls=null;this._el=null};proto._addCurrentClassToTriggers=function(){var el;var type;var index;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];el.setAttribute("aria-selected","true");ac_classList.add(el,CSS_CURRENT)}}};proto._removeCurrentClassFromTriggers=function(){var el;var type;var index;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];el.setAttribute("aria-selected","false");ac_classList.remove(el,CSS_CURRENT)}}};proto._cleanElementTrigger=function(el,type){el.removeAttribute("aria-selected");el.removeAttribute("role");el.removeAttribute("tabindex");el.removeAttribute("aria-controls");ac_removeEventListener(el,type,this._onTriggered);if(this._isShown){ac_classList.remove(el,CSS_CURRENT)}};proto._onKeyboardInteraction=function(evt){if(this.isInView()){this._onTriggered(evt)}};proto._setTabIndexOnFocusableItems=function(index){var remove=index===null;var i=this._focusableEls.length;while(i--){if(remove){this._focusableEls[i].removeAttribute("tabindex")}else{this._focusableEls[i].setAttribute("tabindex",index)}}};proto._onTriggered=function(evt){preventDefault(evt);this.trigger(Item.SELECTED,{item:this,interactionEvent:evt})};module.exports=Item},{"./helpers/focusableSelectors":238,"@marcom/ac-classlist":8,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/preventDefault":19,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-metrics/getPercentInViewport":94,"@marcom/ac-dom-metrics/isInViewport":100,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-event-emitter-micro":116,"@marcom/ac-keyboard":120,"@marcom/ac-keyboard/keyMap":122,"@marcom/ac-object/create":124}],230:[function(require,module,exports){"use strict";var extendProto=require("./helpers/extendProto");var Gallery=require("./Gallery");var AutoGallery=require("./auto/AutoGallery");var FadeGallery=require("./fade/FadeGallery");var FadeGalleryItem=require("./fade/FadeItem");var SlideGallery=require("./slide/SlideGallery");var SlideGalleryItem=require("./slide/SlideItem");var Item=require("./Item");Gallery.create=require("./factories/create");Gallery.autoCreate=require("./factories/autoCreate");Gallery.extend=extendProto;AutoGallery.extend=extendProto;FadeGallery.extend=extendProto;FadeGalleryItem.extend=extendProto;SlideGallery.extend=extendProto;SlideGalleryItem.extend=extendProto;Item.extend=extendProto;module.exports={Gallery:Gallery,AutoGallery:AutoGallery,FadeGallery:FadeGallery,FadeGalleryItem:FadeGalleryItem,SlideGallery:SlideGallery,SlideGalleryItem:SlideGalleryItem,Item:Item,ToggleNav:require("./navigation/ToggleNav")}},{"./Gallery":228,"./Item":229,"./auto/AutoGallery":232,"./factories/autoCreate":233,"./factories/create":234,"./fade/FadeGallery":235,"./fade/FadeItem":236,"./helpers/extendProto":237,"./navigation/ToggleNav":242,"./slide/SlideGallery":244,"./slide/SlideItem":245}],231:[function(require,module,exports){"use strict";var GalleryAnalyticsObserver;try{GalleryAnalyticsObserver=require("ac-analytics").observer.Gallery}catch(e){}var DEFAULT_ID_DATA_ATTRIBUTE="data-analytics-gallery-id";function AnalyticsManager(){this._observers={}}var proto=AnalyticsManager.prototype;proto.add=function(gallery,options){var id=gallery.getId();if(!GalleryAnalyticsObserver||this._observers[id]){return}options=options||{};if(!options.galleryName){options.galleryName=this._getAnalyticsId(gallery,options.dataAttribute)||id}if(!options.beforeUpdateEvent){options.beforeUpdateEvent="update"}if(!options.afterUpdateEvent){options.afterUpdateEvent="update:complete"}var observer=new GalleryAnalyticsObserver(gallery,options);if(observer.gallery){this._observers[id]=observer}};proto.remove=function(gallery){var id=gallery.getId();if(!GalleryAnalyticsObserver||!this._observers[id]){return}if(typeof this._observers[id].destroy==="function"){this._observers[id].destroy()}this._observers[id]=null};proto._getAnalyticsId=function(gallery,dataAttribute){if(typeof gallery.getElement==="function"){dataAttribute=dataAttribute||DEFAULT_ID_DATA_ATTRIBUTE;var el=gallery.getElement();return el.getAttribute(dataAttribute)||el.getAttribute("id")}return null};module.exports=AnalyticsManager},{"ac-analytics":"ac-analytics"}],232:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/requestAnimationFrame");var ac_classList=require("@marcom/ac-classlist");var ac_addEventListener=require("@marcom/ac-dom-events/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/removeEventListener");var preventDefault=require("@marcom/ac-dom-events/preventDefault");var ac_dom_styles=require("@marcom/ac-dom-styles");var ac_querySelector=require("@marcom/ac-dom-traversal/querySelector");var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var create=require("@marcom/ac-object/create");var getContentDimensions=require("@marcom/ac-dom-metrics/getContentDimensions");var keyMap=require("@marcom/ac-keyboard/keyMap");var selectElementFromDataAttributeValue=require("./../helpers/selectElementFromDataAttributeValue");var selectElementThatHasDataAttribute=require("./../helpers/selectElementThatHasDataAttribute");var throttle=require("@marcom/ac-function/throttle");var touchAvailable=require("@marcom/ac-feature/touchAvailable");var Gallery=require("./../Gallery");var Keyboard=require("@marcom/ac-keyboard");var PageVisibilityManager=require("@marcom/ac-page-visibility").PageVisibilityManager;var PointerTracker=require("@marcom/ac-pointer-tracker").PointerTracker;var ToggleNav=require("./../navigation/ToggleNav");var CSS_DISABLED_CLASS="disabled";var DEFAULT_AUTO_PLAY_DELAY=3;var DEFAULT_CONTAINER_RESIZE_DURATION=.5;var DEFAULT_ITEM_SELECTOR="[data-ac-gallery-item]";var DEFAULT_KEYBOARD_THROTTLE_DELAY=.12;var DEFAULT_PADDLENAV_TEMPLATE=require("../templates/paddlenav.js");var ERROR_NO_ELEMENT_SUPPLIED="No element supplied.";function AutoGallery(el,options){options=options||{};if(!el||el.nodeType===undefined){throw new Error(ERROR_NO_ELEMENT_SUPPLIED)}this._el=el;Gallery.call(this,options);this._itemHeights=[];this._itemHeightsLookup={};this._toggleNavDuration=options.toggleNavDuration;this._isRightToLeft=options.rightToLeft===undefined?ac_dom_styles.getStyle(el,"direction").direction==="rtl":options.rightToLeft;this._keyboardThrottleDelay=(options.keyboardThrottleDelay===undefined?DEFAULT_KEYBOARD_THROTTLE_DELAY:options.keyboardThrottleDelay)*1e3;this._resizeContainer=!!options.resizeContainer;this._setUpContainerAutoResize(options.resizeContainerOnUpdate);this._createToggleNav();this._addPaddleNav(options.addPaddleNav);this._addItems(options.itemSelector||DEFAULT_ITEM_SELECTOR);if(!this._wrapAround){this._updatePaddleNavState()}if(options.enableArrowKeys!==false){this._enableArrowKeys=true;this._addKeyboardListener()}if(options.updateOnWindowResize!==false){this._onWindowResize=this._onWindowResize.bind(this);ac_addEventListener(window,"resize",this._onWindowResize)}this.stopAutoPlay=this.stopAutoPlay.bind(this);if(options.autoPlay){var delay=typeof options.autoPlay==="number"?options.autoPlay:DEFAULT_AUTO_PLAY_DELAY;this.startAutoPlay(delay)}if(options.deeplink!==false){var item=this._getDeeplinkedItem();if(item&&item!==this._currentItem){this.show(item)}}if(this._containerResizeDuration!==false){var height=this._itemHeightsLookup[this._currentItem.getElementId()];if(height){this._setElHeight(height)}}if(this._toggleNav){this._toggleNav.start()}this._setUpSwiping(options.touch&&touchAvailable(),options.desktopSwipe)}AutoGallery.RESIZED="resized";AutoGallery.UPDATE=Gallery.UPDATE;AutoGallery.UPDATE_COMPLETE=Gallery.UPDATE_COMPLETE;var superProto=Gallery.prototype;var proto=AutoGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}else if(this._items.indexOf(item)>-1){return item}if(this._resizeContainer){this._storeItemHeight(item,this._containerResizeDuration===false)}this._addItemTriggers(item);return superProto.addItem.call(this,item,index)};proto.removeItem=function(item,options){if(this._resizeContainer){var index=this._itemHeights.length;while(index--){if(this._itemHeights[index].item===item){this._itemHeights.splice(index,1);if(index===0&&this._itemHeights.length){this._setElHeight(this._itemHeights[0].height)}}}}return superProto.removeItem.call(this,item,options)};proto.startAutoPlay=function(delay,options){options=options||{};this._isAutoPlaying=true;this._autoPlayDelay=(delay||DEFAULT_AUTO_PLAY_DELAY)*1e3;this._cancelAutoPlayOnInteraction=options.cancelOnInteraction===undefined?true:options.cancelOnInteraction;setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay);if(this._cancelAutoPlayOnInteraction){this.on(Gallery.UPDATE,this.stopAutoPlay)}};proto.stopAutoPlay=function(){this._isAutoPlaying=false;if(this._cancelAutoPlayOnInteraction){this.off(Gallery.UPDATE,this.stopAutoPlay)}};proto.getElement=function(){return this._el};proto.getToggleNav=function(){return this._toggleNav||null};proto.resize=function(winWidth,winHeight){if(this._resizeContainer){this._itemHeights=[];var index=this._items.length;while(index--){this._storeItemHeight(this._items[index],false)}if(this._containerResizeDuration!==false){this._setElHeight(this._itemHeightsLookup[this._currentItem.getElementId()])}else{this._setElHeight(this._itemHeights[0].height)}}if(this._toggleNav){this._toggleNav.resize()}this.trigger(AutoGallery.RESIZED,this)};proto.destroy=function(options){if(this._isAutoPlaying){this.stopAutoPlay()}if(this._resizeContainer){ac_dom_styles.setStyle(this._el,{height:null,transition:null})}if(this._enableArrowKeys){Keyboard.offDown(keyMap.ARROW_RIGHT,this._rightArrowFunc);Keyboard.offDown(keyMap.ARROW_LEFT,this._leftArrowFunc)}var index;if(this._previousButtons){index=this._previousButtons.length;while(index--){ac_removeEventListener(this._previousButtons[index],"click",this._onPaddlePrevious)}this._setPaddleDisabledState(this._previousButtons,false)}if(this._nextButtons){index=this._nextButtons.length;while(index--){ac_removeEventListener(this._nextButtons[index],"click",this._onPaddleNext)}this._setPaddleDisabledState(this._nextButtons,false)}if(this._dynamicPaddleNav){this._el.removeChild(this._dynamicPaddleNav)}if(this._hasPaddleNavStateHandler){this.off(Gallery.UPDATE,this._updatePaddleNavState)}if(this._touchSwipe){this._touchSwipe.off(PointerTracker.END,this._onSwipeEnd);this._touchSwipe.destroy();this._touchSwipe=null}if(this._clickSwipe){this._clickSwipe.off(PointerTracker.END,this._onSwipeEnd);this._clickSwipe.destroy();this._clickSwipe=null}if(this._toggleNav){this._toggleNav.destroy();this._toggleNav=null}ac_removeEventListener(window,"resize",this._onWindowResize);this._el=null;this._itemHeights=null;this._itemHeightsLookup=null;this._resizeContainer=null;this._isRightToLeft=null;this._enableArrowKeys=null;this._previousButtons=null;this._onPaddlePrevious=null;this._nextButtons=null;this._onPaddleNext=null;return superProto.destroy.call(this,options)};proto._getDeeplinkedItem=function(){var path=window.location.hash.substr(1);var item;var index=this._items.length;while(index--){item=this._items[index];if(path===item.getElementId()){return item}}return null};proto._addItems=function(itemSelector){var item;var items;var isDataAttribute=/(^\[).*(\]$)/.test(itemSelector);if(isDataAttribute){itemSelector=itemSelector.replace(/\[|\]/g,"");items=selectElementThatHasDataAttribute(itemSelector,this._el)}else{items=ac_querySelectorAll(itemSelector,this._el)}var index=0;var length=items.length;for(index;index<length;index++){item=new this._itemType(items[index]);this.addItem(item);this._addItemTriggers(item)}};proto._createToggleNav=function(){var id=this._getElementId();var selector='[data-ac-gallery-togglenav="'+id+'"], [data-ac-gallery-tabnav="'+id+'"]';var toggleNavEl=ac_querySelector(selector);if(toggleNavEl){this._toggleNav=new ToggleNav(toggleNavEl,this,{duration:this._toggleNavDuration})}};proto._addItemTriggers=function(item,additionalTriggers){var triggers=selectElementFromDataAttributeValue("data-ac-gallery-trigger",item.getElementId());if(additionalTriggers&&additionalTriggers.length){triggers=triggers.concat(additionalTriggers)}var index=0;var length=triggers.length;for(index;index<length;index++){item.addElementTrigger(triggers[index]);if(this._toggleNav){this._toggleNav.addTrigger(triggers[index],item)}}};proto._addPaddleNav=function(autoAdd){var index;var id=this._getElementId();if(autoAdd){var template=typeof autoAdd==="string"?autoAdd:DEFAULT_PADDLENAV_TEMPLATE;template=template.replace(/%ID%/g,this._getElementId());this._dynamicPaddleNav=document.createElement("div");this._dynamicPaddleNav.innerHTML=template;this._el.insertBefore(this._dynamicPaddleNav,this._el.firstChild)}this._previousButtons=selectElementFromDataAttributeValue("data-ac-gallery-previous-trigger",id);this._nextButtons=selectElementFromDataAttributeValue("data-ac-gallery-next-trigger",id);var galleryLabel=this._el.getAttribute("aria-label")||"";if(galleryLabel.length){galleryLabel="("+galleryLabel+")"}this._onPaddlePrevious=this._onPaddleInteraction.bind(null,this.showPrevious);index=this._previousButtons.length;if(index){var previousAriaLabel=this._el.getAttribute("data-ac-gallery-previouslabel");if(previousAriaLabel&&galleryLabel.length){if(this._isRightToLeft){previousAriaLabel=galleryLabel+" "+previousAriaLabel}else{previousAriaLabel+=" "+galleryLabel}}while(index--){if(previousAriaLabel&&this._previousButtons[index].getAttribute("aria-label")===null){this._previousButtons[index].setAttribute("aria-label",previousAriaLabel)}ac_addEventListener(this._previousButtons[index],"click",this._onPaddlePrevious)}}this._onPaddleNext=this._onPaddleInteraction.bind(null,this.showNext);index=this._nextButtons.length;if(index){var nextAriaLabel=this._el.getAttribute("data-ac-gallery-nextlabel");if(nextAriaLabel&&galleryLabel.length){if(this._isRightToLeft){nextAriaLabel=galleryLabel+" "+nextAriaLabel}else{nextAriaLabel+=" "+galleryLabel}}while(index--){if(nextAriaLabel&&this._nextButtons[index].getAttribute("aria-label")===null){this._nextButtons[index].setAttribute("aria-label",nextAriaLabel)}ac_addEventListener(this._nextButtons[index],"click",this._onPaddleNext)}}if(this._nextButtons.length||this._previousButtons.length){this._hasPaddleNavStateHandler=true;this._updatePaddleNavState=this._updatePaddleNavState.bind(this);this.on(Gallery.UPDATE,this._updatePaddleNavState)}};proto._onPaddleInteraction=function(method,evt){preventDefault(evt);method.call(null,{interactionEvent:evt})};proto._updatePaddleNavState=function(){if(!this._wrapAround){var index=this._items.indexOf(this._currentItem);if(index===0&&this._previousButtons.length){this._setPaddleDisabledState(this._previousButtons,true);this._setPaddleDisabledState(this._nextButtons,false)}else if(index===this._items.length-1&&this._nextButtons.length){this._setPaddleDisabledState(this._nextButtons,true);this._setPaddleDisabledState(this._previousButtons,false)}else{this._setPaddleDisabledState(this._previousButtons,false);this._setPaddleDisabledState(this._nextButtons,false)}}else{this._setPaddleDisabledState(this._previousButtons,false);this._setPaddleDisabledState(this._nextButtons,false)}};proto._setPaddleDisabledState=function(paddles,isDisabled){var index=paddles.length;while(index--){paddles[index].disabled=isDisabled;if(isDisabled){ac_classList.add(paddles[index],CSS_DISABLED_CLASS)}else{ac_classList.remove(paddles[index],CSS_DISABLED_CLASS)}}};proto._addKeyboardListener=function(){if(this._enableArrowKeys){this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this);var rightArrowFunc;var leftArrowFunc;if(this._isRightToLeft){rightArrowFunc=this.showPrevious;leftArrowFunc=this.showNext}else{rightArrowFunc=this.showNext;leftArrowFunc=this.showPrevious}this._rightArrowFunc=throttle(this._onKeyboardInteraction.bind(null,rightArrowFunc),this._keyboardThrottleDelay);this._leftArrowFunc=throttle(this._onKeyboardInteraction.bind(null,leftArrowFunc),this._keyboardThrottleDelay);Keyboard.onDown(keyMap.ARROW_RIGHT,this._rightArrowFunc);Keyboard.onDown(keyMap.ARROW_LEFT,this._leftArrowFunc)}};proto._onKeyboardInteraction=function(method,evt){if(this.isInView()){var galleries=Gallery.getAllInView();if(galleries.length>1){galleries.sort(function(a,b){a=a._enableArrowKeys?a.getCurrentItem().percentageInView():0;b=b._enableArrowKeys?b.getCurrentItem().percentageInView():0;return b-a});if(this!==galleries[0]){return}}method.call(null,{interactionEvent:evt})}};proto._setUpSwiping=function(forTouch,forClick){this._onSwipeEnd=this._onSwipeEnd.bind(this);if(forTouch){this._touchSwipe=new PointerTracker(this._el,PointerTracker.TOUCH_EVENTS);this._touchSwipe.on(PointerTracker.END,this._onSwipeEnd)}if(forClick){this._clickSwipe=new PointerTracker(this._el,PointerTracker.MOUSE_EVENTS);this._clickSwipe.on(PointerTracker.END,this._onSwipeEnd)}};proto._onSwipeEnd=function(evt){var method;var options={interactionEvent:evt.interactionEvent};if(evt.swipe===PointerTracker.SWIPE_RIGHT){method=this._isRightToLeft?this.showNext:this.showPrevious}else if(evt.swipe===PointerTracker.SWIPE_LEFT){method=this._isRightToLeft?this.showPrevious:this.showNext}if(method){return method.call(this,options)}return null};proto._getElementId=function(){if(this._elementId===undefined){this._elementId=this._el.getAttribute("id")}return this._elementId};proto._setUpContainerAutoResize=function(resizeContainerOnUpdate){if(typeof resizeContainerOnUpdate==="number"){this._containerResizeDuration=resizeContainerOnUpdate}else if(resizeContainerOnUpdate){this._containerResizeDuration=DEFAULT_CONTAINER_RESIZE_DURATION}else{this._containerResizeDuration=false}if(this._containerResizeDuration!==false){this._resizeContainer=true;this._updateContainerSize=this._updateContainerSize.bind(this);this.on(Gallery.UPDATE,this._updateContainerSize)}};proto._updateContainerSize=function(items){var height=this._itemHeightsLookup[items.incoming[0].getElementId()];if(height){this._setElHeight(height,this._containerResizeDuration)}};proto._storeItemHeight=function(item,resizeEl){var bounds=getContentDimensions(item.getElement());this._itemHeights.push({item:item,height:bounds.height});this._itemHeightsLookup[item.getElementId()]=bounds.height;this._itemHeights.sort(function(a,b){return b.height-a.height});if(resizeEl&&this._itemHeights[0].item===item){this._setElHeight(bounds.height)}};proto._setElHeight=function(height,duration){var styles={height:height+"px"};if(duration){styles["transition"]="height "+duration+"s"}else{styles["transition"]=null}ac_dom_styles.setStyle(this._el,styles)};proto._onAutoPlayToNextItem=function(){if(this._isAutoPlaying){if(!PageVisibilityManager.isHidden&&this._currentItem.isInView()){if(this._cancelAutoPlayOnInteraction){this.off(Gallery.UPDATE,this.stopAutoPlay)}var item=this.showNext();if(item!==null){if(this._cancelAutoPlayOnInteraction){this.on(Gallery.UPDATE,this.stopAutoPlay)}setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay)}}else{setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay)}}};proto._onWindowResize=function(evt){window.requestAnimationFrame(function(){if(this._el){this.resize()}}.bind(this))};module.exports=AutoGallery},{"../templates/paddlenav.js":247,"./../Gallery":228,"./../helpers/selectElementFromDataAttributeValue":240,"./../helpers/selectElementThatHasDataAttribute":241,"./../navigation/ToggleNav":242,"@marcom/ac-classlist":8,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/preventDefault":19,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-metrics/getContentDimensions":91,"@marcom/ac-dom-styles":112,"@marcom/ac-dom-traversal/querySelector":69,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-feature/touchAvailable":90,"@marcom/ac-function/throttle":118,"@marcom/ac-keyboard":120,"@marcom/ac-keyboard/keyMap":122,"@marcom/ac-object/create":124,"@marcom/ac-page-visibility":126,"@marcom/ac-pointer-tracker":132,"@marcom/ac-polyfills/requestAnimationFrame":372}],233:[function(require,module,exports){"use strict";var create=require("./create");var selectElementThatHasDataAttribute=require("./../helpers/selectElementThatHasDataAttribute");var Gallery=require("./../Gallery");var FADE_DATA_ATTRIBUTE=Gallery.FADE_SELECTOR.replace(/\[|\]/g,"");var SLIDE_DATA_ATTRIBUTE=Gallery.SLIDE_SELECTOR.replace(/\[|\]/g,"");module.exports=function autoCreate(options){options=options||{};var context=options.context||document.body;var elements;var index;elements=selectElementThatHasDataAttribute(SLIDE_DATA_ATTRIBUTE,context);index=elements.length;while(index--){create(elements[index],Gallery.SLIDE,options)}elements=selectElementThatHasDataAttribute(FADE_DATA_ATTRIBUTE,context);index=elements.length;while(index--){create(elements[index],Gallery.FADE,options)}return Gallery.getAll()}},{"./../Gallery":228,"./../helpers/selectElementThatHasDataAttribute":241,"./create":234}],234:[function(require,module,exports){"use strict";var FadeGallery=require("./../fade/FadeGallery");var Gallery=require("./../Gallery");var SlideGallery=require("./../slide/SlideGallery");var ERROR_GALLERY_TYPE_UNSUPPORTED="%TYPE% is not a supported gallery type and el has no gallery data attribute.";var FADE_DATA_ATTRIBUTE=Gallery.FADE_SELECTOR.replace(/\[|\]/g,"");var SLIDE_DATA_ATTRIBUTE=Gallery.SLIDE_SELECTOR.replace(/\[|\]/g,"");module.exports=function create(el,type,options){var GalleryType;if(typeof type==="string"){if(type===Gallery.SLIDE){GalleryType=SlideGallery}else if(type===Gallery.FADE){GalleryType=FadeGallery}}if(GalleryType===undefined){if(el.getAttribute(SLIDE_DATA_ATTRIBUTE)!==null){GalleryType=SlideGallery}else if(el.getAttribute(FADE_DATA_ATTRIBUTE)!==null){GalleryType=FadeGallery}}if(GalleryType===undefined){throw new Error(ERROR_GALLERY_TYPE_UNSUPPORTED.replace(/%TYPE%/g,type))}return new GalleryType(el,options)}},{"./../Gallery":228,"./../fade/FadeGallery":235,"./../slide/SlideGallery":244}],235:[function(require,module,exports){"use strict";var clone=require("@marcom/ac-object/clone");var create=require("@marcom/ac-object/create");var FadeItem=require("./FadeItem");var AutoGallery=require("./../auto/AutoGallery");var DEFAULT_FADE_DURATION=.5;function FadeGallery(el,options){options=clone(options)||{};options.itemType=options.itemType||FadeItem;this._fadeDuration=options.duration||DEFAULT_FADE_DURATION;options.toggleNavDuration=options.toggleNavDuration===undefined?this._fadeDuration:options.toggleNavDuration;this._crossFade=options.crossFade;this._zIndexCount=options.startZIndex||1;this._ease=options.ease;if(options.resizeContainerOnUpdate===true){options.resizeContainerOnUpdate=this._fadeDuration}this._onItemShowComplete=this._onItemShowComplete.bind(this);AutoGallery.call(this,el,options);if(this._currentItem){this._currentItem.fadeIn(0)}}FadeGallery.RESIZED=AutoGallery.RESIZED;FadeGallery.UPDATE=AutoGallery.UPDATE;FadeGallery.UPDATE_COMPLETE=AutoGallery.UPDATE_COMPLETE;var superProto=AutoGallery.prototype;var proto=FadeGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}var returnValue=superProto.addItem.call(this,item,index);if(item!==this._currentItem){item.fadeOut()}else{item.fadeIn(0)}return returnValue};proto.destroy=function(options){var returnValue=superProto.destroy.call(this,options);this._fadeDuration=null;this._crossFade=null;this._zIndexCount=null;this._ease=null;this._onItemShowComplete=null;return returnValue};proto._onItemShowComplete=function(clip){if(clip&&clip.target()!==this._currentItem.getElement()){if(!this._currentItem.isFading()){this._currentItem.fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,this._onItemShowComplete)}return}var item;var index=this._items.length;while(index--){item=this._items[index];if(item!==this._currentItem){item.fadeOut()}}if(this._incomingOutgoingItems){this.trigger(FadeGallery.UPDATE_COMPLETE,this._incomingOutgoingItems)}};proto._updateItems=function(items,silent){if(silent){return}if(this._crossFade){var callback=silent?null:this.trigger.bind(this,FadeGallery.UPDATE_COMPLETE,items);items.outgoing[0].fadeOut(this._fadeDuration*.99,this._ease);items.incoming[0].fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,callback)}else{this._incomingOutgoingItems=silent?false:items;if(!items.outgoing[0].isFading()){items.incoming[0].fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,this._onItemShowComplete)}}items.outgoing[0].hide();items.incoming[0].show()};module.exports=FadeGallery},{"./../auto/AutoGallery":232,"./FadeItem":236,"@marcom/ac-object/clone":123,"@marcom/ac-object/create":124}],236:[function(require,module,exports){"use strict";var setStyle=require("@marcom/ac-dom-styles/setStyle");var create=require("@marcom/ac-object/create");var fade=require("@marcom/ac-solar/fade");var fadeIn=require("@marcom/ac-solar/fadeIn");var fadeOut=require("@marcom/ac-solar/fadeOut");var Item=require("./../Item");function FadeItem(el){Item.call(this,el);setStyle(el,{position:"absolute"})}FadeItem.SELECTED=Item.SELECTED;FadeItem.SHOW=Item.SHOW;FadeItem.HIDE=Item.HIDE;var superProto=Item.prototype;var proto=FadeItem.prototype=create(superProto);proto.fadeIn=function(duration,ease,zIndex,callback){if(duration){setStyle(this._el,{zIndex:zIndex||1});this._destroyCurrentClip();this._clip=fade(this._el,0,1,duration,{ease:ease,onComplete:callback})}else{fadeIn(this._el,0);setStyle(this._el,{zIndex:zIndex||1})}};proto.fadeOut=function(duration,ease){if(duration){this._destroyCurrentClip();this._clip=fadeOut(this._el,duration,{ease:ease})}else{fadeOut(this._el,0)}};proto.isFading=function(){return!!(this._clip&&this._clip.playing())};proto.destroy=function(){setStyle(this._el,{position:null,opacity:null,zIndex:null});superProto.destroy.call(this);this._destroyCurrentClip();this._clip=null};proto._destroyCurrentClip=function(){if(this.isFading()){this._clip.destroy()}};module.exports=FadeItem},{"./../Item":229,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-object/create":124,"@marcom/ac-solar/fade":221,"@marcom/ac-solar/fadeIn":222,"@marcom/ac-solar/fadeOut":223}],237:[function(require,module,exports){"use strict";var create=require("@marcom/ac-object/create");var extend=require("@marcom/ac-object/extend");module.exports=function extendProto(proto){var self=this;var Child=function(){self.apply(this,arguments)};var childProto=create(this.prototype);Child.prototype=extend(childProto,proto);extend(Child,this);return Child}},{"@marcom/ac-object/create":124,"@marcom/ac-object/extend":125}],238:[function(require,module,exports){"use strict";var focusableSelectors=["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(",");module.exports=focusableSelectors},{}],239:[function(require,module,exports){"use strict";var getStyle=require("@marcom/ac-dom-styles/getStyle");var getContentDimensions=require("@marcom/ac-dom-metrics/getContentDimensions");module.exports=function getElementFullWidth(el){var styles=getStyle(el,"margin-right","margin-left");return Math.round(getContentDimensions(el).width)+parseInt(styles.marginRight,10)+parseInt(styles.marginLeft,10)}},{"@marcom/ac-dom-metrics/getContentDimensions":91,"@marcom/ac-dom-styles/getStyle":113}],240:[function(require,module,exports){"use strict";var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var selectInIE7=function(dataAttribute,value){var el;var elements=document.getElementsByTagName("*");var index=0;var length=elements.length;var matches=[];for(index;index<length;index++){el=elements[index];if(el.getAttribute(dataAttribute)!==null&&el.getAttribute(dataAttribute).split(" ").indexOf(value)>-1){matches[matches.length]=el}}return matches};module.exports=function selectElementFromDataAttributeValue(dataAttribute,value){var elements=ac_querySelectorAll("["+dataAttribute+'*="'+value+'"]');if(elements.length===0&&document.documentMode===7){return selectInIE7(dataAttribute,value)}var selectedElements=[];var index=0;var length=elements.length;var values;for(index;index<length;index++){values=elements[index].getAttribute(dataAttribute);if(values===value){selectedElements.push(elements[index])}else if(values&&values.length){values=values.split(" ");if(values.indexOf(value)>-1){selectedElements.push(elements[index])}}}return selectedElements}},{"@marcom/ac-dom-traversal/querySelectorAll":70}],241:[function(require,module,exports){"use strict";var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var ancestors=require("@marcom/ac-dom-traversal/ancestors");var selectInIE7=function(dataAttribute,context){var el;var elements=document.getElementsByTagName("*");var index=0;var length=elements.length;var matches=[];for(index;index<length;index++){el=elements[index];if(el.getAttribute(dataAttribute)!==null&&(!context||ancestors(el).indexOf(context)>-1)){matches[matches.length]=el}}return matches};module.exports=function selectElementThatHasDataAttribute(dataAttribute,context){context=context||document.body;var elements=ac_querySelectorAll("["+dataAttribute+"]",context);if(elements.length===0&&document.documentMode===7){return selectInIE7(dataAttribute,context)}return elements}},{"@marcom/ac-dom-traversal/ancestors":57,"@marcom/ac-dom-traversal/querySelectorAll":70}],242:[function(require,module,exports){"use strict";var ac_addEventListener=require("@marcom/ac-dom-events/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/removeEventListener");var getDimensions=require("@marcom/ac-dom-metrics/getDimensions");var getPosition=require("@marcom/ac-dom-metrics/getPosition");var setStyle=require("@marcom/ac-dom-styles/setStyle");var ancestors=require("@marcom/ac-dom-traversal/ancestors");var create=require("@marcom/ac-object/create");var scrollX=require("@marcom/ac-solar/scrollX");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var Gallery=require("./../Gallery");var DEFAULT_SLIDE_DURATION=.5;function ToggleNav(el,gallery,options){options=options||{};this._el=el;this._gallery=gallery;this._triggers={};this._ordered=[];this._containerEl=this._el.children[0];this._slideDuration=options.duration===undefined?DEFAULT_SLIDE_DURATION:options.duration;EventEmitterMicro.call(this)}var superProto=EventEmitterMicro.prototype;var proto=ToggleNav.prototype=create(superProto);proto.start=function(){this._onWindowLoad=this._onWindowLoad.bind(this);this._onGalleryUpdated=this._onGalleryUpdated.bind(this);this._gallery.on(Gallery.UPDATE,this._onGalleryUpdated);this.resize();ac_addEventListener(window,"load",this._onWindowLoad)};proto.addTrigger=function(el,item){if(this._triggers[item.getElementId()]!==undefined){return}var els=ancestors(el);if(els.indexOf(this._el)>-1){var triggerObject={el:el};this._triggers[item.getElementId()]=triggerObject;this._ordered.push(triggerObject)}};proto.resize=function(){if(!this._ordered.length){return}setStyle(this._containerEl,{paddingLeft:null,paddingRight:null});this._containerWidth=getDimensions(this._containerEl).width;this._width=getDimensions(this._el).width;this._viewCenter=Math.round(this._width*.5);var index=this._ordered.length;while(index--){this._setTriggerData(this._ordered[index])}this._ordered.sort(function(a,b){return a.left-b.left});if(this._containerWidth>this._width){var firstItem=this._ordered[0];var lastItem=this._ordered[this._ordered.length-1];var paddingLeft=(this._width-firstItem.width)*.5;var paddingRight=(this._width-lastItem.width)*.5;setStyle(this._containerEl,{paddingLeft:paddingLeft+"px",paddingRight:paddingRight+"px"});var trigger=this._triggers[this._gallery.getCurrentItem().getElementId()];if(trigger){this._centerNav(trigger)}}};proto.destroy=function(){this._gallery.off(Gallery.UPDATE,this._onGalleryUpdated);ac_removeEventListener(window,"load",this._onWindowLoad);setStyle(this._containerEl,{paddingLeft:null,paddingRight:null});this._el=null;this._gallery=null;this._triggers=null;this._ordered=null;this._containerEl=null;this._destroyCurrentClip();this._clip=null;return superProto.destroy.call(this)};proto._onWindowLoad=function(){ac_removeEventListener(window,"load",this._onWindowLoad);this.resize()};proto._setTriggerData=function(trigger){trigger.width=getDimensions(trigger.el).width;var position=getPosition(trigger.el);trigger.left=position.left;trigger.right=position.right;trigger.center=trigger.left+trigger.width*.5};proto._centerNav=function(trigger,duration){this._setTriggerData(trigger);this._width=getDimensions(this._el).width;this._viewCenter=Math.round(this._width*.5);var xp=Math.round(trigger.center-this._viewCenter);this._destroyCurrentClip();if(duration){this._clip=scrollX(this._el,xp,duration)}else{this._el.scrollLeft=scrollX}};proto._onGalleryUpdated=function(items){var trigger=this._triggers[items.incoming[0].getElementId()];if(trigger){this._centerNav(trigger,this._slideDuration)}};proto._destroyCurrentClip=function(){if(this._clip&&this._clip.playing()){this._clip.destroy()}};module.exports=ToggleNav},{"./../Gallery":228,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-metrics/getDimensions":92,"@marcom/ac-dom-metrics/getPosition":96,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-dom-traversal/ancestors":57,"@marcom/ac-event-emitter-micro":116,"@marcom/ac-object/create":124,"@marcom/ac-solar/scrollX":227}],243:[function(require,module,exports){"use strict";var AnalyticsManager=require("./../analytics/AnalyticsManager");module.exports=new AnalyticsManager},{"./../analytics/AnalyticsManager":231}],244:[function(require,module,exports){"use strict";var ac_classList=require("@marcom/ac-classlist");var ac_dom_styles=require("@marcom/ac-dom-styles");var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var clone=require("@marcom/ac-object/clone");var create=require("@marcom/ac-object/create");var getElementFullWidth=require("./../helpers/getElementFullWidth");var moveX=require("@marcom/ac-solar/moveX");var selectElementFromDataAttributeValue=require("./../helpers/selectElementFromDataAttributeValue");var selectElementThatHasDataAttribute=require("./../helpers/selectElementThatHasDataAttribute");var AutoGallery=require("./../auto/AutoGallery");var PointerTracker=require("@marcom/ac-pointer-tracker").PointerTracker;var SlideItem=require("./SlideItem");var SlideItemWrapper=require("./SlideItemWrapper");var DEFAULT_ITEM_CENTER_POINT=.5;var DEFAULT_SLIDE_DURATION=.5;function SlideGallery(el,options){options=clone(options)||{};options.itemType=options.itemType||SlideItem;this._itemsPerSlide=options.itemsPerSlide||1;var deeplink=options.deeplink!==false;options.deeplink=false;this._slideDuration=options.duration!==undefined?options.duration:DEFAULT_SLIDE_DURATION;options.toggleNavDuration=options.toggleNavDuration===undefined?this._slideDuration:options.toggleNavDuration;this._itemCenterPoint=options.itemCenterPoint!==undefined?options.itemCenterPoint:DEFAULT_ITEM_CENTER_POINT;this._slideOptions={ease:options.ease};if(options.resizeContainerOnUpdate===true){options.resizeContainerOnUpdate=this._slideDuration}options.touch=options.touch!==false;this._originalWrapAround=options.wrapAround||false;AutoGallery.call(this,el,options);if(deeplink){var item=this._getDeeplinkedItem();if(item){if(this._currentItem!==item){this._currentItem.hide();this._setCurrentItem(item);this._currentItem.show()}}}this._positionItems=this._positionItems.bind(this);this._createContainer();if(this._items.length!==0){this._positionItems()}this._isInstantiated=true}SlideGallery.RESIZED=AutoGallery.RESIZED;SlideGallery.UPDATE=AutoGallery.UPDATE;SlideGallery.UPDATE_COMPLETE=AutoGallery.UPDATE_COMPLETE;var superProto=AutoGallery.prototype;var proto=SlideGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}var returnValue=superProto.addItem.call(this,item,index);if(this._containerEl!==undefined){this._addItemToContainer(item);this._positionItems()}this._updateWrapAround();return returnValue};proto.removeItem=function(item,options){if(this._containerEl&&item.getElement().parentElement===this._containerEl){var parentElement=item.getOriginalParentElement();if(parentElement){parentElement.appendChild(item.getElement())}else if(typeof item.removeItems==="function"){item.removeItems();options.destroyItem=true}var returnValue=superProto.removeItem.call(this,item,options);if(this._currentItem){this._positionItems(this._currentItem)}this._updateWrapAround();return returnValue}return superProto.removeItem.call(this,item,options)};proto.resize=function(){this._positionItems();this._snapToPosition(this._currentItem.position());return superProto.resize.call(this)};proto.destroy=function(options){this._destroyCurrentClip();this._clip=null;var index=this._items.length;while(index--){this._items[index].off(SlideItem.CENTER_POINT_CHANGED,this._positionItems)}if(this._touchSwipe){this._touchSwipe.off(PointerTracker.START,this._onSwipeStart);this._touchSwipe.off(PointerTracker.UPDATE,this._onSwipeUpdate)}if(this._clickSwipe){this._clickSwipe.off(PointerTracker.START,this._onSwipeStart);this._clickSwipe.off(PointerTracker.UPDATE,this._onSwipeUpdate)}var el=this._el;var returnValue=superProto.destroy.call(this,options);el.removeChild(this._containerEl);this._containerEl=null;this._slideDuration=null;this._itemCenterPoint=null;this._positionItems=null;this._slideOptions=null;return returnValue};proto._addItems=function(itemSelector){if(this._itemsPerSlide>1){var items;var isDataAttribute=/(^\[).*(\]$)/.test(itemSelector);if(isDataAttribute){items=selectElementThatHasDataAttribute(itemSelector.replace(/\[|\]/g,""),this._el)}else{items=ac_querySelectorAll(itemSelector,this._el)}var itemWrapper;var triggers;var elementId;var count=0;var index=0;var length=items.length;for(index;index<length;index++){if(count===0){itemWrapper=new SlideItemWrapper}itemWrapper.addItem(items[index]);elementId=items[index].getAttribute("id");if(elementId){triggers=selectElementFromDataAttributeValue("data-ac-gallery-trigger",elementId);this._addItemTriggers(itemWrapper,triggers)}if(++count===this._itemsPerSlide||index===length-1){count=0;itemWrapper.resize();this.addItem(itemWrapper)}}}else{superProto._addItems.call(this,itemSelector)}};proto._createContainer=function(){this._containerEl=document.createElement("div");ac_classList.add(this._containerEl,"ac-gallery-slidecontainer");ac_dom_styles.setStyle(this._containerEl,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"});this._el.appendChild(this._containerEl);var index=0;var length=this._items.length;for(index;index<length;index++){this._addItemToContainer(this._items[index])}};proto._addItemToContainer=function(item){this._containerEl.appendChild(item.getElement());item.on(SlideItem.CENTER_POINT_CHANGED,this._positionItems)};proto._positionItems=function(itemToSnapTo){itemToSnapTo=itemToSnapTo||this._currentItem;var items=this._items;if(this._wrapAround){items=this._shuffleItems()}var diff=this._getActualPositionX()-itemToSnapTo.position()||0;var containerWidth=parseInt(ac_dom_styles.getStyle(this._el,"width").width,10);var xPosition=0;var index=0;var length=items.length;var item;var el;var width;var offset;var centerPoint;for(index;index<length;index++){item=items[index];item.resize();el=item.getElement();ac_dom_styles.setStyle(el,{left:xPosition+"px"});width=getElementFullWidth(el);offset=containerWidth-width;centerPoint=item.centerPoint&&item.centerPoint()!==null?item.centerPoint():this._itemCenterPoint;item.position(xPosition*-1+offset*centerPoint);if(this._isRightToLeft){xPosition-=width}else{xPosition+=width}}xPosition=itemToSnapTo.position()+diff;this._snapToPosition(xPosition)};proto._getActualPositionX=function(){var transformStyles=ac_dom_styles.getStyle(this._containerEl,"transform").transform;if(!transformStyles||transformStyles==="none"){var left=ac_dom_styles.getStyle(this._containerEl,"left").left;return parseInt(left,10)}else if(transformStyles===this._transformStyles&&this._actualPositionX!==undefined){return this._actualPositionX}this._transformStyles=transformStyles;var spiltMatrix=this._transformStyles.split(",");this._actualPositionX=spiltMatrix[4]||this._currentItem.position();return this._actualPositionX*1};proto._snapToPosition=function(positionX){this._destroyCurrentClip();this._positionX=positionX;ac_dom_styles.setStyle(this._containerEl,{transition:"transform 0s, left 0s"});moveX(this._containerEl,positionX,0,this._slideOptions)};proto._slideToPosition=function(positionX,duration,callback){this._positionX=positionX;this._clip=moveX(this._containerEl,positionX,duration,{ease:this._slideOptions.ease,onComplete:callback})};proto._setUpSwiping=function(forTouch,forClick){var returnValue=superProto._setUpSwiping.call(this,forTouch,forClick);this._onSwipeStart=this._onSwipeStart.bind(this);this._onSwipeUpdate=this._onSwipeUpdate.bind(this);if(this._touchSwipe){this._touchSwipe.on(PointerTracker.START,this._onSwipeStart);this._touchSwipe.on(PointerTracker.UPDATE,this._onSwipeUpdate)}if(this._clickSwipe){this._clickSwipe.on(PointerTracker.START,this._onSwipeStart);this._clickSwipe.on(PointerTracker.UPDATE,this._onSwipeUpdate)}return returnValue};proto._onSwipeStart=function(evt){if(this._clip&&this._clip.playing()){this._destroyCurrentClip();this._positionX=this._getActualPositionX()}};proto._onSwipeUpdate=function(evt){this._destroyCurrentClip();this._snapToPosition(this._positionX-evt.diffX)};proto._onSwipeEnd=function(evt){var item=superProto._onSwipeEnd.call(this,evt);if(item===null){item=this.show(this._currentItem,{interactionEvent:evt.interactionEvent})}return item};proto._shuffleItems=function(){var twoItemGalleryIsEngaged=this._items.length===2&&!this._isAutoPlaying;if(twoItemGalleryIsEngaged){return this._items.slice()}var totalItems=this._items.length;var currentIndex=this._items.indexOf(this._currentItem);var middleIndex=Math.floor(totalItems*.5);var itemsToSlice;var removedItems;var remainingItems;if(currentIndex<middleIndex){itemsToSlice=middleIndex-currentIndex;var sliceIndex=totalItems-itemsToSlice;removedItems=this._items.slice(sliceIndex);remainingItems=this._items.slice(0,sliceIndex);return removedItems.concat(remainingItems)}else if(currentIndex>middleIndex){itemsToSlice=currentIndex-middleIndex;removedItems=this._items.slice(0,itemsToSlice);remainingItems=this._items.slice(itemsToSlice);return remainingItems.concat(removedItems)}return this._items};proto._updateItems=function(items,silent){this._destroyCurrentClip();if(this._wrapAround){this._positionItems(items.outgoing[0])}if(this.getItemIndex(items.outgoing[0])>-1){var callback=silent?null:this.trigger.bind(this,SlideGallery.UPDATE_COMPLETE,items);var duration=this._slideDuration;this._slideToPosition(items.incoming[0].position(),duration,callback);if(items.incoming[0]!==items.outgoing[0]){items.incoming[0].show();items.outgoing[0].hide()}}else{this._slideToPosition(this._currentItem.position(),this._slideDuration);items.incoming[0].show();if(!silent){this.trigger(SlideGallery.UPDATE_COMPLETE,items)}}};proto._updateWrapAround=function(){if(this._items.length<=2){this._wrapAround=false}else if(this._originalWrapAround){this._wrapAround=this._originalWrapAround}if(this._isInstantiated&&(this._previousButtons||this._nextButtons)){this._updatePaddleNavState()}};proto._destroyCurrentClip=function(){if(this._clip&&this._clip.playing()){this._clip.destroy()}};module.exports=SlideGallery},{"./../auto/AutoGallery":232,"./../helpers/getElementFullWidth":239,"./../helpers/selectElementFromDataAttributeValue":240,"./../helpers/selectElementThatHasDataAttribute":241,"./SlideItem":245,"./SlideItemWrapper":246,"@marcom/ac-classlist":8,"@marcom/ac-dom-styles":112,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-object/clone":123,"@marcom/ac-object/create":124,"@marcom/ac-pointer-tracker":132,"@marcom/ac-solar/moveX":225}],245:[function(require,module,exports){"use strict";var setStyle=require("@marcom/ac-dom-styles/setStyle");var create=require("@marcom/ac-object/create");var Item=require("./../Item");function SlideItem(el){Item.call(this,el);setStyle(el,{position:"absolute",transform:{translateZ:0}});this._parentElement=el.parentElement}SlideItem.CENTER_POINT_CHANGED="centerpointchanged";SlideItem.SELECTED=Item.SELECTED;SlideItem.SHOW=Item.SHOW;SlideItem.HIDE=Item.HIDE;var superProto=Item.prototype;var proto=SlideItem.prototype=create(superProto);proto.position=function(pos){if(pos!==undefined){this._position=pos}return this._position||0};proto.centerPoint=function(point){if(point!==undefined){this._centerPoint=point;this.trigger(SlideItem.CENTER_POINT_CHANGED)}return this._centerPoint!==undefined?this._centerPoint:null};proto.getOriginalParentElement=function(){return this._parentElement};proto.resize=function(){};proto.destroy=function(){setStyle(this._el,{position:null,left:null,transform:null});superProto.destroy.call(this)};module.exports=SlideItem},{"./../Item":229,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-object/create":124}],246:[function(require,module,exports){"use strict";var ac_classlist=require("@marcom/ac-classlist");var setStyle=require("@marcom/ac-dom-styles/setStyle");var ac_querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var create=require("@marcom/ac-object/create");var focusableSelectors=require("./../helpers/focusableSelectors");var getElementFullWidth=require("./../helpers/getElementFullWidth");var SlideItem=require("./SlideItem");var CSS_CLASSNAME="ac-gallery-slideitemwrapper";function SlideItemWrapper(){SlideItem.call(this,document.createElement("div"));this._items=[];this._currentWidth=0;ac_classlist.add(this._el,CSS_CLASSNAME)}var superProto=SlideItem.prototype;var proto=SlideItemWrapper.prototype=create(superProto);proto.addItem=function(el){this._items.push({el:el,parentElement:el.parentElement});this._el.appendChild(el);var elId=el.getAttribute("id");if(elId){var id=this._el.getAttribute("id")||"";var seperator=id.length?"-":"";id+=seperator+elId;this._el.setAttribute("id",id)}this._focusableEls=this._focusableEls.concat(ac_querySelectorAll(focusableSelectors,el))};proto.removeItems=function(){var el;var parentElement;var index=0;var length=this._items.length;for(index;index<length;index++){el=this._items[index].el;setStyle(el,{position:null,left:null});parentElement=this._items[index].parentElement;if(parentElement){parentElement.appendChild(el)}}};proto.resize=function(){this._currentWidth=0;var el;var index=0;var length=this._items.length;for(index;index<length;index++){el=this._items[index].el;setStyle(el,{position:"absolute",left:this._currentWidth+"px"});this._currentWidth+=getElementFullWidth(el)}setStyle(this._el,{width:this._currentWidth+"px"})};proto.destroy=function(){this.removeItems();this._items=null;this._currentWidth=null;var parentElement=this._el.parentElement;if(parentElement){parentElement.removeChild(this._el)}superProto.destroy.call(this)};module.exports=SlideItemWrapper},{"./../helpers/focusableSelectors":238,"./../helpers/getElementFullWidth":239,"./SlideItem":245,"@marcom/ac-classlist":8,"@marcom/ac-dom-styles/setStyle":115,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-object/create":124}],247:[function(require,module,exports){"use strict";var template="";template+='<nav class="paddlenav">';template+="<ul>";template+='<li><button class="paddlenav-arrow paddlenav-arrow-previous" data-ac-gallery-previous-trigger="%ID%"></button></li>';template+='<li><button class="paddlenav-arrow paddlenav-arrow-next" data-ac-gallery-next-trigger="%ID%"></button></li>';template+="</ul>";template+="</nav>";module.exports=template},{}],248:[function(require,module,exports){arguments[4][128][0].apply(exports,arguments)},{"./ac-browser/BrowserData":249,"./ac-browser/IE":250,dup:128}],249:[function(require,module,exports){arguments[4][129][0].apply(exports,arguments)},{"./data":251,"@marcom/ac-polyfills/Array/prototype.filter":359,"@marcom/ac-polyfills/Array/prototype.some":364,dup:129}],250:[function(require,module,exports){arguments[4][130][0].apply(exports,arguments)},{dup:130}],251:[function(require,module,exports){arguments[4][131][0].apply(exports,arguments)},{dup:131}],252:[function(require,module,exports){"use strict";module.exports={getContentDimensions:require("./getContentDimensions"),getDimensions:require("./getDimensions"),getPagePosition:require("./getPagePosition"),getPercentInViewport:require("./getPercentInViewport"),getPixelsInViewport:require("./getPixelsInViewport"),getPosition:require("./getPosition"),getScrollX:require("./getScrollX"),getScrollY:require("./getScrollY"),getViewportPosition:require("./getViewportPosition"),isInViewport:require("./isInViewport")}},{"./getContentDimensions":253,"./getDimensions":254,"./getPagePosition":255,"./getPercentInViewport":256,"./getPixelsInViewport":257,"./getPosition":258,"./getScrollX":259,"./getScrollY":260,"./getViewportPosition":261,"./isInViewport":262}],253:[function(require,module,exports){arguments[4][91][0].apply(exports,arguments)},{"./utils/getBoundingClientRect":263,dup:91}],254:[function(require,module,exports){arguments[4][92][0].apply(exports,arguments)},{"./utils/getBoundingClientRect":263,dup:92}],255:[function(require,module,exports){arguments[4][93][0].apply(exports,arguments)},{"./getDimensions":254,"./getScrollX":259,"./getScrollY":260,"./utils/getBoundingClientRect":263,dup:93}],256:[function(require,module,exports){arguments[4][94][0].apply(exports,arguments)},{"./getDimensions":254,"./getPixelsInViewport":257,dup:94}],257:[function(require,module,exports){arguments[4][95][0].apply(exports,arguments)},{"./getViewportPosition":261,dup:95}],258:[function(require,module,exports){arguments[4][96][0].apply(exports,arguments)},{"./getDimensions":254,"./utils/getBoundingClientRect":263,dup:96}],259:[function(require,module,exports){arguments[4][97][0].apply(exports,arguments)},{dup:97}],260:[function(require,module,exports){arguments[4][98][0].apply(exports,arguments)},{dup:98}],261:[function(require,module,exports){arguments[4][99][0].apply(exports,arguments)},{"./getPagePosition":255,"./getScrollX":259,"./getScrollY":260,"./utils/getBoundingClientRect":263,dup:99}],262:[function(require,module,exports){arguments[4][100][0].apply(exports,arguments)},{"./getPercentInViewport":256,"./getPixelsInViewport":257,dup:100}],263:[function(require,module,exports){arguments[4][101][0].apply(exports,arguments)},{dup:101}],264:[function(require,module,exports){"use strict";var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error("Second argument not supported")}if(proto===null||typeof proto!=="object"){throw new TypeError("Object prototype may only be an Object.")}if(typeof Object.create==="function"){return Object.create(proto)}else{F.prototype=proto;return new F}}},{}],265:[function(require,module,exports){"use strict";var extend=require("./extend");module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=="object"){throw new TypeError("defaults: must provide a defaults object")}options=options||{};if(typeof options!=="object"){throw new TypeError("defaults: options must be a typeof object")}return extend({},defaultsObj,options)}},{"./extend":266}],266:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.forEach");var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":360}],267:[function(require,module,exports){var ElementEngagement=require("./ac-element-engagement/ElementEngagement");module.exports=new ElementEngagement;module.exports.ElementEngagement=ElementEngagement},{"./ac-element-engagement/ElementEngagement":268}],268:[function(require,module,exports){"use strict";var proto;var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var ac_Object={create:require("@marcom/ac-object/create"),defaults:require("@marcom/ac-object/defaults"),extend:require("@marcom/ac-object/extend")};var Super=require("@marcom/ac-element-tracker").ElementTracker;var trackedElementDefaults={timeToEngage:500,inViewThreshold:.75,stopOnEngaged:true};var extendedTrackedElementProps={thresholdEnterTime:0,thresholdExitTime:0,inThreshold:false,engaged:false,tracking:true};var ElementEngagement=function(options){Super.call(this,null,options);EventEmitterMicro.call(this);this._thresholdEnter=this._thresholdEnter.bind(this);this._thresholdExit=this._thresholdExit.bind(this);this._enterView=this._enterView.bind(this);this._exitView=this._exitView.bind(this)};proto=ElementEngagement.prototype=ac_Object.create(Super.prototype);proto=ac_Object.extend(proto,EventEmitterMicro.prototype);proto._decorateTrackedElement=function(trackedElement,options){var extendedDefaults;extendedDefaults=ac_Object.defaults(trackedElementDefaults,options||{});ac_Object.extend(trackedElement,extendedDefaults);ac_Object.extend(trackedElement,extendedTrackedElementProps)};proto._attachElementListeners=function(trackedElement){trackedElement.on("thresholdenter",this._thresholdEnter,this);trackedElement.on("thresholdexit",this._thresholdExit,this);trackedElement.on("enterview",this._enterView,this);trackedElement.on("exitview",this._exitView,this)};proto._removeElementListeners=function(trackedElement){trackedElement.off("thresholdenter",this._thresholdEnter);trackedElement.off("thresholdexit",this._thresholdExit);trackedElement.off("enterview",this._enterView);trackedElement.off("exitview",this._exitView)};proto._attachAllElementListeners=function(){this.elements.forEach(function(trackedElement){if(!trackedElement.stopOnEngaged){this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){this._attachElementListeners(trackedElement)}},this)};proto._removeAllElementListeners=function(){this.elements.forEach(function(trackedElement){this._removeElementListeners(trackedElement)},this)};proto._elementInViewPastThreshold=function(trackedElement){var winHeight=document.documentElement.clientHeight||window.innerHeight;var isIt=false;if(trackedElement.pixelsInView===winHeight){isIt=true}else{isIt=trackedElement.percentInView>trackedElement.inViewThreshold}return isIt};proto._ifInView=function(trackedElement,alreadyInView){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifInView.apply(this,arguments);if(!alreadyInThreshold&&this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=true;trackedElement.trigger("thresholdenter",trackedElement);if(typeof trackedElement.timeToEngage==="number"&&trackedElement.timeToEngage>=0){trackedElement.engagedTimeout=window.setTimeout(this._engaged.bind(this,trackedElement),trackedElement.timeToEngage)}}};proto._ifAlreadyInView=function(trackedElement){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifAlreadyInView.apply(this,arguments);if(alreadyInThreshold&&!this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=false;trackedElement.trigger("thresholdexit",trackedElement);if(trackedElement.engagedTimeout){window.clearTimeout(trackedElement.engagedTimeout);trackedElement.engagedTimeout=null}}};proto._engaged=function(trackedElement){trackedElement.engagedTimeout=null;this._elementEngaged(trackedElement);trackedElement.trigger("engaged",trackedElement);this.trigger("engaged",trackedElement)};proto._thresholdEnter=function(trackedElement){trackedElement.thresholdEnterTime=Date.now();trackedElement.thresholdExitTime=0;this.trigger("thresholdenter",trackedElement)};proto._thresholdExit=function(trackedElement){trackedElement.thresholdExitTime=Date.now();this.trigger("thresholdexit",trackedElement)};proto._enterView=function(trackedElement){this.trigger("enterview",trackedElement)};proto._exitView=function(trackedElement){this.trigger("exitview",trackedElement)};proto._elementEngaged=function(trackedElement){trackedElement.engaged=true;if(trackedElement.stopOnEngaged){this.stop(trackedElement)}};proto.stop=function(trackedElement){if(this.tracking&&!trackedElement){this._removeAllElementListeners();Super.prototype.stop.call(this)}if(trackedElement&&trackedElement.tracking){trackedElement.tracking=false;this._removeElementListeners(trackedElement)}};proto.start=function(trackedElement){if(!trackedElement){this._attachAllElementListeners()}if(trackedElement&&!trackedElement.tracking){if(!trackedElement.stopOnEngaged){trackedElement.tracking=true;this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){trackedElement.tracking=true;this._attachElementListeners(trackedElement)}}if(!this.tracking){Super.prototype.start.call(this)}else{this.refreshAllElementMetrics();this.refreshAllElementStates()}};proto.addElement=function(element,options){options=options||{};var trackedElement=Super.prototype.addElement.call(this,element,options.useRenderedPosition);this._decorateTrackedElement(trackedElement,options);return trackedElement};proto.addElements=function(collection,options){[].forEach.call(collection,function(element){this.addElement(element,options)},this)};module.exports=ElementEngagement},{"@marcom/ac-element-tracker":292,"@marcom/ac-event-emitter-micro":295,"@marcom/ac-object/create":264,"@marcom/ac-object/defaults":265,"@marcom/ac-object/extend":266}],269:[function(require,module,exports){"use strict";module.exports={flatten:require("./flatten"),intersection:require("./intersection"),shuffle:require("./shuffle"),toArray:require("./toArray"),union:require("./union"),unique:require("./unique"),without:require("./without")}},{"./flatten":270,"./intersection":271,"./shuffle":272,"./toArray":273,"./union":274,"./unique":275,"./without":276}],270:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");require("@marcom/ac-polyfills/Array/prototype.forEach");module.exports=function flatten(array){var flattenedArray=[];var callback=function(item){if(Array.isArray(item)){item.forEach(callback)}else{flattenedArray.push(item)}};array.forEach(callback);return flattenedArray}},{"@marcom/ac-polyfills/Array/isArray":357,"@marcom/ac-polyfills/Array/prototype.forEach":360}],271:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");module.exports=function intersection(array){if(!array){return[]}var argsLength=arguments.length;var i=0;var len=array.length;var result=[];var item;for(i;i<len;i++){item=array[i];if(result.indexOf(item)>-1){continue}for(var j=1;j<argsLength;j++){if(arguments[j].indexOf(item)<0){break}}if(j===argsLength){result.push(item)}}return result}},{"@marcom/ac-polyfills/Array/prototype.indexOf":361}],272:[function(require,module,exports){"use strict";module.exports=function shuffle(array){var len=array.length;var index;var temp;while(len){index=Math.floor(Math.random()*len--);temp=array[len];array[len]=array[index];array[index]=temp}return array}},{}],273:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");module.exports=function toArray(arrayLike){return Array.prototype.slice.call(arrayLike)}},{"@marcom/ac-polyfills/Array/prototype.slice":363}],274:[function(require,module,exports){"use strict";var flatten=require("./flatten");var toArray=require("./toArray");var unique=require("./unique");module.exports=function union(array){return unique(flatten(toArray(arguments)))}},{"./flatten":270,"./toArray":273,"./unique":275}],275:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");require("@marcom/ac-polyfills/Array/prototype.reduce");module.exports=function unique(array){var _unique=function(prev,current){if(prev.indexOf(current)<0){prev.push(current)}return prev};return array.reduce(_unique,[])}},{"@marcom/ac-polyfills/Array/prototype.indexOf":361,"@marcom/ac-polyfills/Array/prototype.reduce":362}],276:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");require("@marcom/ac-polyfills/Array/prototype.slice");module.exports=function without(arr,value,recurse){var newArr;var index=arr.indexOf(value);var length=arr.length;if(index>=0){if(recurse){newArr=arr.slice(0,length);var i,amountRemoved=0;for(i=index;i<length;i++){if(arr[i]===value){newArr.splice(i-amountRemoved,1);amountRemoved++}}}else if(index===length-1){newArr=arr.slice(0,length-1)}else if(index===0){newArr=arr.slice(1)}else{newArr=arr.slice(0,index);newArr=newArr.concat(arr.slice(index+1))}}else{return arr}return newArr}},{"@marcom/ac-polyfills/Array/prototype.indexOf":361,"@marcom/ac-polyfills/Array/prototype.slice":363}],277:[function(require,module,exports){"use strict";var qs=require("qs");module.exports=function joinSearchParams(obj,questionMark){var str=qs.stringify(obj,{strictNullHandling:true});if(str&&questionMark!==false){str="?"+str}return str}},{qs:278}],278:[function(require,module,exports){var Stringify=require("./stringify");var Parse=require("./parse");var internals={};module.exports={stringify:Stringify,parse:Parse}},{"./parse":279,"./stringify":280}],279:[function(require,module,exports){var Utils=require("./utils");var internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:false,plainObjects:false,allowPrototypes:false};internals.parseValues=function(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0,il=parts.length;i<il;++i){var part=parts[i];var pos=part.indexOf("]=")===-1?part.indexOf("="):part.indexOf("]=")+1;if(pos===-1){obj[Utils.decode(part)]="";if(options.strictNullHandling){obj[Utils.decode(part)]=null}}else{var key=Utils.decode(part.slice(0,pos));var val=Utils.decode(part.slice(pos+1));if(!Object.prototype.hasOwnProperty.call(obj,key)){obj[key]=val}else{obj[key]=[].concat(obj[key]).concat(val)}}}return obj};internals.parseObject=function(chain,val,options){if(!chain.length){return val}var root=chain.shift();var obj;if(root==="[]"){obj=[];obj=obj.concat(internals.parseObject(chain,val,options))}else{obj=options.plainObjects?Object.create(null):{};var cleanRoot=root[0]==="["&&root[root.length-1]==="]"?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);var indexString=""+index;if(!isNaN(index)&&root!==cleanRoot&&indexString===cleanRoot&&index>=0&&(options.parseArrays&&index<=options.arrayLimit)){obj=[];obj[index]=internals.parseObject(chain,val,options)}else{obj[cleanRoot]=internals.parseObject(chain,val,options)}}return obj};internals.parseKeys=function(key,val,options){if(!key){return}if(options.allowDots){key=key.replace(/\.([^\.\[]+)/g,"[$1]")}var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);var keys=[];if(segment[1]){if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1])){if(!options.allowPrototypes){return}}keys.push(segment[1])}var i=0;while((segment=child.exec(key))!==null&&i<options.depth){++i;if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))){if(!options.allowPrototypes){continue}}keys.push(segment[1])}if(segment){keys.push("["+key.slice(segment.index)+"]")}return internals.parseObject(keys,val,options)};module.exports=function(str,options){options=options||{};options.delimiter=typeof options.delimiter==="string"||Utils.isRegExp(options.delimiter)?options.delimiter:internals.delimiter;options.depth=typeof options.depth==="number"?options.depth:internals.depth;options.arrayLimit=typeof options.arrayLimit==="number"?options.arrayLimit:internals.arrayLimit;options.parseArrays=options.parseArrays!==false;options.allowDots=options.allowDots!==false;options.plainObjects=typeof options.plainObjects==="boolean"?options.plainObjects:internals.plainObjects;options.allowPrototypes=typeof options.allowPrototypes==="boolean"?options.allowPrototypes:internals.allowPrototypes;options.parameterLimit=typeof options.parameterLimit==="number"?options.parameterLimit:internals.parameterLimit;options.strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:internals.strictNullHandling;if(str===""||str===null||typeof str==="undefined"){return options.plainObjects?Object.create(null):{}}var tempObj=typeof str==="string"?internals.parseValues(str,options):str;var obj=options.plainObjects?Object.create(null):{};var keys=Object.keys(tempObj);for(var i=0,il=keys.length;i<il;++i){var key=keys[i];var newObj=internals.parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj,options)}return Utils.compact(obj)}},{"./utils":281}],280:[function(require,module,exports){var Utils=require("./utils");var internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(prefix,key){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix,key){return prefix}},strictNullHandling:false};internals.stringify=function(obj,prefix,generateArrayPrefix,strictNullHandling,filter){if(typeof filter==="function"){obj=filter(prefix,obj)}else if(Utils.isBuffer(obj)){obj=obj.toString()}else if(obj instanceof Date){obj=obj.toISOString()}else if(obj===null){if(strictNullHandling){return Utils.encode(prefix)}obj=""}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"){return[Utils.encode(prefix)+"="+Utils.encode(obj)]}var values=[];if(typeof obj==="undefined"){return values}var objKeys=Array.isArray(filter)?filter:Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];if(Array.isArray(obj)){values=values.concat(internals.stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,filter))}else{values=values.concat(internals.stringify(obj[key],prefix+"["+key+"]",generateArrayPrefix,strictNullHandling,filter))}}return values};module.exports=function(obj,options){options=options||{};var delimiter=typeof options.delimiter==="undefined"?internals.delimiter:options.delimiter;var strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:internals.strictNullHandling;var objKeys;var filter;if(typeof options.filter==="function"){filter=options.filter;obj=filter("",obj)}else if(Array.isArray(options.filter)){objKeys=filter=options.filter}var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(options.arrayFormat in internals.arrayPrefixGenerators){arrayFormat=options.arrayFormat}else if("indices"in options){arrayFormat=options.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=internals.arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj)}for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];keys=keys.concat(internals.stringify(obj[key],key,generateArrayPrefix,strictNullHandling,filter))}return keys.join(delimiter)}},{"./utils":281}],281:[function(require,module,exports){var internals={};internals.hexTable=new Array(256);for(var h=0;h<256;++h){internals.hexTable[h]="%"+((h<16?"0":"")+h.toString(16)).toUpperCase()}exports.arrayToObject=function(source,options){var obj=options.plainObjects?Object.create(null):{};for(var i=0,il=source.length;i<il;++i){if(typeof source[i]!=="undefined"){obj[i]=source[i]}}return obj};exports.merge=function(target,source,options){if(!source){return target}if(typeof source!=="object"){if(Array.isArray(target)){target.push(source)}else if(typeof target==="object"){target[source]=true}else{target=[target,source]}return target}if(typeof target!=="object"){target=[target].concat(source);return target}if(Array.isArray(target)&&!Array.isArray(source)){target=exports.arrayToObject(target,options)}var keys=Object.keys(source);for(var k=0,kl=keys.length;k<kl;++k){var key=keys[k];var value=source[key];if(!Object.prototype.hasOwnProperty.call(target,key)){target[key]=value}else{target[key]=exports.merge(target[key],value,options)}}return target};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.encode=function(str){if(str.length===0){return str}if(typeof str!=="string"){str=""+str}var out="";for(var i=0,il=str.length;i<il;++i){var c=str.charCodeAt(i);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){out+=str[i];continue}if(c<128){out+=internals.hexTable[c];continue}if(c<2048){out+=internals.hexTable[192|c>>6]+internals.hexTable[128|c&63];continue}if(c<55296||c>=57344){out+=internals.hexTable[224|c>>12]+internals.hexTable[128|c>>6&63]+internals.hexTable[128|c&63];continue}++i;c=65536+((c&1023)<<10|str.charCodeAt(i)&1023);out+=internals.hexTable[240|c>>18]+internals.hexTable[128|c>>12&63]+internals.hexTable[128|c>>6&63]+internals.hexTable[128|c&63]}return out};exports.compact=function(obj,refs){if(typeof obj!=="object"||obj===null){return obj}refs=refs||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0,il=obj.length;i<il;++i){if(typeof obj[i]!=="undefined"){compacted.push(obj[i])}}return compacted}var keys=Object.keys(obj);for(i=0,il=keys.length;i<il;++i){var key=keys[i];obj[key]=exports.compact(obj[key],refs)}return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.isBuffer=function(obj){if(obj===null||typeof obj==="undefined"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],282:[function(require,module,exports){"use strict";module.exports={clone:require("./clone"),create:require("./create"),defaults:require("./defaults"),extend:require("./extend"),getPrototypeOf:require("./getPrototypeOf"),isDate:require("./isDate"),isEmpty:require("./isEmpty"),isRegExp:require("./isRegExp"),toQueryParameters:require("./toQueryParameters")}},{"./clone":283,"./create":284,"./defaults":285,"./extend":286,"./getPrototypeOf":287,"./isDate":288,"./isEmpty":289,"./isRegExp":290,"./toQueryParameters":291}],283:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");var extend=require("./extend");var hasOwnProp=Object.prototype.hasOwnProperty;var deepClone=function(dest,source){var prop;for(prop in source){if(hasOwnProp.call(source,prop)){if(source[prop]===null){dest[prop]=null}else if(typeof source[prop]==="object"){dest[prop]=Array.isArray(source[prop])?[]:{};deepClone(dest[prop],source[prop])}else{dest[prop]=source[prop]}}}return dest};module.exports=function clone(object,deep){if(deep){return deepClone({},object)}return extend({},object)}},{"./extend":286,"@marcom/ac-polyfills/Array/isArray":357}],284:[function(require,module,exports){arguments[4][264][0].apply(exports,arguments)},{dup:264}],285:[function(require,module,exports){arguments[4][265][0].apply(exports,arguments)},{"./extend":286,dup:265}],286:[function(require,module,exports){arguments[4][266][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":360,dup:266}],287:[function(require,module,exports){"use strict";var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function getPrototypeOf(obj){if(Object.getPrototypeOf){return Object.getPrototypeOf(obj)}else{if(typeof obj!=="object"){throw new Error("Requested prototype of a value that is not an object.")}else if(typeof this.__proto__==="object"){return obj.__proto__}else{var constructor=obj.constructor;var oldConstructor;if(hasOwnProp.call(obj,"constructor")){oldConstructor=constructor;if(!delete obj.constructor){return null}constructor=obj.constructor;obj.constructor=oldConstructor}return constructor?constructor.prototype:null}}}},{}],288:[function(require,module,exports){"use strict";module.exports=function isDate(date){return Object.prototype.toString.call(date)==="[object Date]"}},{}],289:[function(require,module,exports){"use strict";var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function isEmpty(object){var prop;if(typeof object!=="object"){throw new TypeError("ac-base.Object.isEmpty : Invalid parameter - expected object")}for(prop in object){if(hasOwnProp.call(object,prop)){return false}}return true}},{}],290:[function(require,module,exports){"use strict";module.exports=function isRegExp(obj){return window.RegExp?obj instanceof RegExp:false}},{}],291:[function(require,module,exports){"use strict";var joinSearchParams=require("@marcom/ac-url/joinSearchParams");module.exports=function toQueryParameters(object){if(typeof object!=="object"){throw new TypeError("toQueryParameters error: argument is not an object")}return joinSearchParams(object,false)}},{"@marcom/ac-url/joinSearchParams":277}],292:[function(require,module,exports){var ElementTracker=require("./ac-element-tracker/ElementTracker");module.exports=new ElementTracker;module.exports.ElementTracker=ElementTracker},{"./ac-element-tracker/ElementTracker":293}],293:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Function/prototype.bind");var ac_Array=require("@marcom/ac-array");var ac_dom_nodes=require("@marcom/ac-dom-nodes");var ac_dom_metrics={getDimensions:require("@marcom/ac-dom-metrics/getDimensions"),getPagePosition:require("@marcom/ac-dom-metrics/getPagePosition"),getScrollY:require("@marcom/ac-dom-metrics/getScrollY")};var ac_dom_events=require("@marcom/ac-dom-events");var ac_Object=require("@marcom/ac-object");var TrackedElement=require("./TrackedElement");var defaultOptions={autoStart:false,useRenderedPosition:false};function ElementTracker(elements,options){this.options=ac_Object.clone(defaultOptions);this.options=typeof options==="object"?ac_Object.extend(this.options,options):this.options;this._scrollY=this._getScrollY();this._windowHeight=this._getWindowHeight();this.tracking=false;this.elements=[];if(elements&&(Array.isArray(elements)||ac_dom_nodes.isNodeList(elements)||ac_dom_nodes.isElement(elements))){this.addElements(elements)}this.refreshAllElementStates=this.refreshAllElementStates.bind(this);this.refreshAllElementMetrics=this.refreshAllElementMetrics.bind(this);if(this.options.autoStart){this.start()}}var proto=ElementTracker.prototype;proto.destroy=function(){var i,len;this.stop();for(i=0,len=this.elements.length;i<len;i++){this.elements[i].destroy()}this.elements=null;this.options=null};proto._registerElements=function(elements){elements=[].concat(elements);elements.forEach(function(element){if(this._elementInDOM(element)){var trackedElement=new TrackedElement(element,this.options.useRenderedPosition);trackedElement.offsetTop=trackedElement.element.offsetTop;this.elements.push(trackedElement)}},this)};proto._registerTrackedElements=function(trackedElements){var objects=[].concat(trackedElements);objects.forEach(function(object){if(this._elementInDOM(object.element)){object.offsetTop=object.element.offsetTop;this.elements.push(object)}},this)};proto._elementInDOM=function(element){var assertion=false;var body=document.getElementsByTagName("body")[0];if(ac_dom_nodes.isElement(element)&&body.contains(element)){assertion=true}return assertion};proto._elementPercentInView=function(trackedElement){return trackedElement.pixelsInView/trackedElement.height};proto._elementPixelsInView=function(trackedElement){var elementTop=trackedElement.top-this._scrollY;var elementBottom=trackedElement.bottom-this._scrollY;if(elementTop>this._windowHeight||elementBottom<0){return 0}return Math.min(elementBottom,this._windowHeight)-Math.max(elementTop,0)};proto._ifInView=function(trackedElement,alreadyInView){if(!alreadyInView){trackedElement.trigger("enterview",trackedElement)}};proto._ifAlreadyInView=function(trackedElement){if(!trackedElement.inView){trackedElement.trigger("exitview",trackedElement)}};proto.addElements=function(collection,useRenderedPosition){if(typeof useRenderedPosition==="undefined"){useRenderedPosition=this.options.useRenderedPosition}collection=ac_dom_nodes.isNodeList(collection)?ac_Array.toArray(collection):[].concat(collection);for(var i=0,len=collection.length;i<len;i++){this.addElement(collection[i],useRenderedPosition)}};proto.addElement=function(element,useRenderedPosition){var trackedElement=null;if(typeof useRenderedPosition==="undefined"){useRenderedPosition=this.options.useRenderedPosition}if(ac_dom_nodes.isElement(element)){trackedElement=new TrackedElement(element,useRenderedPosition);this._registerTrackedElements(trackedElement);this.refreshElementMetrics(trackedElement);this.refreshElementState(trackedElement)}else{throw new TypeError("ElementTracker: "+element+" is not a valid DOM element")}return trackedElement};proto.removeElement=function(element){var indexes=[];var filtered;this.elements.forEach(function(trackedElement,i){if(trackedElement===element||trackedElement.element===element){indexes.push(i)}});filtered=this.elements.filter(function(element,i){return indexes.indexOf(i)<0});this.elements=filtered};proto.start=function(){if(this.tracking===false){this.tracking=true;ac_dom_events.addEventListener(window,"resize",this.refreshAllElementMetrics);ac_dom_events.addEventListener(window,"orientationchange",this.refreshAllElementMetrics);ac_dom_events.addEventListener(window,"scroll",this.refreshAllElementStates);this.refreshAllElementMetrics()}};proto.stop=function(){if(this.tracking===true){this.tracking=false;ac_dom_events.removeEventListener(window,"resize",this.refreshAllElementMetrics);ac_dom_events.removeEventListener(window,"orientationchange",this.refreshAllElementMetrics);ac_dom_events.removeEventListener(window,"scroll",this.refreshAllElementStates)}};proto.refreshAllElementMetrics=function(currentScrollY,windowHeight){if(typeof currentScrollY!=="number"){currentScrollY=this._getScrollY()}if(typeof windowHeight!=="number"){windowHeight=this._getWindowHeight()}this._scrollY=currentScrollY;this._windowHeight=windowHeight;this.elements.forEach(this.refreshElementMetrics,this)};proto.refreshElementMetrics=function(trackedElement){var dimensions=ac_dom_metrics.getDimensions(trackedElement.element,trackedElement.useRenderedPosition);var position=ac_dom_metrics.getPagePosition(trackedElement.element,trackedElement.useRenderedPosition);trackedElement=ac_Object.extend(trackedElement,dimensions,position);return this.refreshElementState(trackedElement)};proto.refreshAllElementStates=function(currentScrollY){if(typeof currentScrollY!=="number"){currentScrollY=this._getScrollY()}this._scrollY=currentScrollY;this.elements.forEach(this.refreshElementState,this)};proto.refreshElementState=function(trackedElement){var alreadyInView=trackedElement.inView;trackedElement.pixelsInView=this._elementPixelsInView(trackedElement);trackedElement.percentInView=this._elementPercentInView(trackedElement);trackedElement.inView=trackedElement.pixelsInView>0;if(trackedElement.inView){this._ifInView(trackedElement,alreadyInView)}if(alreadyInView){this._ifAlreadyInView(trackedElement)}return trackedElement};proto._getWindowHeight=function(){return document.documentElement.clientHeight||window.innerHeight};proto._getScrollY=function(){return ac_dom_metrics.getScrollY()};module.exports=ElementTracker},{"./TrackedElement":294,"@marcom/ac-array":269,"@marcom/ac-dom-events":13,"@marcom/ac-dom-metrics/getDimensions":254,"@marcom/ac-dom-metrics/getPagePosition":255,"@marcom/ac-dom-metrics/getScrollY":260,"@marcom/ac-dom-nodes":37,"@marcom/ac-object":282,"@marcom/ac-polyfills/Function/prototype.bind":367}],294:[function(require,module,exports){"use strict";var objCreate=require("@marcom/ac-object").create;var ac_dom_nodes=require("@marcom/ac-dom-nodes");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var superclass=EventEmitterMicro.prototype;function TrackedElement(element,useRenderedPosition){if(!ac_dom_nodes.isElement(element)){throw new TypeError("TrackedElement: "+element+" is not a valid DOM element")}EventEmitterMicro.call(this);this.element=element;this.inView=false;this.percentInView=0;this.pixelsInView=0;this.offsetTop=0;this.top=0;this.right=0;this.bottom=0;this.left=0;this.width=0;this.height=0;this.useRenderedPosition=useRenderedPosition||false}var proto=TrackedElement.prototype=objCreate(superclass);proto.destroy=function(){this.element=null;superclass.destroy.call(this)};module.exports=TrackedElement},{"@marcom/ac-dom-nodes":37,"@marcom/ac-event-emitter-micro":295,"@marcom/ac-object":282}],295:[function(require,module,exports){"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":296}],296:[function(require,module,exports){"use strict";function EventEmitterMicro(){this._events={}}var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===false||this._events[eventName].length===0){return false}return true};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}this._events=null};module.exports=EventEmitterMicro},{}],297:[function(require,module,exports){module.exports={core:{BaseComponent:require("./core/BaseComponent"),BasePage:require("./core/BasePage"),BaseSection:require("./core/BaseSection"),LocalNavStyleChanger:require("./core/LocalNavStyleChanger")},model:{ComponentMap:require("./model/ComponentMap"),DataAttributes:require("./model/DataAttributes"),EnabledFeatures:require("./model/EnabledFeatures"),PageMap:require("./model/PageMap"),SectionMap:require("./model/SectionMap"),TransitionType:require("./model/TransitionType")}}},{"./core/BaseComponent":298,"./core/BasePage":299,"./core/BaseSection":300,"./core/LocalNavStyleChanger":301,"./model/ComponentMap":302,"./model/DataAttributes":303,"./model/EnabledFeatures":304,"./model/PageMap":305,"./model/SectionMap":306,"./model/TransitionType":307}],298:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");require("@marcom/ac-polyfills/Element/prototype.classList");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,superclass=EventEmitterMicro.prototype;function BaseComponent(section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index){if(arguments.length!==7){throw new Error("Incorrect number of arguments passed to BaseComponent check the constructor or BaseComponent.call method - argument's should be (section, componentElement, componentName, currentBreakpoint, scrollPosition, windowHeight, index)")}EventEmitterMicro.call(this);this.section=section;this.element=componentElement;this.componentName=componentName;this.index=index;this.rafWhenVisible=this.rafWhenVisible||false}var proto=BaseComponent.prototype=Object.create(EventEmitterMicro.prototype);BaseComponent.prototype.constructor=BaseComponent;proto.destroy=function(){this.teardownEvents();this.section=null;superclass.destroy.call(this)};proto.setupEvents=function(){};proto.teardownEvents=function(){};proto.onSectionWillAppear=function(scrollPosition,windowHeight){};proto.activate=function(){};proto.animateIn=function(){};proto.onRequestAnimationFrame=function(){};proto.deactivate=function(){};proto.onScroll=function(e,scrollPosition,windowHeight){};proto.onSectionWillDisappear=function(scrollPosition,windowHeight){};proto.onResize=function(e,scrollPosition,windowHeight){};proto.onResizeWillBeCalledAfterDelay=function(e,scrollPosition,windowHeight){};proto.onBreakpoint=function(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight){};module.exports=BaseComponent},{"@marcom/ac-event-emitter-micro":295,"@marcom/ac-polyfills/Element/prototype.classList":366,"@marcom/ac-polyfills/Object/create":369}],299:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Element/prototype.classList");require("@marcom/ac-polyfills/Object/assign");var querySelector=require("@marcom/ac-dom-traversal/querySelector");var querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var ac_addEventListener=require("@marcom/ac-dom-events/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/removeEventListener");var ElementTracker=require("@marcom/ac-element-tracker").ElementTracker;var ViewportEmitter=require("@marcom/ac-viewport-emitter");if(!ViewportEmitter.viewport){throw new Error("Jetpack Error: Required module `ac-viewport-emitter` not initialized properly (missing required css styles). Please see `ac-viewport-emitter` documentation.")}var LocalNavStyleChanger=require("./LocalNavStyleChanger");var BaseSection=require("./BaseSection");var SectionMap=require("../model/SectionMap");var DataAttributes=require("../model/DataAttributes");function BasePage(){this.name=this.name||"[NOT SET]";this._mainEl=querySelector("main,.main");this._sections=[];this._visibleSections=[];this._elementTracker=new ElementTracker(null,{autoStart:true});this._currentSection=null;this._sectionUnderLocalNav=null;this._currentBreakpoint=ViewportEmitter.viewport;this._cachedScrollY=this._getScrollY(true);this._cachedWindowHeight=this._getWindowHeight(true);this._rafId=-1;this._resizeTimeout=-1;this._resizeTimeoutDelay=this._resizeTimeoutDelay||250;this.setupEvents();this.setupSections();this._updateSectionVisibility(this._getScrollY(),this._getWindowHeight());this.setupLocalNavStyleChanger();this._updateLocalNavTheme(this._getScrollY(),this._getWindowHeight());this._onRequestAnimationFrame()}var proto=BasePage.prototype;proto.destroy=function(){for(var i=0,len=this._sections.length;i<len;i++){this._sections[i].destroy()}this.teardownEvents();this._elementTracker.destroy();this._elementTracker=null;this._sections=null;this._currentSection=null;this._sectionUnderLocalNav=null;this._visibleSections=null;this._mainEl=null};proto.setupEvents=function(){this._onScroll=this._onScroll.bind(this);this._onResize=this._onResize.bind(this);this._onResizeWillBeCalledAfterDelay=this._onResizeWillBeCalledAfterDelay.bind(this);this._onBreakpoint=this._onBreakpoint.bind(this);this._onPageDidAppear=this._onPageDidAppear.bind(this);this._onPageWillDisappear=this._onPageWillDisappear.bind(this);this._onRequestAnimationFrame=this._onRequestAnimationFrame.bind(this);ac_addEventListener(window,"scroll",this._onScroll);ac_addEventListener(window,"resize",this._onResizeWillBeCalledAfterDelay);ac_addEventListener(window,"orientationchange",this._onResize);ViewportEmitter.on("change",this._onBreakpoint)};proto.teardownEvents=function(){ac_removeEventListener(window,"scroll",this._onScroll);ac_removeEventListener(window,"resize",this._onResizeWillBeCalledAfterDelay);ac_removeEventListener(window,"orientationchange",this._onResize);ViewportEmitter.off("change",this._onBreakpoint);this._elementTracker.stop();clearTimeout(this._resizeTimeoutDelay);cancelAnimationFrame(this._rafId)};proto.setupSections=function(){var nodes=querySelectorAll("section,.section,[data-section-type]",this._mainEl);var scrollPosition=this._getScrollY();var breakPointInfo=this._getCurrentBreakpoint();var windowHeight=this._getVisibleBottomOfPage()-scrollPosition;var skipped=[];for(var i=0,len=nodes.length;i<len;i++){var element=nodes[i];if(element.parentNode!==this._mainEl){if(element.hasAttribute(DataAttributes.SECTION_TYPE)){console.error("BasePage::setupSections FOUND NESTED data-section-type",element)}skipped.push(element);continue}var trackedElement=this._elementTracker.addElement(element);this._elementTracker.refreshElementState(trackedElement);var sectionType=element.hasAttribute(DataAttributes.SECTION_TYPE)?element.getAttribute(DataAttributes.SECTION_TYPE):"BaseSection";if(sectionType==="")sectionType="BaseSection";if(!SectionMap.hasOwnProperty(sectionType)){throw"BasePage::setupSections no section type '"+sectionType+"'found!"}var SectionConstructor=SectionMap[sectionType];var section=new SectionConstructor(element,trackedElement,breakPointInfo,scrollPosition,windowHeight,i);section.setupEvents();this._sections.push(section)}};proto.setupLocalNavStyleChanger=function(){LocalNavStyleChanger.setCurrentSection(this._currentSection);var pageName=this._mainEl.getAttribute("data-page-type");LocalNavStyleChanger.setCurrentPage(pageName)};proto._activateSection=function(section){if(this._currentSection===section)return;if(this._currentSection)this._currentSection.deactivate();this._currentSection=section;this._currentSection.activate()};proto._updateSectionVisibility=function(scrollPosition,windowHeight){var closestSection=this._sections[0];var newVisibleSections=[];var mostPixelsInView=0;for(var i=0,len=this._sections.length;i<len;i++){var section=this._sections[i];var pixelsInView=section.trackedElement.pixelsInView;var isProbablyFixedHero=i===0&&section.trackedElement.top===0;if(isProbablyFixedHero){pixelsInView=windowHeight-scrollPosition}if(pixelsInView>mostPixelsInView){closestSection=section;mostPixelsInView=pixelsInView}if(pixelsInView>1e-6){newVisibleSections.push(section)}}for(i=0,len=Math.max(this._visibleSections.length,newVisibleSections.length);i<len;i++){if(this._visibleSections[i]&&newVisibleSections.indexOf(this._visibleSections[i])===-1){this._visibleSections[i].onViewWillDisappear(scrollPosition,windowHeight)}if(newVisibleSections[i]&&this._visibleSections.indexOf(newVisibleSections[i])===-1){newVisibleSections[i].onViewWillAppear(scrollPosition,windowHeight)}}this._visibleSections=newVisibleSections;this._activateSection(closestSection)};proto._updateLocalNavTheme=function(scrollPosition,windowHeight){this._sectionUnderLocalNav=this._visibleSections[0];for(var i=0,len=this._visibleSections.length;i<len;i++){if(scrollPosition+LocalNavStyleChanger.height>this._visibleSections[i].scrollToPosition){this._sectionUnderLocalNav=this._visibleSections[i]}}if(this._sectionUnderLocalNav){LocalNavStyleChanger.setCurrentSection(this._sectionUnderLocalNav)}};proto._onPageDidAppear=function(data){};proto._onPageWillDisappear=function(data){this.destroy()};proto._onBreakpoint=function(e){var incoming=e.to;var outgoing=e.from;this._currentBreakpoint=incoming;var scrollPosition=this._getScrollY();var windowHeight=this._getWindowHeight();for(var i=0;i<this._sections.length;i++){this._sections[i].onBreakpoint(incoming,outgoing,scrollPosition,windowHeight)}};proto._onScroll=function(e){var scrollPosition=this._getScrollY(true);var windowHeight=this._getWindowHeight();this._updateSectionVisibility(scrollPosition,windowHeight);this._updateLocalNavTheme(scrollPosition,windowHeight);for(var i=0,len=this._visibleSections.length;i<len;i++){this._visibleSections[i].onScroll(e,scrollPosition,windowHeight)}};proto._onResize=function(e){var scrollPosition=this._getScrollY();var windowHeight=this._getWindowHeight();for(var i=0,len=this._sections.length;i<len;i++){this._sections[i].onResize(e,scrollPosition,windowHeight)}this._updateSectionVisibility(scrollPosition,windowHeight);this._updateLocalNavTheme(scrollPosition,windowHeight)};proto._onResizeWillBeCalledAfterDelay=function(e){var scrollPosition=this._getScrollY();var windowHeight=this._getWindowHeight(true);for(var i=0,len=this._sections.length;i<len;i++){this._sections[i].onResizeWillBeCalledAfterDelay(e,scrollPosition,windowHeight)}window.clearTimeout(this._resizeTimeout);this._resizeTimeout=window.setTimeout(this._onResize.bind(this,e),this._resizeTimeoutDelay)};proto._onRequestAnimationFrame=function(){this._rafId=requestAnimationFrame(this._onRequestAnimationFrame);for(var i=0,len=this._visibleSections.length;i<len;i++){var visibleSection=this._visibleSections[i];if(visibleSection.rafWhenVisible||visibleSection.isActive)visibleSection.onRequestAnimationFrame()}};proto._getScrollY=function(needsUpdate){if(needsUpdate){this._cachedScrollY=window.pageYOffset||(document.documentElement||document.body).scrollTop}return this._cachedScrollY};proto._getWindowHeight=function(needsUpdate){if(needsUpdate){this._cachedWindowHeight=document.documentElement.clientHeight||window.innerHeight}return this._cachedWindowHeight};proto._getVisibleBottomOfPage=function(){return this._getScrollY()+this._getWindowHeight()};proto._getCurrentBreakpoint=function(){return this._currentBreakpoint};module.exports=BasePage},{"../model/DataAttributes":303,"../model/SectionMap":306,"./BaseSection":300,"./LocalNavStyleChanger":301,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-traversal/querySelector":69,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-element-tracker":292,"@marcom/ac-polyfills/Element/prototype.classList":366,"@marcom/ac-polyfills/Object/assign":368,"@marcom/ac-viewport-emitter":376}],300:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");require("@marcom/ac-polyfills/Element/prototype.classList");var DomMetrics=require("@marcom/ac-dom-metrics");var ElementEngagement=require("@marcom/ac-element-engagement").ElementEngagement;var querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var DataAttributes=require("./../model/DataAttributes");var ComponentMap=require("./../model/ComponentMap");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var superclass=EventEmitterMicro.prototype;function BaseSection(element,trackedElement,currentBreakpoint,scrollPosition,windowHeight,index){if(arguments.length!==6){throw new Error("Incorrect number of arguments passed to BaseSection")}EventEmitterMicro.call(this);this.element=element;this.trackedElement=trackedElement;this.elementEngagement=new ElementEngagement(null,{autoStart:false});this.rafWhenVisible=this.rafWhenVisible||false;this.index=index;this.hasAnimatedIn=false;this.isActive=false;this.name=this.name||this.element.className;this.scrollToPosition=0;this.updateScrollToPosition();this._components=[];this.setupComponents(currentBreakpoint,scrollPosition,windowHeight)}var proto=BaseSection.prototype=Object.create(EventEmitterMicro.prototype);BaseSection.prototype.constructor=BaseSection;proto.destroy=function(){this.teardownEvents();this.elementEngagement.stop();this.elementEngagement=null;for(var i=0,len=this._components.length;i<len;i++){this._components[i].destroy()}this._components=null;this.trackedElement=null;this.element=null;superclass.destroy.call(this)};proto.setupEvents=function(){for(var i=0,len=this._components.length;i<len;i++){this._components[i].setupEvents()}};proto.teardownEvents=function(){for(var i=0,len=this._components.length;i<len;i++){this._components[i].teardownEvents()}};proto.setupComponents=function(currentBreakpoint,scrollPosition,windowHeight){var componentElements=querySelectorAll("["+DataAttributes.COMPONENT_LIST+"]",this.element);if(this.element.hasAttribute(DataAttributes.COMPONENT_LIST)){componentElements.push(this.element)}for(var i=0;i<componentElements.length;i++){var componentElement=componentElements[i];var componentListString=componentElement.getAttribute(DataAttributes.COMPONENT_LIST);if(componentListString.indexOf("|")!==-1){throw"BaseSection::setupComponents component list should be space delimited, pipe character is no longer supported. Error at: '"+componentListString+"'"}var componentList=componentListString.split(" ");for(var j=0,len=componentList.length;j<len;j++){var componentType=componentList[j];if(componentType===""||componentType===" ")continue;if(!ComponentMap.hasOwnProperty(componentType)){throw"BaseSection::setupComponents parsing '#"+this.componentElement.id+" ."+this.componentElement.className+"' no component type '"+componentType+"'found!"}var ComponentConstructor=ComponentMap[componentType];var componentName=componentList[j];var component=new ComponentConstructor(this,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,i+j);this.rafWhenVisible=component.rafWhenVisible||this.rafWhenVisible;this._components.push(component)}}};proto.activate=function(){this.element.classList.add("active");for(var i=0,len=this._components.length;i<len;i++){this._components[i].activate()}this.isActive=true;if(!this.hasAnimatedIn){this.element.classList.add("animated");this.animateIn();this.hasAnimatedIn=true}};proto.deactivate=function(){this.element.classList.remove("active");this.isActive=false;for(var i=0,len=this._components.length;i<len;i++){this._components[i].deactivate()}};proto.animateIn=function(){for(var i=0,len=this._components.length;i<len;i++){this._components[i].animateIn()}};proto.onRequestAnimationFrame=function(){for(var i=0,len=this._components.length;i<len;i++){var component=this._components[i];if(component.rafWhenVisible||this.isActive)component.onRequestAnimationFrame()}};proto.onResizeWillBeCalledAfterDelay=function(e,scrollPosition,windowHeight){for(var i=0,len=this._components.length;i<len;i++){this._components[i].onResizeWillBeCalledAfterDelay(e,scrollPosition,windowHeight)}};proto.onResize=function(e,scrollPosition,windowHeight){this.updateScrollToPosition();for(var i=0,len=this._components.length;i<len;i++){this._components[i].onResize(e,scrollPosition,windowHeight)}};proto.onBreakpoint=function(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight){for(var i=0,len=this._components.length;i<len;i++){this._components[i].onBreakpoint(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight)}};proto.onScroll=function(e,scrollPosition,windowHeight){this.elementEngagement.refreshAllElementStates();for(var i=0,len=this._components.length;i<len;i++){this._components[i].onScroll(e,scrollPosition,windowHeight)}};proto.onViewWillAppear=function(scrollPosition,windowHeight){this.elementEngagement.refreshAllElementStates();for(var i=0,len=this._components.length;i<len;i++){this._components[i].onSectionWillAppear(scrollPosition,windowHeight)}};proto.onViewWillDisappear=function(scrollPosition,windowHeight){for(var i=0,len=this._components.length;i<len;i++){this._components[i].onSectionWillDisappear(scrollPosition,windowHeight)}};proto.getComponentOfType=function(componentType){if(!ComponentMap.hasOwnProperty(componentType)){throw"BaseSection::getComponentOfType no component type '"+componentType+"' exist in ComponentMap!"}for(var i=0,len=this._components.length;i<len;i++){if(this._components[i].componentName===componentType){return this._components[i]}}return null};proto.getAllComponentsOfType=function(componentType){if(!ComponentMap.hasOwnProperty(componentType)){throw"BaseSection::getAllComponentsOfType no component type '"+componentType+"' exist in ComponentMap!"}var matches=[];for(var i=0,len=this._components.length;i<len;i++){if(this._components[i].componentName===componentType){matches.push(this._components[i])}}return matches};proto.updateScrollToPosition=function(){return this.scrollToPosition=DomMetrics.getPagePosition(this.element).top};module.exports=BaseSection},{"./../model/ComponentMap":302,"./../model/DataAttributes":303,"@marcom/ac-dom-metrics":252,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-element-engagement":267,"@marcom/ac-event-emitter-micro":295,"@marcom/ac-polyfills/Element/prototype.classList":366,"@marcom/ac-polyfills/Object/create":369}],301:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Element/prototype.classList");var DataAttributes=require("./../model/DataAttributes"),querySelector=require("@marcom/ac-dom-traversal").querySelector;var LocalNavStyleChanger=function(){this._currentTheme="";this._lastTheme="";this.defaultTheme="theme-light";this._currentPageNavLink=null;this._section=null;this._localNav=null;this.height=0};var proto=LocalNavStyleChanger.prototype;proto.initialize=function(localNavEl,sectionThemeKeys,defaultTheme){this._localNav=localNavEl;this.sectionThemeKeys=sectionThemeKeys;this.defaultTheme=defaultTheme;this.height=this._localNav.clientHeight};proto.setCurrentPage=function(pageName){var el=querySelector(".localnav-link["+DataAttributes.JUMP_SECTION_NAME+"="+pageName+"]");if(el===this._currentPageNavLink){return}if(this._currentPageNavLink){this._currentPageNavLink.classList.remove("current")}if(el){el.classList.add("current");this._currentPageNavLink=el}};proto.setCurrentSection=function(section){if(this._localNav===null){return}if(this._section&&this._section===section){return}this._section=section;for(var i=0,len=this._section.element.classList.length;i<len;i++){var key=this._section.element.classList[i];if(this.sectionThemeKeys.hasOwnProperty(key)){this.setTheme(key);return}}this.setTheme(this.defaultTheme)};proto.setTheme=function(name){if(!this.sectionThemeKeys[name]||this._currentTheme===this.sectionThemeKeys[name]){return}for(var key in this.sectionThemeKeys){if(key!==name){this._localNav.classList.remove(this.sectionThemeKeys[key])}}this._localNav.classList.add(this.sectionThemeKeys[name]);this._currentTheme=this.sectionThemeKeys[name]};proto.removeThemes=function(){this._currentTheme=null;for(var key in this.sectionThemeKeys){this._localNav.classList.remove(this.sectionThemeKeys[key])}};module.exports=new LocalNavStyleChanger},{"./../model/DataAttributes":303,"@marcom/ac-dom-traversal":55,"@marcom/ac-polyfills/Element/prototype.classList":366}],302:[function(require,module,exports){"use strict";module.exports={BaseComponent:require("../core/BaseComponent")}},{"../core/BaseComponent":298}],303:[function(require,module,exports){"use strict";module.exports={PAGE_TYPE:"data-page-type",SECTION_TYPE:"data-section-type",JUMP_SECTION_NAME:"data-page-jump-name",COMPONENT_LIST:"data-component-list"}},{}],304:[function(require,module,exports){"use strict";var ac_feature={isDesktop:require("@marcom/ac-feature/isDesktop"),isRetina:require("@marcom/ac-feature/isRetina")};var ac_browser=require("@marcom/ac-browser");module.exports={TOUCH:undefined,SVG:undefined,WEB_GL:undefined,VIDEO:undefined,INLINE_VIDEO:undefined,CANVAS:undefined,PAGE_JUMP:undefined,CSS_POSITION_STICKY:undefined,CSS_KEYFRAME_ANIMATION:undefined,CSS_FILTER:undefined,CSS_OBJECT_FIT:undefined,CSS_TRANSITION_2D:undefined,CSS_TRANSITION_3D:undefined,IS_DESKTOP:undefined,IS_RETINA:undefined,IS_IOS:undefined,init:function(){var htmlEl=document.getElementsByTagName("html")[0];this.TOUCH=htmlEl.classList.contains("touch");this.SVG=htmlEl.classList.contains("svg");this.WEB_GL=htmlEl.classList.contains("webgl");this.VIDEO=htmlEl.classList.contains("video");this.INLINE_VIDEO=htmlEl.classList.contains("inlineVideo");this.CANVAS=htmlEl.classList.contains("canvas");this.PAGE_JUMP=htmlEl.classList.contains("pageJump");this.CSS_POSITION_STICKY=htmlEl.classList.contains("cssPositionSticky");this.CSS_KEYFRAME_ANIMATION=htmlEl.classList.contains("cssKeyframeAnimation");this.CSS_FILTER=htmlEl.classList.contains("cssFilter");this.CSS_OBJECT_FIT=htmlEl.classList.contains("cssObjectFit");this.CSS_TRANSITION_2D=htmlEl.classList.contains("cssTransition2d");this.CSS_TRANSITION_3D=htmlEl.classList.contains("cssTransition3d");this.IS_DESKTOP=ac_feature.isDesktop();this.IS_RETINA=ac_feature.isRetina();this.IS_IOS=ac_browser.os==="iOS"},extend:function(otherObject){if(!otherObject.hasOwnProperty("init")||typeof otherObject.init!=="function"){throw new TypeError("The object extended Jetpack.model.EnabledFeatures must contain an init function")}var originalInit=this.init;var extendedInit=otherObject.init;var extended=Object.assign(this,otherObject);extended.init=function(){originalInit.call(extended);extendedInit.call(extended)};return extended}}},{"@marcom/ac-browser":248,"@marcom/ac-feature/isDesktop":77,"@marcom/ac-feature/isRetina":78}],305:[function(require,module,exports){"use strict";module.exports={BasePage:require("../core/BasePage")}},{"../core/BasePage":299}],306:[function(require,module,exports){"use strict";module.exports={BaseSection:require("../core/BaseSection")}},{"../core/BaseSection":300}],307:[function(require,module,exports){"use strict";module.exports={FROM_LOCAL_NAV:0}},{}],308:[function(require,module,exports){"use strict";module.exports=8},{}],309:[function(require,module,exports){"use strict";module.exports=11},{}],310:[function(require,module,exports){"use strict";module.exports=9},{}],311:[function(require,module,exports){"use strict";module.exports=1},{}],312:[function(require,module,exports){"use strict";module.exports=3},{}],313:[function(require,module,exports){"use strict";var isNode=require("../isNode");module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1}},{"../isNode":317}],314:[function(require,module,exports){"use strict";var isNodeType=require("./isNodeType");var COMMENT_NODE=require("../COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("../DOCUMENT_FRAGMENT_NODE");var ELEMENT_NODE=require("../ELEMENT_NODE");var TEXT_NODE=require("../TEXT_NODE");var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=" must be an Element, TextNode, Comment, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, or Document Fragment";var ERR_NO_PARENT_NODE=" must have a parentNode";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"target";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"target";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||"target";if(!node.parentNode){throw new TypeError(funcName+": "+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":308,"../DOCUMENT_FRAGMENT_NODE":309,"../ELEMENT_NODE":311,"../TEXT_NODE":312,"./isNodeType":313}],315:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var DOCUMENT_FRAGMENT_NODE=require("./DOCUMENT_FRAGMENT_NODE");module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":309,"./internal/isNodeType":313}],316:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType");var ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":311,"./internal/isNodeType":313}],317:[function(require,module,exports){"use strict";module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],318:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function remove(node){validate.childNode(node,true,"remove");if(!node.parentNode){return node}return node.parentNode.removeChild(node)}},{"./internal/validate":314}],319:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isNode=require("@marcom/ac-dom-nodes/isNode");var COMMENT_NODE=require("@marcom/ac-dom-nodes/COMMENT_NODE");var DOCUMENT_FRAGMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE");var DOCUMENT_NODE=require("@marcom/ac-dom-nodes/DOCUMENT_NODE");var ELEMENT_NODE=require("@marcom/ac-dom-nodes/ELEMENT_NODE");var TEXT_NODE=require("@marcom/ac-dom-nodes/TEXT_NODE");var isNodeType=function(node,nodeType){if(!isNode(node)){return false}if(typeof nodeType==="number"){return node.nodeType===nodeType}return nodeType.indexOf(node.nodeType)!==-1};var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=" must be an Element, Document, or Document Fragment";var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=" must be an Element, TextNode, or Comment";var ERR_INVALID_SELECTOR=" must be a string";module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||"node";if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||"node";if(!node&&!required){return}if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+": "+paramName+ERR_INVALID_CHILD_NODE)}},selector:function(selector,required,funcName,paramName){paramName=paramName||"selector";if((selector||required)&&typeof selector!=="string"){throw new TypeError(funcName+": "+paramName+ERR_INVALID_SELECTOR)}}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":308,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":309,"@marcom/ac-dom-nodes/DOCUMENT_NODE":310,"@marcom/ac-dom-nodes/ELEMENT_NODE":311,"@marcom/ac-dom-nodes/TEXT_NODE":312,"@marcom/ac-dom-nodes/isNode":317,"@marcom/ac-polyfills/Array/prototype.indexOf":348}],320:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");var validate=require("./internal/validate");var querySelectorAllShim=require("./shims/querySelectorAll");var querySelectorAllAvailable="querySelectorAll"in document;module.exports=function querySelectorAll(selector,context){context=context||document;validate.parentNode(context,true,"querySelectorAll","context");validate.selector(selector,true,"querySelectorAll");if(!querySelectorAllAvailable){return querySelectorAllShim(selector,context)}return Array.prototype.slice.call(context.querySelectorAll(selector))}},{"./internal/validate":319,"./shims/querySelectorAll":321,"@marcom/ac-polyfills/Array/prototype.slice":349}],321:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.indexOf");var isElement=require("@marcom/ac-dom-nodes/isElement");var isDocumentFragment=require("@marcom/ac-dom-nodes/isDocumentFragment");var removeElement=require("@marcom/ac-dom-nodes/remove");var COLLECTION_PREFIX="_ac_qsa_";var isElementInContext=function(el,context){var parent;if(context===document){return true}parent=el;while((parent=parent.parentNode)&&isElement(parent)){if(parent===context){return true}}return false};var recalcStyles=function(context){if("recalc"in context){context.recalc(false)}else{document.recalc(false)}window.scrollBy(0,0)};module.exports=function querySelectorAll(selector,context){var style=document.createElement("style");var id=COLLECTION_PREFIX+(Math.random()+"").slice(-6);var els=[];var el;context=context||document;document[id]=[];if(isDocumentFragment(context)){context.appendChild(style)}else{document.documentElement.firstChild.appendChild(style)}style.styleSheet.cssText="*{display:recalc;}"+selector+'{ac-qsa:expression(document["'+id+'"] && document["'+id+'"].push(this));}';recalcStyles(context);while(document[id].length){el=document[id].shift();el.style.removeAttribute("ac-qsa");if(els.indexOf(el)===-1&&isElementInContext(el,context)){els.push(el)}}document[id]=null;removeElement(style);recalcStyles(context);return els}},{"@marcom/ac-dom-nodes/isDocumentFragment":315,"@marcom/ac-dom-nodes/isElement":316,"@marcom/ac-dom-nodes/remove":318,"@marcom/ac-polyfills/Array/prototype.indexOf":348}],322:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":323,dup:116}],323:[function(require,module,exports){arguments[4][117][0].apply(exports,arguments)},{dup:117}],324:[function(require,module,exports){arguments[4][119][0].apply(exports,arguments)},{"./internal/KeyEvent":326,"@marcom/ac-dom-events/utils/addEventListener":25,"@marcom/ac-dom-events/utils/removeEventListener":27,"@marcom/ac-event-emitter-micro":322,"@marcom/ac-object/create":344,dup:119}],325:[function(require,module,exports){arguments[4][120][0].apply(exports,arguments)},{"./Keyboard":324,dup:120}],326:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{dup:121}],327:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{dup:122}],328:[function(require,module,exports){arguments[4][97][0].apply(exports,arguments)},{dup:97}],329:[function(require,module,exports){arguments[4][98][0].apply(exports,arguments)},{dup:98}],330:[function(require,module,exports){arguments[4][308][0].apply(exports,arguments)},{dup:308}],331:[function(require,module,exports){arguments[4][309][0].apply(exports,arguments)},{dup:309}],332:[function(require,module,exports){arguments[4][311][0].apply(exports,arguments)},{dup:311}],333:[function(require,module,exports){arguments[4][312][0].apply(exports,arguments)},{dup:312}],334:[function(require,module,exports){arguments[4][313][0].apply(exports,arguments)},{"../isNode":337,dup:313}],335:[function(require,module,exports){arguments[4][314][0].apply(exports,arguments)},{"../COMMENT_NODE":330,"../DOCUMENT_FRAGMENT_NODE":331,"../ELEMENT_NODE":332,"../TEXT_NODE":333,"./isNodeType":334,dup:314}],336:[function(require,module,exports){arguments[4][316][0].apply(exports,arguments)},{"./ELEMENT_NODE":332,"./internal/isNodeType":334,dup:316}],337:[function(require,module,exports){arguments[4][317][0].apply(exports,arguments)},{dup:317}],338:[function(require,module,exports){arguments[4][318][0].apply(exports,arguments)},{"./internal/validate":335,dup:318}],339:[function(require,module,exports){"use strict";module.exports={Modal:require("./ac-modal-basic/Modal"),Renderer:require("./ac-modal-basic/Renderer"),classNames:require("./ac-modal-basic/classNames"),dataAttributes:require("./ac-modal-basic/dataAttributes")}},{"./ac-modal-basic/Modal":340,"./ac-modal-basic/Renderer":341,"./ac-modal-basic/classNames":342,"./ac-modal-basic/dataAttributes":343}],340:[function(require,module,exports){"use strict";var ac_DomEvents={addEventListener:require("@marcom/ac-dom-events/addEventListener"),removeEventListener:require("@marcom/ac-dom-events/removeEventListener"),target:require("@marcom/ac-dom-events/target")};var ac_DomMetrics={getScrollX:require("@marcom/ac-dom-metrics/getScrollX"),getScrollY:require("@marcom/ac-dom-metrics/getScrollY")};var ac_Object={create:require("@marcom/ac-object/create"),defaults:require("@marcom/ac-object/defaults")};var ac_Keyboard=require("@marcom/ac-keyboard");var keys=require("@marcom/ac-keyboard/keyMap");var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var Renderer=require("./Renderer");var modalDefaults={retainScrollPosition:false};function Modal(modalOptions,renderOptions){EventEmitterMicro.call(this);this.options=ac_Object.defaults(modalDefaults,modalOptions);this.renderer=new Renderer(renderOptions);this.opened=false;this._keysToClose=[keys.ESCAPE];this._attachedKeysToClose=[];this.close=this.close.bind(this)}var proto=Modal.prototype=ac_Object.create(EventEmitterMicro.prototype);proto.open=function(){if(this.options.retainScrollPosition){this._saveScrollPosition()}if(!this.opened){this._attachEvents();this.trigger("willopen");this.renderer.open();this.opened=true;this.trigger("open")}};proto.close=function(evt){var target;var closeAttribute;if(this.opened){if(evt&&evt.type==="click"){target=ac_DomEvents.target(evt);closeAttribute=this.renderer.options.dataAttributes.close;if(!target.hasAttribute(closeAttribute)){return}}this.trigger("willclose");this._removeEvents();this.renderer.close();if(this.options.retainScrollPosition){this._restoreScrollPosition()}this.opened=false;this.trigger("close")}};proto.render=function(){this.renderer.render()};proto.appendContent=function(el,target){this.renderer.appendContent(el,target)};proto.removeContent=function(el){this.renderer.removeContent(el)};proto.destroy=function(){this._removeEvents();this.renderer.destroy();for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto.addKeyToClose=function(key){var index=this._keysToClose.indexOf(key);if(index===-1){this._keysToClose.push(key);this._bindKeyToClose(key)}};proto.removeKeyToClose=function(key){var index=this._keysToClose.indexOf(key);if(index!==-1){this._keysToClose.splice(index,1)}this._releaseKeyToClose(key)};proto._bindKeyToClose=function(key){var index=this._attachedKeysToClose.indexOf(key);if(index===-1){ac_Keyboard.onUp(key,this.close);this._attachedKeysToClose.push(key)}};proto._releaseKeyToClose=function(key){var index=this._attachedKeysToClose.indexOf(key);if(index!==-1){ac_Keyboard.offUp(key,this.close);this._attachedKeysToClose.splice(index,1)}};proto._removeEvents=function(){if(this.renderer.modalElement){ac_DomEvents.removeEventListener(this.renderer.modalElement,"click",this.close)}this._keysToClose.forEach(this._releaseKeyToClose,this)};proto._attachEvents=function(){if(this.renderer.modalElement){ac_DomEvents.addEventListener(this.renderer.modalElement,"click",this.close)}this._keysToClose.forEach(this._bindKeyToClose,this)};proto._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)};proto._saveScrollPosition=function(){this._scrollX=ac_DomMetrics.getScrollX();this._scrollY=ac_DomMetrics.getScrollY()};module.exports=Modal},{"./Renderer":341,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-events/target":24,"@marcom/ac-dom-metrics/getScrollX":328,"@marcom/ac-dom-metrics/getScrollY":329,"@marcom/ac-event-emitter-micro":322,"@marcom/ac-keyboard":325,"@marcom/ac-keyboard/keyMap":327,"@marcom/ac-object/create":344,"@marcom/ac-object/defaults":345}],341:[function(require,module,exports){"use strict";var ac_Classlist={add:require("@marcom/ac-classlist/add"),remove:require("@marcom/ac-classlist/remove")};var ac_Object={defaults:require("@marcom/ac-object/defaults")};var ac_DomNodes={remove:require("@marcom/ac-dom-nodes/remove"),isElement:require("@marcom/ac-dom-nodes/isElement")};var modalClassNames=require("./classNames");var modalDataAttributes=require("./dataAttributes");var defaults={modalElement:null,contentElement:null,closeButton:null,classNames:modalClassNames,dataAttributes:modalDataAttributes};var Renderer=function(options){options=options||{};this.options=ac_Object.defaults(defaults,options);this.options.classNames=ac_Object.defaults(defaults.classNames,options.classNames);this.options.dataAttributes=ac_Object.defaults(defaults.dataAttributes,options.dataAttributes);this.modalElement=this.options.modalElement;this.contentElement=this.options.contentElement;this.closeButton=this.options.closeButton};var proto=Renderer.prototype;proto.render=function(){if(!ac_DomNodes.isElement(this.modalElement)){this.modalElement=this.renderModalElement(this.options.classNames.modalElement)}if(!ac_DomNodes.isElement(this.contentElement)){this.contentElement=this.renderContentElement(this.options.classNames.contentElement)}if(this.closeButton!==false){if(!ac_DomNodes.isElement(this.closeButton)){this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)}this.modalElement.appendChild(this.closeButton)}this.modalElement.appendChild(this.contentElement);document.body.appendChild(this.modalElement);return this.modalElement};proto.renderCloseButton=function(classNames){var closeButton;classNames=classNames||this.options.classNames.closeButton;closeButton=this._renderElement("button",classNames);closeButton.setAttribute(this.options.dataAttributes.close,"");return closeButton};proto.renderModalElement=function(classNames){classNames=classNames||this.options.classNames.modalElement;return this._renderElement("div",classNames)};proto.renderContentElement=function(classNames){classNames=classNames||this.options.classNames.contentElement;return this._renderElement("div",classNames)};proto.appendContent=function(el,target){if(!ac_DomNodes.isElement(el)){return}if(arguments[1]===undefined){this.contentElement.appendChild(el)}else if(ac_DomNodes.isElement(target)){target.appendChild(el)}};proto.removeContent=function(el){if(el){if(this.modalElement.contains(el)){ac_DomNodes.remove(el)}}else{this._emptyContent()}};proto.open=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);var modalElArgs=[this.modalElement].concat(this.options.classNames.modalOpen);ac_Classlist.add.apply(null,docElArgs);ac_Classlist.add.apply(null,modalElArgs)};proto.close=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);var modalElArgs=[this.modalElement].concat(this.options.classNames.modalOpen);ac_Classlist.remove.apply(null,docElArgs);ac_Classlist.remove.apply(null,modalElArgs)};proto.destroy=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);if(this.modalElement&&document.body.contains(this.modalElement)){this.close();document.body.removeChild(this.modalElement)}ac_Classlist.remove.apply(null,docElArgs);for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto._renderElement=function(type,classNames){var el=document.createElement(type);var args=[el];if(classNames){args=args.concat(classNames)}ac_Classlist.add.apply(null,args);return el};proto._emptyContent=function(){this.contentElement.innerHTML=""};module.exports=Renderer},{"./classNames":342,"./dataAttributes":343,"@marcom/ac-classlist/add":1,"@marcom/ac-classlist/remove":9,"@marcom/ac-dom-nodes/isElement":336,"@marcom/ac-dom-nodes/remove":338,"@marcom/ac-object/defaults":345}],342:[function(require,module,exports){"use strict";module.exports={modalElement:"modal",modalOpen:"modal-open",documentElement:"has-modal",contentElement:"modal-content",closeButton:"modal-close"}},{}],343:[function(require,module,exports){"use strict";module.exports={close:"data-modal-close"}},{}],344:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{dup:124}],345:[function(require,module,exports){"use strict";var extend=require("./extend");module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=="object"){throw new TypeError("defaults: must provide a defaults object")}options=options||{};if(typeof options!=="object"){throw new TypeError("defaults: options must be a typeof object")}return extend({},defaultsObj,options)}},{"./extend":346}],346:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":347,dup:125}],347:[function(require,module,exports){if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(callback,thisObj){var arrayObject=Object(this);var i;var currentValue;if(typeof callback!=="function"){throw new TypeError("No function object passed to forEach.")}var length=this.length;for(i=0;i<length;i+=1){currentValue=arrayObject[i];callback.call(thisObj,currentValue,i,arrayObject)}}}},{}],348:[function(require,module,exports){if(!Array.prototype.indexOf){Array.prototype.indexOf=function indexOf(searchElement,fromIndex){var startIndex=fromIndex||0;var currentIndex=0;if(startIndex<0){startIndex=this.length+fromIndex-1;if(startIndex<0){throw"Wrapped past beginning of array while looking up a negative start index."}}for(currentIndex=0;currentIndex<this.length;currentIndex++){if(this[currentIndex]===searchElement){return currentIndex}}return-1}}},{}],349:[function(require,module,exports){(function(){"use strict";var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){end=typeof end!=="undefined"?end:this.length;if(Object.prototype.toString.call(this)==="[object Array]"){return _slice.call(this,begin,end)}var i,cloned=[],size,len=this.length;var start=begin||0;start=start>=0?start:len+start;var upTo=end?end:len;if(end<0){upTo=len+end}size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i)}}else{for(i=0;i<size;i++){cloned[i]=this[start+i]}}}return cloned}}})()},{}],350:[function(require,module,exports){"use strict";module.exports={Modal:require("./ac-modal/Modal"),createStandardModal:require("./ac-modal/factory/createStandardModal"),createFullViewportModal:require("./ac-modal/factory/createFullViewportModal")}},{"./ac-modal/Modal":351,"./ac-modal/factory/createFullViewportModal":352,"./ac-modal/factory/createStandardModal":353}],351:[function(require,module,exports){"use strict";var ac_Object={create:require("@marcom/ac-object/create"),defaults:require("@marcom/ac-object/defaults")};var ac_ModalBasic=require("@marcom/ac-modal-basic").Modal;var ac_ModalBasicClassNames=require("@marcom/ac-modal-basic").classNames;var ac_Classlist={add:require("@marcom/ac-classlist/add")};var EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var CircularTab=require("./focus/CircularTab");var FocusManager=require("./focus/FocusManager");function Modal(options){EventEmitterMicro.call(this);this.options=options||{};this._modal=new ac_ModalBasic(options,this.options.renderer);this.opened=false;this._render();this.closeButton=this._modal.renderer.closeButton;this.modalElement=this._modal.renderer.modalElement;this.contentElement=this._modal.renderer.contentElement;this.modalElement.setAttribute("role","dialog");this._circularTab=new CircularTab(this.modalElement);this._onWillOpen=this._onWillOpen.bind(this);this._onOpen=this._onOpen.bind(this);this._onWillClose=this._onWillClose.bind(this);this._onClose=this._onClose.bind(this);this._bindEvents()}var proto=Modal.prototype=ac_Object.create(EventEmitterMicro.prototype);proto.open=function(){this._modal.open();this.opened=this._modal.opened};proto.close=function(){this._modal.close()};proto.appendContent=function(el){this._modal.appendContent(el)};proto.removeContent=function(el){this._modal.removeContent(el)};proto.destroy=function(){this._releaseEvents();this._modal.destroy();this._removeModalFocus();this._circularTab.destroy();this._focusObj=null;for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto.addKeyToClose=function(key){this._modal.addKeyToClose(key)};proto.removeKeyToClose=function(key){this._modal.removeKeyToClose(key)};proto._render=function(){this._modal.render();this._modal.renderer.modalElement.setAttribute("aria-hidden","true")};proto._bindEvents=function(){this._modal.on("willopen",this._onWillOpen);this._modal.on("open",this._onOpen);this._modal.on("willclose",this._onWillClose);this._modal.on("close",this._onClose)};proto._releaseEvents=function(){this._modal.off("willopen",this._onWillOpen);this._modal.off("open",this._onOpen);this._modal.off("willclose",this._onWillClose);this._modal.off("close",this._onClose)};proto._onWillOpen=function(){this.trigger("willopen")};proto._onOpen=function(){this.opened=this._modal.opened;this._giveModalFocus();this.trigger("open")};proto._onWillClose=function(){this.trigger("willclose");this._removeModalFocus()};proto._onClose=function(){this.opened=this._modal.opened;this.trigger("close")};proto._giveModalFocus=function(){this.modalElement.setAttribute("aria-hidden","false");this._activeElement=document.activeElement;this.closeButton.focus();this._circularTab.start();this._focusObj=FocusManager.disableSiblingFocus(this.modalElement,document.body)};proto._removeModalFocus=function(){this._circularTab.stop();if(this._focusObj){this._focusObj.enableSiblingFocus();this._focusObj=null}this.modalElement.setAttribute("aria-hidden","true");if(this._activeElement){this._activeElement.focus();this._activeElement=null}};module.exports=Modal},{"./focus/CircularTab":354,"./focus/FocusManager":355,"@marcom/ac-classlist/add":1,"@marcom/ac-event-emitter-micro":322,"@marcom/ac-modal-basic":339,"@marcom/ac-object/create":344,"@marcom/ac-object/defaults":345}],352:[function(require,module,exports){"use strict";var Modal=require("../Modal");var modalBasicClassNames=require("@marcom/ac-modal-basic").classNames;var options={retainScrollPosition:true,renderer:{classNames:{documentElement:[modalBasicClassNames.documentElement].concat("has-modal-full-viewport"),modalElement:[modalBasicClassNames.modalElement].concat("modal-full-viewport")}}};function createFullViewportModal(contentElement){var modal=new Modal(options);if(contentElement){modal.appendContent(contentElement)}return modal}module.exports=createFullViewportModal},{"../Modal":351,"@marcom/ac-modal-basic":339}],353:[function(require,module,exports){"use strict";var Modal=require("../Modal");var modalBasicClassNames=require("@marcom/ac-modal-basic").classNames;var modalBasicDataAttributes=require("@marcom/ac-modal-basic").dataAttributes;var ac_Classlist={add:require("@marcom/ac-classlist/add")};var options={renderer:{classNames:{documentElement:[modalBasicClassNames.documentElement].concat("has-modal-standard"),modalElement:[modalBasicClassNames.modalElement].concat("modal-standard")}}};function createStandardModal(contentElement){var modal=new Modal(options);var closeButton;if(contentElement){modal.appendContent(contentElement)}var contentTable=document.createElement("div");var contentCell=document.createElement("div");var contentWrapper=document.createElement("div");var contentPadding=document.createElement("div");ac_Classlist.add(contentTable,"content-table");ac_Classlist.add(contentCell,"content-cell");ac_Classlist.add(contentWrapper,"content-wrapper");ac_Classlist.add(contentPadding,"content-padding","large-8","medium-10");modal.modalElement.setAttribute(modalBasicDataAttributes.close,"");contentWrapper.setAttribute(modalBasicDataAttributes.close,"");contentCell.setAttribute(modalBasicDataAttributes.close,"");contentTable.appendChild(contentCell);contentCell.appendChild(contentWrapper);contentWrapper.appendChild(contentPadding);modal.modalElement.appendChild(contentTable);contentPadding.appendChild(modal.contentElement);contentPadding.appendChild(modal.closeButton);return modal}module.exports=createStandardModal},{"../Modal":351,"@marcom/ac-classlist/add":1,"@marcom/ac-modal-basic":339}],354:[function(require,module,exports){"use strict";var TabManager=require("./TabManager");var ac_addEventListener=require("@marcom/ac-dom-events/utils/addEventListener");var ac_removeEventListener=require("@marcom/ac-dom-events/utils/removeEventListener");var CircularTab=function(parentElement){this.tabbables=null;this.firstTabbableElement=null;this.lastTabbableElement=null;this.relatedTarget=null;this.el=parentElement;this._handleOnFocus=this._handleOnFocus.bind(this)};var proto=CircularTab.prototype;proto.start=function(){this.findTabbables();ac_addEventListener(document,"focus",this._handleOnFocus,true)};proto.stop=function(){ac_removeEventListener(document,"focus",this._handleOnFocus,true)};proto.findTabbables=function(){this.tabbables=TabManager.getTabbable(this.el);this.firstTabbableElement=this.tabbables[0];this.lastTabbableElement=this.tabbables[this.tabbables.length-1]};proto._handleOnFocus=function(e){if(!this.el.contains(e.target)){e.preventDefault();this.findTabbables();if(this.relatedTarget===this.lastTabbableElement||this.relatedTarget===null){this.firstTabbableElement.focus();this.relatedTarget=this.firstTabbableElement;return}if(this.relatedTarget===this.firstTabbableElement){this.lastTabbableElement.focus();this.relatedTarget=this.lastTabbableElement;return}}else{this.relatedTarget=e.target}};proto.destroy=function(){this.stop();this.el=null;this.tabbables=null;this.firstTabbableElement=null;this.lastTabbableElement=null;this.relatedTarget=null};module.exports=CircularTab},{"./TabManager":356,"@marcom/ac-dom-events/utils/addEventListener":25,"@marcom/ac-dom-events/utils/removeEventListener":27}],355:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.slice");var addClass=require("@marcom/ac-classlist/add");var removeClass=require("@marcom/ac-classlist/remove");var containsClass=require("@marcom/ac-classlist/contains");var MODAL_CLASS="modal";var FocusManager=function(){this._elementCacheMap={}};var proto=FocusManager.prototype;proto.disableSiblingFocus=function(element,parentContext){var modalSiblings=Array.prototype.slice.call(parentContext.children);modalSiblings=modalSiblings.filter(function(el){var tagName=el.tagName.toLowerCase();return el!==element&&el.getAttribute("aria-hidden")!=="true"&&tagName!=="script"&&tagName!=="style"&&tagName!=="link"}.bind(this));var i=0;var len=modalSiblings.length;for(;i<len;i++){modalSiblings[i].setAttribute("aria-hidden","true")}return{enableSiblingFocus:this._enableSiblingFocus.bind(this,modalSiblings)}};proto._enableSiblingFocus=function(siblings){while(siblings.length){siblings.shift().setAttribute("aria-hidden","false")}};module.exports=new FocusManager},{"@marcom/ac-classlist/add":1,"@marcom/ac-classlist/contains":7,"@marcom/ac-classlist/remove":9,"@marcom/ac-polyfills/Array/prototype.slice":349}],356:[function(require,module,exports){"use strict";var querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var focusableElements=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object"];var focusableAttribute=["href","tabindex","contenteditable"];var TabManager=function(){this.focusableSelectors=focusableElements.concat(focusableAttribute.map(function(attribute){return attribute==="href"?"a["+attribute+"]":"*["+attribute+"]"})).join(",")};var proto=TabManager.prototype;proto.focusable=function(element,tabIndex){var nodeName=element.nodeName.toLowerCase();var focusableElement=focusableElements.indexOf(nodeName)>-1;if(nodeName==="a"){return true}if(focusableElement){return!element.disabled}if(!element.contentEditable){return true}tabIndex=tabIndex||element.tabIndex;return isNaN(tabIndex)};proto.tabbable=function(element){var tabIndex=element.getAttribute("tabindex");if(!isNaN(tabIndex)){return tabIndex>=0}else{return this.focusable(element,tabIndex)}};proto.getTabbable=function(parentElement){var elements=querySelectorAll(this.focusableSelectors,parentElement);var l=elements.length;var tabbableElements=[];for(var i=0;i<l;i++){if(this.tabbable(elements[i])){tabbableElements.push(elements[i])}}return tabbableElements};proto.getFocusable=function(parentElement){var elements=querySelectorAll(this.focusableSelectors,parentElement);var l=elements.length;var focusableElements=[];for(var i=0;i<l;i++){if(this.focusable(elements[i])){focusableElements.push(elements[i])}}return focusableElements};module.exports=new TabManager},{"@marcom/ac-dom-traversal/querySelectorAll":320}],357:[function(require,module,exports){if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"}}},{}],358:[function(require,module,exports){if(!Array.prototype.every){Array.prototype.every=function every(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}for(i=0;i<len;i+=1){if(i in arrayObject&&!callback.call(thisObj,arrayObject[i],i,arrayObject)){return false}}return true}}},{}],359:[function(require,module,exports){if(!Array.prototype.filter){Array.prototype.filter=function filter(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;var results=[];if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}for(i=0;i<len;i+=1){if(i in arrayObject&&callback.call(thisObj,arrayObject[i],i,arrayObject)){results.push(arrayObject[i])}}return results}}},{}],360:[function(require,module,exports){if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(callback,thisObj){var arrayObject=Object(this);var i;var currentValue;if(typeof callback!=="function"){throw new TypeError("No function object passed to forEach.")}for(i=0;i<this.length;i+=1){currentValue=arrayObject[i];callback.call(thisObj,currentValue,i,arrayObject)}}}},{}],361:[function(require,module,exports){if(!Array.prototype.indexOf){Array.prototype.indexOf=function indexOf(searchElement,fromIndex){var startIndex=fromIndex||0;var currentIndex=0;if(startIndex<0){startIndex=this.length+fromIndex-1;if(startIndex<0){throw"Wrapped past beginning of array while looking up a negative start index."}}for(currentIndex=0;currentIndex<this.length;currentIndex++){if(this[currentIndex]===searchElement){return currentIndex}}return-1}}},{}],362:[function(require,module,exports){if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(callback,initialValue){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i=0;var result;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}if(typeof initialValue==="undefined"){if(!len){throw new TypeError("Reduce of empty array with no initial value")}result=arrayObj[0];i=1}else{result=initialValue}while(i<len){if(i in arrayObj){result=callback.call(undefined,result,arrayObj[i],i,arrayObj);i+=1}}return result}}},{}],363:[function(require,module,exports){(function(){"use strict";var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){end=typeof end!=="undefined"?end:this.length;if(Object.prototype.toString.call(this)==="[object Array]"){return _slice.call(this,begin,end)}var i,cloned=[],size,len=this.length;var start=begin||0;start=start>=0?start:len+start;var upTo=end?end:len;if(end<0){upTo=len+end}size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i)}}else{for(i=0;i<size;i++){cloned[i]=this[start+i]}}}return cloned}}})()},{}],364:[function(require,module,exports){if(!Array.prototype.some){Array.prototype.some=function some(callback,thisObj){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}for(i=0;i<len;i+=1){if(i in arrayObj&&callback.call(thisObj,arrayObj[i],i,arrayObj)===true){return true}}return false}}},{}],365:[function(require,module,exports){if(document.createEvent){try{new window.CustomEvent("click")}catch(err){window.CustomEvent=function(){function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;return CustomEvent}()}}},{}],366:[function(require,module,exports){if("document"in self){if(!("classList"in document.createElement("_"))){(function(view){"use strict";if(!("Element"in view))return;var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}return arrIndexOf.call(classList,token)},ClassList=function(elem){var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=true}}while(++i<l);if(updated){this._updateClassName()}};classListProto.remove=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=true;index=checkTokenAndGetIndex(this,token)}}while(++i<l);if(updated){this._updateClassName()}};classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==true&&"remove":force!==false&&"add";if(method){this[method](token)}if(force===true||force===false){return force}else{return!result}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-2146823252){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}})(self)}else{(function(){"use strict";var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++){token=arguments[i];original.call(this,token)}}};createMethod("add");createMethod("remove")}testElement.classList.toggle("c3",false);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force}else{return _toggle.call(this,token)}}}testElement=null})()}}},{}],367:[function(require,module,exports){if(!Function.prototype.bind){Function.prototype.bind=function(originalContext){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var applicableArgs=Array.prototype.slice.call(arguments,1);var functionToBind=this;var fnOriginalPrototype=function(){};var fnBound=function(){return functionToBind.apply(this instanceof fnOriginalPrototype&&originalContext?this:originalContext,applicableArgs.concat(Array.prototype.slice.call(arguments)))};fnOriginalPrototype.prototype=this.prototype;fnBound.prototype=new fnOriginalPrototype;return fnBound}}},{}],368:[function(require,module,exports){var userAgent=navigator.userAgent.toLowerCase();var IE=userAgent.indexOf("msie")>-1?parseInt(userAgent.split("msie")[1]):false;var IE_LESS_THAN_NINE=IE<9;if(!Object.assign){if(!Object.keys){Object.keys=function keys(obj){var keysArray=[];var currentKey;if(!obj||typeof obj.hasOwnProperty!=="function"){throw"Object.keys called on non-object."}for(currentKey in obj){if(obj.hasOwnProperty(currentKey)){keysArray.push(currentKey)}}return keysArray}}if(!IE_LESS_THAN_NINE&&Object.defineProperty){if(!Object.assign){Object.defineProperty(Object,"assign",{enumerable:false,configurable:true,writable:true,value:function(target,firstSource){"use strict";if(target===undefined||target===null)throw new TypeError("Cannot convert first argument to object");var to=Object(target);var hasPendingException=false;var pendingException;for(var i=1;i<arguments.length;i++){var nextSource=arguments[i];if(nextSource===undefined||nextSource===null)continue;var keysArray=Object.keys(Object(nextSource));for(var nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex++){var nextKey=keysArray[nextIndex];try{var desc=Object.getOwnPropertyDescriptor(nextSource,nextKey);if(desc!==undefined&&desc.enumerable)to[nextKey]=nextSource[nextKey]}catch(e){if(!hasPendingException){hasPendingException=true;pendingException=e}}}if(hasPendingException)throw pendingException}return to}})}}else{Object.assign=function(){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(arguments[i].hasOwnProperty(key)){arguments[0][key]=arguments[i][key]}}}return arguments[0]}}}},{}],369:[function(require,module,exports){if(!Object.create){var F=function(){};Object.create=function(proto){if(arguments.length>1){throw new Error("Second argument not supported")}if(proto===null||typeof proto!=="object"){throw new TypeError("Object prototype may only be an Object.")}F.prototype=proto;return new F}}},{}],370:[function(require,module,exports){if(!Object.keys){Object.keys=function keys(obj){var keysArray=[];var currentKey;if(!obj||typeof obj.hasOwnProperty!=="function"){throw"Object.keys called on non-object."}for(currentKey in obj){if(obj.hasOwnProperty(currentKey)){keysArray.push(currentKey)}}return keysArray}}},{}],371:[function(require,module,exports){window.matchMedia=window.matchMedia||function(doc,undefined){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width:42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q}}}(document)},{}],372:[function(require,module,exports){(function(){var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=Date.now();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}})()},{}],373:[function(require,module,exports){arguments[4][295][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":374,dup:295}],374:[function(require,module,exports){arguments[4][296][0].apply(exports,arguments)},{dup:296}],375:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Function/prototype.bind");require("@marcom/ac-polyfills/Object/keys");require("@marcom/ac-polyfills/Object/create");var EventEmitter=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;var ac_addEventListener=require("@marcom/ac-dom-events/utils/addEventListener");var mediaQueriesAvailable=require("@marcom/ac-feature/mediaQueriesAvailable");var DEFAULT_ID="viewport-emitter";var PSEUDO_SELECTOR="::before";function ViewportEmitter(id){EventEmitter.call(this);this._initializeElement(id);if(mediaQueriesAvailable()){this._update=this._update.bind(this);ac_addEventListener(window,"resize",this._update);ac_addEventListener(window,"orientationchange",this._update)}this._update()}var proto=ViewportEmitter.prototype=Object.create(EventEmitter.prototype);proto.viewport=false;proto._initializeElement=function(id){var el;id=id||DEFAULT_ID;el=document.getElementById(id);if(!el){el=document.createElement("div");el.id=id;el=document.body.appendChild(el)}this._el=el};proto._getElementContent=function(){var content;if("currentStyle"in this._el){content=this._el.currentStyle["x-content"]}else{this._invalidateStyles();content=window.getComputedStyle(this._el,PSEUDO_SELECTOR).content}return content.replace(/["']/g,"")};proto._update=function(){var lastViewport=this.viewport;var style;var eventData;this.viewport=this._getElementContent();this.viewport=this.viewport.split(":").pop();if(lastViewport&&this.viewport!==lastViewport){eventData={from:lastViewport,to:this.viewport};this.trigger("change",eventData);this.trigger("from:"+lastViewport,eventData);this.trigger("to:"+this.viewport,eventData)}};proto._invalidateStyles=function(){document.documentElement.clientWidth;this._el.innerHTML=this._el.innerHTML===" "?"":" ";document.documentElement.clientWidth};module.exports=ViewportEmitter},{"@marcom/ac-dom-events/utils/addEventListener":25,"@marcom/ac-event-emitter-micro":373,"@marcom/ac-feature/mediaQueriesAvailable":79,"@marcom/ac-polyfills/Function/prototype.bind":367,"@marcom/ac-polyfills/Object/create":369,"@marcom/ac-polyfills/Object/keys":370}],376:[function(require,module,exports){"use strict";var ViewportEmitter=require("./ViewportEmitter");module.exports=new ViewportEmitter},{"./ViewportEmitter":375}],377:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");var BaseComponent=require("@marcom/ac-jetpack-lib/core/BaseComponent");var superclass=BaseComponent.prototype;var SlideGallery=require("@marcom/ac-gallery").SlideGallery;function ColumnsToSlideGallery(section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index){this.name="ColumnsToSlideGallery_"+index;BaseComponent.call(this,section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index);if(currentBreakpoint==="small"){this.gallery=this.createGallery()}}var proto=ColumnsToSlideGallery.prototype=Object.create(BaseComponent.prototype);ColumnsToSlideGallery.prototype.constructor=ColumnsToSlideGallery;proto.createGallery=function(){var gallery=new SlideGallery(this.element,{resizeContainer:true,wrapAround:true,desktopThrowing:true});return gallery};proto.onBreakpoint=function(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight){if(newBreakPoint==="small"){this.gallery=this.createGallery();return}if(this.gallery){this.gallery.destroy();this.gallery=null}};module.exports=ColumnsToSlideGallery},{"@marcom/ac-gallery":230,"@marcom/ac-jetpack-lib/core/BaseComponent":298,"@marcom/ac-polyfills/Object/create":369}],378:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");var BaseComponent=require("@marcom/ac-jetpack-lib/core/BaseComponent");var superclass=BaseComponent.prototype;var EnabledFeatures=require("@marcom/ac-jetpack-lib/model/EnabledFeatures");var querySelector=require("@marcom/ac-dom-traversal/querySelector");var querySelectorAll=require("@marcom/ac-dom-traversal/querySelectorAll");var addEventListener=require("@marcom/ac-dom-events/addEventListener");var insertFirstChild=require("@marcom/ac-dom-nodes/insertFirstChild");var SlideGallery=require("@marcom/ac-gallery").SlideGallery;var createModal=require("@marcom/ac-modal").createFullViewportModal;var classList=require("@marcom/ac-classlist");function ModalSlideGallery(section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index){this.name="ModalSlideGallery_"+index;BaseComponent.call(this,section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index);if(EnabledFeatures.OLDIE){return}this.modal=createModal();this.modalTrigger=querySelector("[data-modal-trigger]",this.element);this.galleryElement=querySelector("[data-ac-gallery-slide]",this.element);var modalText=this.modalTrigger.getAttribute("data-modal-aria-text");var closeText=this.modalTrigger.getAttribute("data-close-aria-text");this.modal.modalElement.setAttribute("aria-label",modalText);this.modal.closeButton.setAttribute("aria-label",closeText);this.gallery=this.createSlideGallery(this.galleryElement);this.openModal=this.openModal.bind(this);this._onGalleryUpdate=this._onGalleryUpdate.bind(this);this.gallery.on("update",this._onGalleryUpdate);[].slice.call(this.element.querySelectorAll(".dotnav-item:not(.current)")).forEach(function(el){el.setAttribute("tabindex",-1)});if(currentBreakpoint!=="small"){this.appendGallery()}var htmlElement=document.documentElement;this.modal.on("willopen",function(){htmlElement.style.height="auto";htmlElement.style.position="static";htmlElement.style.overflowY="scroll"});this.modal.on("open",function(){var raf=window.requestAnimationFrame(function(){window.cancelAnimationFrame(raf);htmlElement.style.height=null;htmlElement.style.position=null;htmlElement.style.overflowY=null})})}var proto=ModalSlideGallery.prototype=Object.create(BaseComponent.prototype);ModalSlideGallery.prototype.constructor=ModalSlideGallery;proto.createSlideGallery=function(galleryElement){var gallery=new SlideGallery(galleryElement,{resizeContainer:true,desktopThrowing:true,wrapAround:true});return gallery};proto.openModal=function(){this.modal.open();this.gallery.resize()};proto.closeModal=function(){insertFirstChild(this.galleryElement,this.element);modal.removeContent()};proto.appendGallery=function(){this.modal.appendContent(this.galleryElement);this.gallery.resize()};proto.replaceGallery=function(){insertFirstChild(this.galleryElement,this.element);this.gallery.resize()};proto.setupEvents=function(){superclass.setupEvents.call(this);if(EnabledFeatures.OLDIE){return}addEventListener(this.modalTrigger,"click",this.openModal.bind(this));if(document.documentElement.classList.contains("touch")){window.addEventListener("orientationchange",function(){if(this.modal.opened){setTimeout(function(){this.gallery.resize()}.bind(this),500)}}.bind(this))}};proto.onBreakpoint=function(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight){if(oldBreakPoint==="small"){this.appendGallery()}if(newBreakPoint==="small"){this.replaceGallery();this.modal.close();var raf=window.requestAnimationFrame(function(){window.cancelAnimationFrame(raf);document.body.scrollTop++})}};proto._onGalleryUpdate=function(obj){var fromTabEl=obj.outgoing[0]._triggerEls.click[0];var toTabEl=obj.incoming[0]._triggerEls.click[0];fromTabEl.setAttribute("tabindex",-1);toTabEl.setAttribute("tabindex",0)};module.exports=ModalSlideGallery},{"@marcom/ac-classlist":8,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-nodes/insertFirstChild":41,"@marcom/ac-dom-traversal/querySelector":69,"@marcom/ac-dom-traversal/querySelectorAll":70,"@marcom/ac-gallery":230,"@marcom/ac-jetpack-lib/core/BaseComponent":298,"@marcom/ac-jetpack-lib/model/EnabledFeatures":304,"@marcom/ac-modal":350,"@marcom/ac-polyfills/Object/create":369}],379:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");var BaseComponent=require("@marcom/ac-jetpack-lib/core/BaseComponent");var superclass=BaseComponent.prototype;var querySelector=require("@marcom/ac-dom-traversal/querySelector");var addEventListener=require("@marcom/ac-dom-events/addEventListener");var preventDefault=require("@marcom/ac-dom-events/preventDefault");var stopPropagation=require("@marcom/ac-dom-events/stopPropagation");var classList=require("@marcom/ac-classlist");function SchoolList(section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index){this.name="SchoolList_"+index;BaseComponent.call(this,section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index);this.currentBreakpoint=currentBreakpoint;this.headlineElement=querySelector(".section-headline",this.element);this.buttonElement=querySelector(".list-toggle-button",this.element);this.listElement=querySelector(".schools-list",this.element);this.ariaButtonOpenText=this.buttonElement.getAttribute("data-aria-open-label");this.ariaButtonCloseText=this.buttonElement.getAttribute("data-aria-close-label");this.refreshSchoolsListAriaVariants(currentBreakpoint);this.toggleList=this.toggleList.bind(this)}var proto=SchoolList.prototype=Object.create(BaseComponent.prototype);SchoolList.prototype.constructor=SchoolList;proto.refreshSchoolsListAriaVariants=function(givenBreakpoint){var useableBreakpoint=givenBreakpoint||this.currentBreakpoint;var listsShouldBeHidden=useableBreakpoint=="small";this.listElement.setAttribute("aria-hidden",listsShouldBeHidden)};proto.toggleList=function(evt){preventDefault(evt);stopPropagation(evt);if(this.currentBreakpoint!="small"){return}classList.toggle(this.element,"schools-list-open");if(classList.contains(this.element,"schools-list-open")){this.buttonElement.setAttribute("aira-label",this.ariaButtonCloseText);this.listElement.setAttribute("aria-hidden",false)}else{this.buttonElement.setAttribute("aira-label",this.ariaButtonOpenText);this.listElement.setAttribute("aria-hidden",true)}};proto.setupEvents=function(){superclass.setupEvents.call(this);addEventListener(this.buttonElement,"click",this.toggleList);addEventListener(this.headlineElement,"click",this.toggleList)};proto.onBreakpoint=function(newBreakPoint,oldBreakPoint,scrollPosition,windowHeight){this.currentBreakpoint=newBreakPoint;this.refreshSchoolsListAriaVariants()};module.exports=SchoolList},{"@marcom/ac-classlist":8,"@marcom/ac-dom-events/addEventListener":11,"@marcom/ac-dom-events/preventDefault":19,"@marcom/ac-dom-events/stopPropagation":23,"@marcom/ac-dom-traversal/querySelector":69,"@marcom/ac-jetpack-lib/core/BaseComponent":298,"@marcom/ac-polyfills/Object/create":369}],380:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");var BaseComponent=require("@marcom/ac-jetpack-lib/core/BaseComponent");var superclass=BaseComponent.prototype;var EnabledFeatures=require("@marcom/ac-jetpack-lib/model/EnabledFeatures");var FadeGallery=require("@marcom/ac-gallery").FadeGallery;var FixedAutoGallery=require("./ZoomFadeGallery/FixedAutoGallery");function ZoomFadeGallery(section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index){this.name="ZoomFadeGallery_"+index;BaseComponent.call(this,section,componentElement,componentName,currentBreakpoint,scrollPosition,windowHeight,index);if(EnabledFeatures.OLDIE){return}this.autoPlayDelay=6;this.animationDuration=4;this.gallery=new FixedAutoGallery(this.element,{autoPlay:this.autoPlayDelay,duration:this.animationDuration,enableArrowKeys:false,wrapAround:true});this.onFirstItemPlayed=this.onFirstItemPlayed.bind(this)}var proto=ZoomFadeGallery.prototype=Object.create(BaseComponent.prototype);ZoomFadeGallery.prototype.constructor=ZoomFadeGallery;proto.startAutoPlay=function(delay,options){options=options||{};this._isAutoPlaying=true;this._autoPlayDelay=this.autoPlayDelay*1e3;this._cancelAutoPlayOnInteraction=options.cancelOnInteraction===undefined?true:options.cancelOnInteraction;this.gallery.once(FadeGallery.UPDATE,this.onFirstItemPlayed);setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay);if(this._cancelAutoPlayOnInteraction){this.on(FadeGallery.UPDATE,this.stopAutoPlay)}};proto.onFirstItemPlayed=function(updateInfo){this.gallery._autoPlayDelay=(this.autoPlayDelay+this.animationDuration)*1e3};module.exports=ZoomFadeGallery},{"./ZoomFadeGallery/FixedAutoGallery":381,"@marcom/ac-gallery":230,"@marcom/ac-jetpack-lib/core/BaseComponent":298,"@marcom/ac-jetpack-lib/model/EnabledFeatures":304,"@marcom/ac-polyfills/Object/create":369}],381:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Object/create");var AutoGallery=require("@marcom/ac-gallery").AutoGallery;var classList=require("@marcom/ac-classlist");var FixedAutoGallery=function(el,options){this.autoPlayDelay=options.autoPlay;this.animationDuration=options.duration;AutoGallery.call(this,el,options)};var SuperProto=AutoGallery.prototype;var proto=FixedAutoGallery.prototype=Object.create(AutoGallery.prototype);FixedAutoGallery.prototype.constructor=FixedAutoGallery;proto.startAutoPlay=function(delay){AutoGallery.prototype.startAutoPlay.call(this,delay);this._autoPlayDelay=(this.autoPlayDelay+this.animationDuration)*1e3};proto._update=function(evt){SuperProto._update.call(this,evt);classList.add(this._el,"has-started")};module.exports=FixedAutoGallery},{"@marcom/ac-classlist":8,"@marcom/ac-gallery":230,"@marcom/ac-polyfills/Object/create":369}],382:[function(require,module,exports){"use strict";module.exports={ZoomFadeGallery:require("../components/ZoomFadeGallery"),ModalSlideGallery:require("../components/ModalSlideGallery"),ColumnsToSlideGallery:require("../components/ColumnsToSlideGallery"),SchoolList:require("../components/SchoolList")}},{"../components/ColumnsToSlideGallery":377,"../components/ModalSlideGallery":378,"../components/SchoolList":379,"../components/ZoomFadeGallery":380}],383:[function(require,module,exports){"use strict";var htmlEl;module.exports={OLDIE:undefined,init:function(){htmlEl=document.getElementsByTagName("html")[0];this.OLDIE=htmlEl.classList.contains("oldie")}}},{}],384:[function(require,module,exports){"use strict";require("@marcom/ac-jetpack-lib");require("@marcom/ac-polyfills/Object/assign");var querySelector=require("@marcom/ac-dom-traversal/querySelector");var LocalNavStyleChanger=require("@marcom/ac-jetpack-lib/core/LocalNavStyleChanger");var DataAttributes=require("@marcom/ac-jetpack-lib/model/DataAttributes");var PageMap=require("@marcom/ac-jetpack-lib/model/PageMap");var SectionMap=require("@marcom/ac-jetpack-lib/model/SectionMap");var EnabledFeatures=require("@marcom/ac-jetpack-lib/model/EnabledFeatures");var ComponentMap=require("@marcom/ac-jetpack-lib/model/ComponentMap");var SiteComponentMap=require("./_shared/model/ComponentMap");var SiteEnabledFeatures=require("./_shared/model/EnabledFeatures");var Main=function(){return{initialize:function(){ComponentMap=Object.assign(ComponentMap,SiteComponentMap);EnabledFeatures=EnabledFeatures.extend(SiteEnabledFeatures);EnabledFeatures.init();this.initLocalNavStyleChanger();this.instantiatePageController()},initLocalNavStyleChanger:function(){var localNavEl=document.getElementById("ac-localnav");if(localNavEl===null){return}var sectionThemeMap={"section-light":"theme-light","section-dark":"theme-dark"};LocalNavStyleChanger.initialize(localNavEl,sectionThemeMap,"theme-light")},instantiatePageController:function(){var mainEl=querySelector("main,.main");if(mainEl===null){throw"Could not find <main> or .main element"}if(!mainEl.hasAttribute(DataAttributes.PAGE_TYPE)){throw"No valid <main> tag found with correct page type attribute"}var pageType=mainEl.getAttribute(DataAttributes.PAGE_TYPE);if(!PageMap.hasOwnProperty(pageType)){throw"Failed to init no page type called '"+pageType+"' found"}new PageMap[pageType]}}}();module.exports=Main.initialize()},{"./_shared/model/ComponentMap":382,"./_shared/model/EnabledFeatures":383,"@marcom/ac-dom-traversal/querySelector":69,"@marcom/ac-jetpack-lib":297,"@marcom/ac-jetpack-lib/core/LocalNavStyleChanger":301,"@marcom/ac-jetpack-lib/model/ComponentMap":302,"@marcom/ac-jetpack-lib/model/DataAttributes":303,"@marcom/ac-jetpack-lib/model/EnabledFeatures":304,"@marcom/ac-jetpack-lib/model/PageMap":305,"@marcom/ac-jetpack-lib/model/SectionMap":306,"@marcom/ac-polyfills/Object/assign":368}]},{},[384]);